(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{JcD5:function(e,t,n){"use strict";n.r(t);var i=n("ofXK"),r=n("3Pt+"),a=n("1kSV"),o=n("fXoL");let m=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.f,a.x,r.q]]}),e})();var s=n("2Did"),c=n("tyNb"),u=n("Znnd"),b=n("wd/R"),d=n("5yfJ"),l=n("JIr8"),h=n("qc5V"),p=n("twzC"),f=n("Olgc"),y=n("UdTj");let g=(()=>{class e{constructor(e){this.fb=e,this.meridian=!0,this.onChange=()=>{},this.onTouch=()=>{}}ngOnInit(){const e=b();this.dateTimeForm=this.fb.group({date:new r.d({year:e.year(),month:e.month()+1,day:e.day()}),time:new r.d({hour:e.hour(),minute:e.minute()})}),this.dateTimeForm.valueChanges.subscribe(e=>{this.onChange({year:e.date.year,month:e.date.month,day:e.date.day,hour:e.date.hour,minute:e.date.minute})})}toggleMeridian(){this.meridian=!this.meridian}writeValue(e){this.dateTimeForm.setValue({date:{year:e.year,month:e.month,day:e.day},time:{hour:e.hour,minute:e.minute}})}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouch=e}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(r.c))},e.\u0275cmp=o.Jb({type:e,selectors:[["duelit-date-time-picker"]],inputs:{minDate:"minDate"},decls:6,vars:7,consts:[[3,"formGroup"],[3,"click"],["formControlName","time",3,"meridian"],["formControlName","date",3,"minDate"]],template:function(e,t){1&e&&(o.Tb(0,0),o.Vb(1,"div"),o.Vb(2,"button",1),o.hc("click",(function(){return t.toggleMeridian()})),o.Lc(3),o.Ub(),o.Ub(),o.Qb(4,"ngb-timepicker",2),o.Qb(5,"ngb-datepicker",3),o.Sb()),2&e&&(o.rc("formGroup",t.dateTimeForm),o.Cb(2),o.Fb("btn btn-sm btn-outline-",t.meridian?"success":"danger",""),o.Cb(1),o.Nc(" Meridian - ",t.meridian?"ON":"OFF"," "),o.Cb(1),o.rc("meridian",t.meridian),o.Cb(1),o.rc("minDate",t.minDate))},directives:[r.m,r.g,a.w,r.l,r.f,a.e],styles:[""]}),e})();function C(e,t){if(1&e&&(o.Vb(0,"option",7),o.Lc(1),o.Ub()),2&e){const e=t.$implicit;o.rc("value",e.id),o.Cb(1),o.Mc(e.title)}}function w(e,t){if(1&e&&(o.Tb(0),o.Jc(1,C,2,2,"option",11),o.Sb()),2&e){const e=t.$implicit;o.Cb(1),o.rc("ngForOf",e)}}const v=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.api=e,this.fb=t,this.loginService=n,this.toast=i}ngOnInit(){this.games$=this.api.get(u.f.Games);const e=b();this.minDate=new a.c(e.year(),e.month()+1,e.day()),this.tournamentForm=this.fb.group({dateTime:new r.d({year:e.year(),month:e.month()+1,day:e.day(),hour:e.hour(),minute:e.minute()}),game:new r.d("",r.s.required),playerCount:new r.d(2,[r.s.required,r.s.min(2)])})}isCreateDisabled(){return""===this.tournamentForm.value.game}createTournament(){const e=this.tournamentForm.value,t=e.dateTime,n={tournament_type:"public",interval:3e5,user_id:this.loginService.user.id,game_id:e.game,minimum_players:e.playerCount,started_at:b().year(t.year).month(t.month+1).day(t.day).hour(t.hour).minute(t.minute).utc().format("DD/MM/YYYY HH:mm:ss")};this.api.post(u.d.CreateTournament,{body:n,opts:{addSecurity:!1}}).pipe(Object(l.a)(e=>(this.toast.error(e.error||e.statusText||e.message),d.a))).subscribe(()=>{this.toast.success("Tournament created successfully.")})}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(h.a),o.Pb(r.c),o.Pb(p.a),o.Pb(f.a))},e.\u0275cmp=o.Jb({type:e,selectors:[["duelit-tournaments"]],decls:23,vars:7,consts:[["head","Create a tournament"],[1,"row",3,"formGroup"],[1,"date-time","col-md"],["formControlName","dateTime",3,"minDate"],[1,"game-details","col-md"],[1,"form-group"],["formControlName","status","formControlName","game",1,"form-control"],[3,"value"],[4,"ngIf"],["type","number","min","2","formControlName","playerCount",1,"form-control"],[1,"btn","custom","primary",3,"disabled","click"],[3,"value",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(o.Vb(0,"duelit-panel",0),o.Vb(1,"div",1),o.Vb(2,"div",2),o.Vb(3,"label"),o.Lc(4,"Date and Time"),o.Ub(),o.Qb(5,"duelit-date-time-picker",3),o.Ub(),o.Vb(6,"div",4),o.Vb(7,"div"),o.Vb(8,"div",5),o.Vb(9,"label"),o.Lc(10,"Game"),o.Ub(),o.Vb(11,"select",6),o.Vb(12,"option",7),o.Lc(13,"Select Game"),o.Ub(),o.Jc(14,w,2,1,"ng-container",8),o.mc(15,"async"),o.Ub(),o.Ub(),o.Vb(16,"div",5),o.Vb(17,"label"),o.Lc(18,"Minimum Players"),o.Ub(),o.Qb(19,"input",9),o.Ub(),o.Ub(),o.Vb(20,"div"),o.Vb(21,"button",10),o.hc("click",(function(){return t.createTournament()})),o.Lc(22,"Create"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&e&&(o.Cb(1),o.rc("formGroup",t.tournamentForm),o.Cb(4),o.rc("minDate",t.minDate),o.Cb(7),o.rc("value",""),o.Cb(2),o.rc("ngIf",o.nc(15,5,t.games$)),o.Cb(7),o.rc("disabled",t.isCreateDisabled()))},directives:[y.a,r.m,r.g,g,r.l,r.f,r.r,r.o,r.t,i.m,r.p,r.b,i.l],pipes:[i.b],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}[_nghost-%COMP%]   duelit-panel[_ngcontent-%COMP%]{max-width:35em}[_nghost-%COMP%]   duelit-panel[_ngcontent-%COMP%]   .game-details[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:justify;justify-content:space-between}[_nghost-%COMP%]   duelit-panel[_ngcontent-%COMP%]   .game-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}"]}),e})()}];let M=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[c.e.forChild(v)],c.e]}),e})();n.d(t,"TournamentsModule",(function(){return V}));let V=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,M,s.a,m,r.q]]}),e})()}}]);