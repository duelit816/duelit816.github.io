function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{kXEd:function(e,t,r){"use strict";r.r(t);var s=r("ofXK"),n=r("3Pt+"),o=r("2Did"),i=r("tyNb"),a=r("Znnd"),c=r("PqYM"),d=r("lJxs"),l=r("GJmQ");function u(e){return Object(c.a)(0,1e3).pipe(Object(d.a)((function(t){return e-t})),Object(l.a)((function(e){return e>=0})))}var b=r("2Vo4"),f=r("LRne"),p=r("JIr8"),g=r("fXoL"),m=r("Olgc"),h=r("qc5V"),w=r("UdTj");function P(e,t){1&e&&(g.Vb(0,"span",11),g.Lc(1,"This field is required."),g.Ub())}function v(e,t){if(1&e&&(g.Vb(0,"span",11),g.Lc(1),g.Ub()),2&e){var r=g.lc(3);g.Cb(1),g.Nc("This field can not be less than ",r.resetPasswordForm.get("password").errors.minlength.requiredLength," characters.")}}function C(e,t){if(1&e&&(g.Vb(0,"span",11),g.Lc(1),g.Ub()),2&e){var r=g.lc(3);g.Cb(1),g.Nc("This field can be at most ",r.resetPasswordForm.get("password").errors.maxlength.requiredLength," characters long.")}}function k(e,t){if(1&e&&(g.Tb(0),g.Jc(1,P,2,0,"span",9),g.Jc(2,v,2,1,"span",9),g.Jc(3,C,2,1,"span",9),g.Sb()),2&e){var r=g.lc(2);g.Cb(1),g.rc("ngIf",r.resetPasswordForm.get("password").errors.required),g.Cb(1),g.rc("ngIf",r.resetPasswordForm.get("password").errors.minlength),g.Cb(1),g.rc("ngIf",r.resetPasswordForm.get("password").errors.maxlength)}}function y(e,t){1&e&&(g.Vb(0,"span",11),g.Lc(1,"This field is required."),g.Ub())}function x(e,t){if(1&e&&(g.Vb(0,"span",11),g.Lc(1),g.Ub()),2&e){var r=g.lc(3);g.Cb(1),g.Nc("This field can not be less than ",r.resetPasswordForm.get("confirm").errors.minlength.requiredLength," characters.")}}function L(e,t){if(1&e&&(g.Vb(0,"span",11),g.Lc(1),g.Ub()),2&e){var r=g.lc(3);g.Cb(1),g.Nc("This field can be at most ",r.resetPasswordForm.get("confirm").errors.maxlength.requiredLength," characters long.")}}function F(e,t){if(1&e&&(g.Tb(0),g.Jc(1,y,2,0,"span",9),g.Jc(2,x,2,1,"span",9),g.Jc(3,L,2,1,"span",9),g.Sb()),2&e){var r=g.lc(2);g.Cb(1),g.rc("ngIf",r.resetPasswordForm.get("confirm").errors.required),g.Cb(1),g.rc("ngIf",r.resetPasswordForm.get("confirm").errors.minlength),g.Cb(1),g.rc("ngIf",r.resetPasswordForm.get("confirm").errors.maxlength)}}function I(e,t){1&e&&g.Qb(0,"span",12)}function O(e,t){1&e&&g.Lc(0,"Send Request")}function V(e,t){1&e&&(g.Vb(0,"span",11),g.Lc(1,"Password are not the same."),g.Ub())}var J=function(){return["/login"]};function U(e,t){if(1&e){var r=g.Wb();g.Tb(0),g.Vb(1,"duelit-panel"),g.Vb(2,"div",2),g.Vb(3,"h2"),g.Lc(4,"Reset your password"),g.Ub(),g.Vb(5,"p"),g.Lc(6,"Enter your new password below"),g.Ub(),g.Qb(7,"input",3),g.Jc(8,k,4,3,"ng-container",4),g.Qb(9,"input",5),g.Jc(10,F,4,3,"ng-container",4),g.Vb(11,"button",6),g.hc("click",(function(){return g.Cc(r),g.lc().resetPassword()})),g.Jc(12,I,1,0,"span",7),g.Jc(13,O,1,0,"ng-template",null,8,g.Kc),g.Ub(),g.Jc(15,V,2,0,"span",9),g.Vb(16,"span",10),g.Lc(17,"Back to Login"),g.Ub(),g.Ub(),g.Ub(),g.Sb()}if(2&e){var s=g.zc(14),n=g.lc();g.Cb(2),g.rc("formGroup",n.resetPasswordForm),g.Cb(5),g.Hb("invalid",!n.isPasswordSame()&&n.isControlsTouched()),g.Cb(1),g.rc("ngIf",n.resetPasswordForm.get("password").invalid&&n.resetPasswordForm.get("password").touched),g.Cb(1),g.Hb("invalid",!n.isPasswordSame()&&n.isControlsTouched()),g.Cb(1),g.rc("ngIf",n.resetPasswordForm.get("confirm").invalid&&n.resetPasswordForm.get("confirm").touched),g.Cb(1),g.rc("disabled",n.resetPasswordForm.invalid||!n.isPasswordSame()||n.isResettingPassword),g.Cb(1),g.rc("ngIf",n.isResettingPassword)("ngIfElse",s),g.Cb(3),g.rc("ngIf",!n.isPasswordSame()&&n.isControlsTouched()),g.Cb(1),g.rc("routerLink",g.uc(12,J))}}function _(e,t){if(1&e&&(g.Tb(0),g.Vb(1,"h3"),g.Lc(2,"Your password was successfully changed."),g.Ub(),g.Vb(3,"h3"),g.Lc(4),g.mc(5,"async"),g.Ub(),g.Vb(6,"h3",15),g.Lc(7,"Go back to Login."),g.Ub(),g.Sb()),2&e){var r=g.lc(2);g.Cb(4),g.Nc("Redirecting you to Login in ",g.nc(5,2,r.timer$),""),g.Cb(2),g.rc("routerLink",g.uc(4,J))}}var j=function(){return["/forgot-password"]};function T(e,t){if(1&e&&(g.Vb(0,"h3"),g.Lc(1,"Your link seems to be invalid, please request a new forgot password."),g.Ub(),g.Vb(2,"h3"),g.Lc(3),g.mc(4,"async"),g.Ub(),g.Vb(5,"h3",15),g.Lc(6,"Go back to Forgot Password."),g.Ub()),2&e){var r=g.lc(2);g.Cb(3),g.Nc("Redirecting you to Forgot password page in ",g.nc(4,2,r.timer$),""),g.Cb(2),g.rc("routerLink",g.uc(4,j))}}function q(e,t){if(1&e&&(g.Vb(0,"div",13),g.Jc(1,_,8,5,"ng-container",0),g.Jc(2,T,7,5,"ng-template",null,14,g.Kc),g.Ub()),2&e){var r=g.zc(3),s=g.lc();g.Cb(1),g.rc("ngIf",s.resetPasswordFinished)("ngIfElse",r)}}var M,R,N,S=[{path:"",component:(R=function(){function e(t,r,s,n,o){_classCallCheck(this,e),this.router=t,this.route=r,this.toast=s,this.fb=n,this.api=o,this.countdown=10,this.timer$=new b.a(this.countdown),this.isResettingPassword=!1,this.resetPasswordFinished=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;if(this.valid=this.route.snapshot.data.data.valid,this.email=this.route.snapshot.data.data.email,this.token=this.route.snapshot.params.token,!this.valid)return this.toast.error("Your link to reset your password seems to be invalid. Please make a new request"),void u(this.countdown).subscribe((function(t){e.timer$.next(t),t<=0&&(e.timer$.complete(),e.router.navigate(["/forgot-password"]))}));this.resetPasswordForm=this.fb.group({password:new n.d("",[n.s.required,n.s.maxLength(24),n.s.minLength(8)]),confirm:new n.d("",[n.s.required,n.s.maxLength(24),n.s.minLength(8)])})}},{key:"resetPassword",value:function(){var e=this;this.isResettingPassword=!0,this.isPasswordSame()?this.api.post(a.d.ResetPassword,{opts:{addSecurity:!1},body:{token:this.token,password:this.resetPasswordForm.get("confirm").value,email:this.email}}).pipe(Object(p.a)((function(e){return 200===e.status?Object(f.a)("successful"):Object(f.a)(e)}))).subscribe((function(t){e.isResettingPassword=!1,"successful"===t?(e.toast.success("Reset password successful"),e.resetPasswordFinished=!0,u(e.countdown).subscribe((function(t){e.timer$.next(t),t<=0&&(e.timer$.complete(),e.router.navigate(["/login"]))}))):e.toast.error(t.error.text||JSON.stringify(t.error))})):(this.toast.error("Passwords do not match"),this.isResettingPassword=!1)}},{key:"isPasswordSame",value:function(){var e=this.resetPasswordForm.get("password");return this.resetPasswordForm.get("confirm").value===e.value}},{key:"isControlsTouched",value:function(){var e=this.resetPasswordForm.get("password"),t=this.resetPasswordForm.get("confirm");return e.touched&&t.touched}}]),e}(),R.\u0275fac=function(e){return new(e||R)(g.Pb(i.b),g.Pb(i.a),g.Pb(m.a),g.Pb(n.c),g.Pb(h.a))},R.\u0275cmp=g.Jb({type:R,selectors:[["duelit-reset-password"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["invalid",""],[1,"form-group",3,"formGroup"],["type","password","placeholder","New password","autocomplete","off","formControlName","password",1,"form-control","custom"],[4,"ngIf"],["type","password","placeholder","Repeat new password","autocomplete","off","formControlName","confirm",1,"form-control","custom"],[1,"btn","custom","primary",3,"disabled","click"],["class","loading",4,"ngIf","ngIfElse"],["reset",""],["class","error",4,"ngIf"],[3,"routerLink"],[1,"error"],[1,"loading"],[1,"invalid-msg"],["invalidLink",""],[1,"link",3,"routerLink"]],template:function(e,t){if(1&e&&(g.Jc(0,U,18,13,"ng-container",0),g.Jc(1,q,4,2,"ng-template",null,1,g.Kc)),2&e){var r=g.zc(2);g.rc("ngIf",t.valid&&!t.resetPasswordFinished)("ngIfElse",r)}},directives:[s.m,w.a,n.m,n.g,n.b,n.l,n.f,i.c],pipes:[s.b],styles:[".link[_ngcontent-%COMP%]{color:#4093f7;cursor:pointer}.invalid-msg[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}",".form-group[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;display:-webkit-box;display:flex;justify-items:center;text-align:center}span[_ngcontent-%COMP%]{color:#4093f7;cursor:pointer;padding-top:15px}span.error[_ngcontent-%COMP%]{color:red;cursor:unset;padding-top:unset;align-self:flex-start;padding-bottom:10px}span.loading[_ngcontent-%COMP%]{padding:0;background-size:15px 15px}[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;width:100%;height:100%}[_nghost-%COMP%]   duelit-panel[_ngcontent-%COMP%]{max-width:720px;-webkit-box-flex:1;flex-grow:1}button[_ngcontent-%COMP%]{font-size:15px}"]}),R),resolve:{data:(M=function(){function e(t){_classCallCheck(this,e),this.api=t}return _createClass(e,[{key:"resolve",value:function(e,t){var r=this.api.buildPath(a.d.ValidateToken,[e.paramMap.get("token")]);return this.api.get(r).pipe(Object(p.a)((function(e){return 200===e.status?Object(f.a)(e.error.text):Object(f.a)(null)})),Object(d.a)((function(e){return{valid:!!e,email:e}})))}}]),e}(),M.\u0275fac=function(e){return new(e||M)(g.dc(h.a))},M.\u0275prov=g.Lb({token:M,factory:M.\u0275fac,providedIn:"root"}),M)}}],E=((N=function e(){_classCallCheck(this,e)}).\u0275mod=g.Nb({type:N}),N.\u0275inj=g.Mb({factory:function(e){return new(e||N)},imports:[[i.e.forChild(S)],i.e]}),N);r.d(t,"ResetPasswordModule",(function(){return z}));var $,z=(($=function e(){_classCallCheck(this,e)}).\u0275mod=g.Nb({type:$}),$.\u0275inj=g.Mb({factory:function(e){return new(e||$)},imports:[[s.c,E,o.a,n.q]]}),$)}}]);