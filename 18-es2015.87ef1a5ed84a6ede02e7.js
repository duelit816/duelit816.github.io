(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{ATrY:function(e,t,r){"use strict";r.r(t);var n=r("ofXK"),c=r("3Pt+"),i=r("6NWb"),o=r("1kSV"),s=r("tyNb"),a=r("twK/"),l=r("wHSu"),b=r("Znnd"),u=r("wd/R"),f=r("IGGr"),d=r("SMdK"),m=r("2Vo4"),g=r("5yfJ"),p=r("lJxs"),h=r("JIr8"),C=r("fXoL"),U=r("qc5V"),D=r("Olgc");function V(e,t){if(1&e){const e=C.Wb();C.Tb(0),C.Vb(1,"div",4),C.Qb(2,"fa-icon",5),C.Vb(3,"label",6),C.Lc(4,"Failed Created Admin User!"),C.Ub(),C.Vb(5,"label",6),C.Lc(6),C.Ub(),C.Vb(7,"button",7),C.hc("click",(function(){return C.Cc(e),C.lc(2).goBack()})),C.Lc(8,"Go Back to user details"),C.Ub(),C.Vb(9,"button",7),C.hc("click",(function(){return C.Cc(e),C.lc(2).createUser()})),C.Lc(10,"Retry"),C.Ub(),C.Ub(),C.Sb()}if(2&e){const e=C.lc(2);C.Cb(2),C.rc("icon",e.failedIcon),C.Cb(4),C.Nc("Error: ",e.createError,"")}}function w(e,t){if(1&e){const e=C.Wb();C.Tb(0),C.Vb(1,"div",4),C.Qb(2,"fa-icon",8),C.Vb(3,"label",9),C.Lc(4,"Successfully Created User!"),C.Ub(),C.Vb(5,"label",9),C.Lc(6),C.mc(7,"async"),C.Ub(),C.Vb(8,"button",7),C.hc("click",(function(){return C.Cc(e),C.lc(2).navigateToUserProfile()})),C.Lc(9,"Redirect now"),C.Ub(),C.Ub(),C.Sb()}if(2&e){const e=C.lc(2);C.Cb(2),C.rc("icon",e.successIcon),C.Cb(4),C.Nc("Redirecting to user profile in ",C.nc(7,2,e.timer$),"")}}function v(e,t){if(1&e&&(C.Tb(0),C.Jc(1,V,11,2,"ng-container",3),C.Jc(2,w,10,4,"ng-container",3),C.Sb()),2&e){const e=C.lc();C.Cb(1),C.rc("ngIf",e.createError),C.Cb(1),C.rc("ngIf",e.isCreatingDone)}}function I(e,t){1&e&&(C.Vb(0,"span",35),C.Lc(1,"This field is required."),C.Ub())}function y(e,t){if(1&e&&(C.Tb(0),C.Jc(1,I,2,0,"span",34),C.Sb()),2&e){const e=C.lc(2);C.Cb(1),C.rc("ngIf",e.userDetailsForm.get("firstName").errors.required)}}function F(e,t){1&e&&(C.Vb(0,"span",35),C.Lc(1,"This field is required."),C.Ub())}function L(e,t){if(1&e&&(C.Tb(0),C.Jc(1,F,2,0,"span",34),C.Sb()),2&e){const e=C.lc(2);C.Cb(1),C.rc("ngIf",e.userDetailsForm.get("lastName").errors.required)}}function P(e,t){1&e&&(C.Vb(0,"span",35),C.Lc(1,"This field is required."),C.Ub())}function J(e,t){1&e&&(C.Vb(0,"span",35),C.Lc(1,"This field must be a valid email address."),C.Ub())}function M(e,t){if(1&e&&(C.Tb(0),C.Jc(1,P,2,0,"span",34),C.Jc(2,J,2,0,"span",34),C.Sb()),2&e){const e=C.lc(2);C.Cb(1),C.rc("ngIf",e.userDetailsForm.get("email").errors.required),C.Cb(1),C.rc("ngIf",e.userDetailsForm.get("email").errors.email)}}function O(e,t){if(1&e&&(C.Vb(0,"option",38),C.Lc(1),C.Ub()),2&e){const e=t.$implicit;C.rc("value",e),C.Cb(1),C.Mc(e)}}function N(e,t){if(1&e&&(C.Vb(0,"select",36),C.Jc(1,O,2,2,"option",37),C.Ub()),2&e){const e=t.$implicit;C.Cb(1),C.rc("ngForOf",e)}}function x(e,t){1&e&&(C.Vb(0,"span",35),C.Lc(1,"This field is required."),C.Ub())}function T(e,t){if(1&e&&(C.Tb(0),C.Jc(1,x,2,0,"span",34),C.Sb()),2&e){const e=C.lc(2);C.Cb(1),C.rc("ngIf",e.userDetailsForm.get("country").errors.required)}}function _(e,t){if(1&e&&(C.Vb(0,"option",38),C.Lc(1),C.Ub()),2&e){const e=t.$implicit;C.rc("value",e),C.Cb(1),C.Mc(e)}}function q(e,t){if(1&e&&(C.Vb(0,"select",40),C.Jc(1,_,2,2,"option",37),C.Ub()),2&e){const e=t.$implicit;C.Cb(1),C.rc("ngForOf",e)}}function k(e,t){if(1&e&&(C.Vb(0,"div",18),C.Vb(1,"label"),C.Lc(2,"State / Province"),C.Ub(),C.Jc(3,q,2,1,"select",39),C.mc(4,"async"),C.Ub()),2&e){C.lc();const e=C.zc(29),t=C.lc();C.Cb(3),C.rc("ngIf",C.nc(4,2,t.states$))("ngIfElse",e)}}function S(e,t){1&e&&C.Qb(0,"input",41)}function E(e,t){1&e&&(C.Vb(0,"span",35),C.Lc(1,"This field is required."),C.Ub())}function $(e,t){if(1&e&&(C.Tb(0),C.Jc(1,E,2,0,"span",34),C.Sb()),2&e){const e=C.lc(2);C.Cb(1),C.rc("ngIf",e.userDetailsForm.get("birthDate").errors.required)}}function Q(e,t){1&e&&(C.Vb(0,"span",35),C.Lc(1,"This field is required."),C.Ub())}function Y(e,t){if(1&e&&(C.Vb(0,"span",35),C.Lc(1),C.Ub()),2&e){const e=C.lc(3);C.Cb(1),C.Nc("This field can not be less than ",e.userDetailsForm.get("password").errors.minlength.requiredLength," characters.")}}function j(e,t){if(1&e&&(C.Vb(0,"span",35),C.Lc(1),C.Ub()),2&e){const e=C.lc(3);C.Cb(1),C.Nc("This field can be at most ",e.userDetailsForm.get("password").errors.maxlength.requiredLength," characters long.")}}function z(e,t){if(1&e&&(C.Tb(0),C.Jc(1,Q,2,0,"span",34),C.Jc(2,Y,2,1,"span",34),C.Jc(3,j,2,1,"span",34),C.Sb()),2&e){const e=C.lc(2);C.Cb(1),C.rc("ngIf",e.userDetailsForm.get("password").errors.required),C.Cb(1),C.rc("ngIf",e.userDetailsForm.get("password").errors.minlength),C.Cb(1),C.rc("ngIf",e.userDetailsForm.get("password").errors.maxlength)}}function K(e,t){1&e&&(C.Vb(0,"span",35),C.Lc(1,"This field is required."),C.Ub())}function B(e,t){if(1&e&&(C.Vb(0,"span",35),C.Lc(1),C.Ub()),2&e){const e=C.lc(3);C.Cb(1),C.Nc("This field can not be less than ",e.userDetailsForm.get("confirm").errors.minlength.requiredLength," characters.")}}function G(e,t){if(1&e&&(C.Vb(0,"span",35),C.Lc(1),C.Ub()),2&e){const e=C.lc(3);C.Cb(1),C.Nc("This field can be at most ",e.userDetailsForm.get("confirm").errors.maxlength.requiredLength," characters long.")}}function R(e,t){1&e&&(C.Vb(0,"span",35),C.Lc(1,"Passwords do not match."),C.Ub())}function W(e,t){if(1&e&&(C.Tb(0),C.Jc(1,K,2,0,"span",34),C.Jc(2,B,2,1,"span",34),C.Jc(3,G,2,1,"span",34),C.Jc(4,R,2,0,"span",34),C.Sb()),2&e){const e=C.lc(2);C.Cb(1),C.rc("ngIf",e.userDetailsForm.get("confirm").errors.required),C.Cb(1),C.rc("ngIf",e.userDetailsForm.get("confirm").errors.minlength),C.Cb(1),C.rc("ngIf",e.userDetailsForm.get("confirm").errors.maxlength),C.Cb(1),C.rc("ngIf",e.userDetailsForm.get("confirm").errors.mustMatch)}}function A(e,t){1&e&&C.Qb(0,"span",42)}function X(e,t){1&e&&C.Lc(0,"Create")}function H(e,t){if(1&e){const e=C.Wb();C.Vb(0,"div",10),C.Vb(1,"span"),C.Lc(2,"Create User"),C.Ub(),C.Ub(),C.Vb(3,"div",11),C.Vb(4,"div",12),C.Vb(5,"div",13),C.Vb(6,"label"),C.Lc(7,"First Name"),C.Ub(),C.Qb(8,"input",14),C.Jc(9,y,2,1,"ng-container",3),C.Ub(),C.Vb(10,"div",13),C.Vb(11,"label"),C.Lc(12,"Last Name"),C.Ub(),C.Qb(13,"input",15),C.Jc(14,L,2,1,"ng-container",3),C.Ub(),C.Ub(),C.Vb(15,"div",16),C.Vb(16,"label"),C.Lc(17,"Email"),C.Ub(),C.Qb(18,"input",17),C.Jc(19,M,3,2,"ng-container",3),C.Ub(),C.Vb(20,"div",12),C.Vb(21,"div",18),C.Vb(22,"label"),C.Lc(23,"Country"),C.Ub(),C.Jc(24,N,2,1,"select",19),C.mc(25,"async"),C.Jc(26,T,2,1,"ng-container",3),C.Ub(),C.Jc(27,k,5,4,"div",20),C.Jc(28,S,1,0,"ng-template",null,21,C.Kc),C.Ub(),C.Vb(30,"div",12),C.Vb(31,"div",22),C.Vb(32,"label"),C.Lc(33,"Birthday"),C.Ub(),C.Vb(34,"div",23),C.Qb(35,"input",24,25),C.Vb(37,"div",26),C.Vb(38,"button",27),C.hc("click",(function(){return C.Cc(e),C.zc(36).toggle()})),C.Qb(39,"fa-icon",28),C.Ub(),C.Ub(),C.Ub(),C.Jc(40,$,2,1,"ng-container",3),C.Ub(),C.Ub(),C.Vb(41,"div",12),C.Vb(42,"div",22),C.Vb(43,"label"),C.Lc(44,"Password"),C.Ub(),C.Qb(45,"input",29),C.Jc(46,z,4,3,"ng-container",3),C.Ub(),C.Ub(),C.Vb(47,"div",12),C.Vb(48,"div",22),C.Vb(49,"label"),C.Lc(50,"Confirm Password"),C.Ub(),C.Qb(51,"input",30),C.Jc(52,W,5,4,"ng-container",3),C.Ub(),C.Ub(),C.Vb(53,"button",31),C.hc("click",(function(){return C.Cc(e),C.lc().createUser()})),C.Jc(54,A,1,0,"span",32),C.Jc(55,X,1,0,"ng-template",null,33,C.Kc),C.Ub(),C.Ub()}if(2&e){const e=C.zc(29),t=C.zc(56),r=C.lc();C.Cb(3),C.rc("formGroup",r.userDetailsForm),C.Cb(6),C.rc("ngIf",r.userDetailsForm.get("firstName").invalid&&r.userDetailsForm.get("firstName").touched),C.Cb(5),C.rc("ngIf",r.userDetailsForm.get("lastName").invalid&&r.userDetailsForm.get("lastName").touched),C.Cb(5),C.rc("ngIf",r.userDetailsForm.get("email").invalid&&r.userDetailsForm.get("email").touched),C.Cb(5),C.rc("ngIf",C.nc(25,17,r.countries$))("ngIfElse",e),C.Cb(2),C.rc("ngIf",r.userDetailsForm.get("country").invalid&&r.userDetailsForm.get("country").touched),C.Cb(1),C.rc("ngIf","United States"===r.userDetailsForm.get("country").value),C.Cb(8),C.rc("maxDate",r.maxDate)("minDate",r.minDate),C.Cb(4),C.rc("icon",r.calendarIcon),C.Cb(1),C.rc("ngIf",r.userDetailsForm.get("birthDate").invalid&&r.userDetailsForm.get("birthDate").touched),C.Cb(6),C.rc("ngIf",r.userDetailsForm.get("password").invalid&&r.userDetailsForm.get("password").touched),C.Cb(6),C.rc("ngIf",r.userDetailsForm.get("confirm").invalid&&r.userDetailsForm.get("confirm").touched),C.Cb(1),C.rc("disabled",r.userDetailsForm.invalid||r.isCreatingUser),C.Cb(1),C.rc("ngIf",r.isCreatingUser)("ngIfElse",t)}}const Z=[{path:"",component:(()=>{class e{constructor(e,t,r,n){this.api=e,this.fb=t,this.toast=r,this.router=n,this.countdown=5,this.calendarIcon=a.a,this.successIcon=l.b,this.failedIcon=l.f,this.isCreatingUser=!1,this.createError=null,this.isCreatingDone=!1,this.minDate=new o.b(1900,1,1),this.timer$=new m.a(this.countdown)}ngOnInit(){this.countries$=this.api.get(b.e.Countries).pipe(Object(p.a)((e=[])=>e.map(e=>e.name))),this.states$=this.api.get(b.e.States).pipe(Object(p.a)((e=[])=>e.map(e=>e.name)));const e=u();this.maxDate=new o.b(e.year(),e.month()+1,e.day()),this.userDetailsForm=this.fb.group({firstName:new c.d("",c.s.required),lastName:new c.d("",c.s.required),email:new c.d("",[d.a,c.s.required]),country:new c.d("",c.s.required),state:new c.d,birthDate:new c.d("",c.s.required),password:new c.d("",[c.s.required,c.s.minLength(8)]),confirm:new c.d("",[c.s.required,c.s.minLength(8)])},{validators:[e=>{const t=e.controls.confirm;t.errors&&!t.errors.mustMatch||t.setErrors(e.controls.password.value!==t.value?{mustMatch:!0}:null)}]})}createUser(){this.isCreatingUser=!0,this.createError=null;const e=Object.assign({},this.userDetailsForm.value),t={email:e.email,password:e.password,first_name:e.firstName,last_name:e.lastName,country:e.country,state:e.state,birth_date:(r=e.birthDate,u().year(r.year).month(r.month-1).date(r.day)).format("YYYY-MM-DD")};var r;this.api.post(b.d.CreateUser,{body:t}).pipe(Object(h.a)(e=>(this.isCreatingUser=!1,this.createError=e.error||e.statusText||e.message||"Something went wrong on creating the user.",this.toast.error(this.createError),g.a))).subscribe(e=>{this.createdUser=e,Object(f.a)(this.countdown).subscribe(e=>{this.timer$.next(e),e<=0&&(this.timer$.complete(),this.navigateToUserProfile())}),this.isCreatingUser=!1,this.isCreatingDone=!0})}navigateToUserProfile(){this.router.navigate(["/admin/user",this.createdUser.id])}goBack(){this.createError=null}}return e.\u0275fac=function(t){return new(t||e)(C.Pb(U.a),C.Pb(c.c),C.Pb(D.a),C.Pb(s.b))},e.\u0275cmp=C.Jb({type:e,selectors:[["duelit-user-create"]],decls:4,vars:2,consts:[[1,"card"],[4,"ngIf","ngIfElse"],["createUserTemplate",""],[4,"ngIf"],[1,"card-body","result"],[1,"fa-9x","failed",3,"icon"],[1,"failed"],[1,"btn","btn-primary","custom","col",3,"click"],[1,"fa-9x","success",3,"icon"],[1,"success"],[1,"card-header","d-flex"],[1,"card-body",3,"formGroup"],[1,"row"],[1,"form-group","col-6"],["type","text","formControlName","firstName",1,"form-control"],["type","text","formControlName","lastName",1,"form-control"],[1,"form-group"],["type","email","formControlName","email",1,"form-control"],[1,"col-6","form-group"],["class","form-control","formControlName","country","aria-placeholder","Select Country",4,"ngIf","ngIfElse"],["class","col-6 form-group",4,"ngIf"],["loadingSelect",""],[1,"col","form-group"],[1,"input-group"],["placeholder","YYYY-MM-DD","formControlName","birthDate","ngbDatepicker","",1,"form-control",3,"maxDate","minDate"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","calendar",3,"click"],[3,"icon"],["type","password","formControlName","password",1,"form-control"],["type","password","formControlName","confirm",1,"form-control"],[1,"btn","btn-primary","custom","col",3,"disabled","click"],["class","loading",4,"ngIf","ngIfElse"],["createButton",""],["class","error",4,"ngIf"],[1,"error"],["formControlName","country","aria-placeholder","Select Country",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","form-control","formControlName","states","aria-placeholder","Select States / Province",4,"ngIf","ngIfElse"],["formControlName","states","aria-placeholder","Select States / Province",1,"form-control"],["readonly","","disabled","","type","text","placeholder","Loading...",1,"form-control-plaintext"],[1,"loading"]],template:function(e,t){if(1&e&&(C.Vb(0,"div",0),C.Jc(1,v,3,2,"ng-container",1),C.Jc(2,H,57,19,"ng-template",null,2,C.Kc),C.Ub()),2&e){const e=C.zc(3);C.Cb(1),C.rc("ngIf",t.createError||t.isCreatingDone)("ngIfElse",e)}},directives:[n.m,i.a,c.m,c.g,c.b,c.l,c.f,o.k,c.r,n.l,c.o,c.t],pipes:[n.b],styles:["[_nghost-%COMP%]{width:100%;align-content:center;-webkit-box-pack:center;justify-content:center}[_nghost-%COMP%], [_nghost-%COMP%]   .result[_ngcontent-%COMP%]{display:-webkit-box;display:flex}[_nghost-%COMP%]   .result[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;padding:50px}[_nghost-%COMP%]   .result[_ngcontent-%COMP%]   fa-icon.success[_ngcontent-%COMP%], [_nghost-%COMP%]   .result[_ngcontent-%COMP%]   label.success[_ngcontent-%COMP%]{color:#28a745}[_nghost-%COMP%]   .result[_ngcontent-%COMP%]   fa-icon.failed[_ngcontent-%COMP%], [_nghost-%COMP%]   .result[_ngcontent-%COMP%]   label.failed[_ngcontent-%COMP%]{color:#dc3545}[_nghost-%COMP%]   .result[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex}[_nghost-%COMP%]   .card[_ngcontent-%COMP%]{max-width:512px}[_nghost-%COMP%]   span.loading[_ngcontent-%COMP%]{padding:0;background-size:15px 15px}"]}),e})()}];let ee=(()=>{class e{}return e.\u0275mod=C.Nb({type:e}),e.\u0275inj=C.Mb({factory:function(t){return new(t||e)},imports:[[s.e.forChild(Z)],s.e]}),e})();r.d(t,"UserCreateModule",(function(){return te}));let te=(()=>{class e{}return e.\u0275mod=C.Nb({type:e}),e.\u0275inj=C.Mb({factory:function(t){return new(t||e)},imports:[[n.c,ee,c.q,i.b,o.e]]}),e})()}}]);