function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],a=!0,o=!1,r=void 0;try{for(var c,i=t[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!e||n.length!==e);a=!0);}catch(l){o=!0,r=l}finally{try{a||null==i.return||i.return()}finally{if(o)throw r}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"3afk":function(t,e,n){"use strict";n.r(e);var a=n("ofXK"),o=n("3Pt+"),r=n("Dh3D"),c=n("+0xr"),i=n("1kSV"),l=n("tyNb"),s=n("Znnd"),d=n("2Vo4"),u=n("itXk"),b=n("LRne"),f=n("5yfJ"),g=n("JX91"),m=n("vkgz"),h=n("/uUt"),p=n("Kj3r"),C=n("eIep"),O=n("JIr8"),_=n("fXoL"),P=n("qc5V"),w=n("Olgc");function y(t,e){1&t&&(_.Vb(0,"th",18),_.Lc(1," Code"),_.Ub())}function M(t,e){if(1&t&&(_.Vb(0,"td",19),_.Lc(1),_.Ub()),2&t){var n=e.$implicit;_.Cb(1),_.Nc(" ",n.code," ")}}function v(t,e){1&t&&(_.Vb(0,"th",18),_.Lc(1," Name "),_.Ub())}function k(t,e){if(1&t&&(_.Vb(0,"td",19),_.Lc(1),_.Ub()),2&t){var n=e.$implicit;_.Cb(1),_.Nc(" ",n.name," ")}}function D(t,e){1&t&&(_.Vb(0,"th",20),_.Lc(1," For Trivia "),_.Ub())}function S(t,e){if(1&t){var n=_.Wb();_.Vb(0,"td",19),_.Vb(1,"label",21),_.Vb(2,"input",22),_.hc("change",(function(t){_.Cc(n);var a=e.$implicit;return _.lc(2).updateCountry("fortrivia",t.target.checked,a,t.target)})),_.Ub(),_.Qb(3,"span",23),_.Ub(),_.Ub()}if(2&t){var a=e.$implicit;_.Cb(2),_.Db("checked",!!a.fortrivia||void 0)}}function x(t,e){1&t&&(_.Vb(0,"th",20),_.Lc(1," Allowed "),_.Ub())}function j(t,e){if(1&t){var n=_.Wb();_.Vb(0,"td",19),_.Vb(1,"label",21),_.Vb(2,"input",22),_.hc("change",(function(t){_.Cc(n);var a=e.$implicit;return _.lc(2).updateCountry("allowed",t.target.checked,a,t.target)})),_.Ub(),_.Qb(3,"span",23),_.Ub(),_.Ub()}if(2&t){var a=e.$implicit;_.Cb(2),_.Db("checked",!!a.allowed||void 0)}}function J(t,e){1&t&&(_.Vb(0,"th",24),_.Qb(1,"input",25),_.Ub())}function U(t,e){1&t&&(_.Vb(0,"th",24),_.Qb(1,"input",26),_.Ub())}function V(t,e){1&t&&(_.Vb(0,"th",24),_.Lc(1,"\xa0"),_.Ub())}function L(t,e){1&t&&(_.Vb(0,"th",24),_.Lc(1,"\xa0"),_.Ub())}function T(t,e){1&t&&_.Qb(0,"tr",27)}function $(t,e){1&t&&_.Qb(0,"tr",28)}function H(t,e){1&t&&_.Qb(0,"tr",29)}var R=function(){return["code-search","name-search","fortrivia-search","allowed-search"]};function z(t,e){if(1&t){var n=_.Wb();_.Tb(0),_.Vb(1,"table",1),_.hc("matSortChange",(function(t){return _.Cc(n),_.lc().sortData(t)})),_.Tb(2,2),_.Jc(3,y,2,0,"th",3),_.Jc(4,M,2,1,"td",4),_.Sb(),_.Tb(5,5),_.Jc(6,v,2,0,"th",3),_.Jc(7,k,2,1,"td",4),_.Sb(),_.Tb(8,6),_.Jc(9,D,2,0,"th",7),_.Jc(10,S,4,1,"td",4),_.Sb(),_.Tb(11,8),_.Jc(12,x,2,0,"th",7),_.Jc(13,j,4,1,"td",4),_.Sb(),_.Tb(14,9),_.Jc(15,J,2,0,"th",10),_.Sb(),_.Tb(16,11),_.Jc(17,U,2,0,"th",10),_.Sb(),_.Tb(18,12),_.Jc(19,V,2,0,"th",10),_.Sb(),_.Tb(20,13),_.Jc(21,L,2,0,"th",10),_.Sb(),_.Jc(22,T,1,0,"tr",14),_.Jc(23,$,1,0,"tr",15),_.Jc(24,H,1,0,"tr",16),_.Ub(),_.Vb(25,"ngb-pagination",17),_.hc("pageChange",(function(t){return _.Cc(n),_.lc().onPageChange(t)})),_.mc(26,"async"),_.Ub(),_.Sb()}if(2&t){var a=e.$implicit,o=_.lc();_.Cb(1),_.Hb("loading",o.isLoading),_.rc("dataSource",a.rows)("formGroup",o.filterFormGroup),_.Cb(21),_.rc("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),_.Cb(1),_.rc("matHeaderRowDef",_.uc(16,R))("matHeaderRowDefSticky",!0),_.Cb(1),_.rc("matRowDefColumns",o.displayedColumns),_.Cb(1),_.rc("collectionSize",10*a.pages)("pageSize",10)("page",_.nc(26,14,o.page$))("maxSize",4)("rotate",!0)}}var A,N,I=[{path:"",component:(A=function(){function t(e,n,a){_classCallCheck(this,t),this.api=e,this.fb=n,this.toast=a,this.displayedColumns=["code","name","fortrivia","allowed"],this.sortDirection$=new d.a({active:"name",direction:"asc"}),this.page$=new d.a(1),this.isLoading=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.filterFormGroup=this.fb.group({code:new o.d,name:new o.d}),this.countriesPaginated$=Object(u.a)([this.page$,this.sortDirection$,this.filterFormGroup.valueChanges.pipe(Object(g.a)(this.filterFormGroup.value))]).pipe(Object(m.a)((function(){return t.isLoading=!0})),Object(h.a)(),Object(p.a)(500),Object(C.a)((function(e){var n=_slicedToArray(e,3),a=n[0],o=n[1],r=n[2],c=t.api.buildPath(s.b.CountriesPaginated,{page:10*(a-1),limit:10,order:o.active});return t.api.get(c,{query:{name:r.name||"",code:r.code||""}}).pipe(Object(m.a)((function(){return t.isLoading=!1})),Object(O.a)((function(e){return t.isLoading=!1,t.toast.error(e.error||e.statusText||e.message),Object(b.a)({pages:0,rows:[]})})))})),Object(g.a)({pages:0,rows:[]}))}},{key:"sortData",value:function(t){console.log(t),this.sortDirection$.next(""===t.direction?{active:"name",direction:"asc"}:t)}},{key:"onPageChange",value:function(t){this.page$.next(t)}},{key:"updateCountry",value:function(t,e,n,a){var o=this,r={id:n.id};r[t]=e?1:0,this.api.put(s.b.UpdateCountry,{body:r,opts:{addSecurity:!1}}).pipe(Object(m.a)((function(){return o.isLoading=!0})),Object(O.a)((function(t){return o.isLoading=!1,a.checked=!e,o.toast.error(t.error||t.statusText||t.message),f.a}))).subscribe((function(){o.isLoading=!1,o.toast.success("Successfully updated ".concat(n.name,". Updated ").concat("allowed"===t?"Allowed":"For Trivia"," to ").concat(e))}))}}]),t}(),A.\u0275fac=function(t){return new(t||A)(_.Pb(P.a),_.Pb(o.c),_.Pb(w.a))},A.\u0275cmp=_.Jb({type:A,selectors:[["duelit-countries"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","formGroup","matSortChange"],["matColumnDef","code"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","fortrivia"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","allowed"],["matColumnDef","code-search"],["mat-header-cell","","class","form-group",4,"matHeaderCellDef"],["matColumnDef","name-search"],["matColumnDef","fortrivia-search"],["matColumnDef","allowed-search"],["mat-header-row","","class","named-columns",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"d-flex","justify-content-center",3,"collectionSize","pageSize","page","maxSize","rotate","pageChange"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"switch"],["type","checkbox",3,"change"],[1,"slider","round"],["mat-header-cell","",1,"form-group"],["type","text","formControlName","code",1,"form-control"],["type","text","formControlName","name",1,"form-control"],["mat-header-row","",1,"named-columns"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(_.Jc(0,z,27,17,"ng-container",0),_.mc(1,"async")),2&t&&_.rc("ngIf",_.nc(1,1,e.countriesPaginated$))},directives:[a.m,c.j,r.a,o.m,o.g,c.c,c.e,c.b,c.g,c.i,i.u,c.d,r.b,c.a,o.b,o.l,o.f,c.f,c.h],pipes:[a.b],styles:["[_nghost-%COMP%]   .results-and-date[_ngcontent-%COMP%]{-webkit-box-pack:justify;justify-content:space-between}[_nghost-%COMP%]   .results-and-date[_ngcontent-%COMP%], [_nghost-%COMP%]   .results-and-date[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}[_nghost-%COMP%]   .results-and-date[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]{-webkit-box-pack:end;justify-content:flex-end}[_nghost-%COMP%]   .results-and-date[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}[_nghost-%COMP%]   .results-and-date[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   duelit-date-picker-range[_ngcontent-%COMP%]{margin:0 15px}[_nghost-%COMP%]   table[_ngcontent-%COMP%]{width:100%;font-family:Nexa}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   .named-columns[_ngcontent-%COMP%]{height:40px;vertical-align:bottom}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   .named-columns[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:none;font-weight:700;font-size:15px}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   .action-column[_ngcontent-%COMP%]{text-align:end}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   .action-column[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%], [_nghost-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-right:15px;word-break:break-word}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, [_nghost-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{padding:0}[_nghost-%COMP%]   table.loading[_ngcontent-%COMP%]     tbody{background:url(/assets/img/loading.gif) no-repeat fixed 50% rgba(0,0,0,.125)}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}ngb-pagination[_ngcontent-%COMP%]{margin-top:30px}",""]}),A)}],Q=((N=function t(){_classCallCheck(this,t)}).\u0275mod=_.Nb({type:N}),N.\u0275inj=_.Mb({factory:function(t){return new(t||N)},imports:[[l.e.forChild(I)],l.e]}),N);n.d(e,"CountriesModule",(function(){return G}));var F,G=((F=function t(){_classCallCheck(this,t)}).\u0275mod=_.Nb({type:F}),F.\u0275inj=_.Mb({factory:function(t){return new(t||F)},imports:[[a.c,Q,o.q,c.l,r.c,i.v]]}),F)}}]);