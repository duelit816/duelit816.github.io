(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{kXEd:function(e,s,t){"use strict";t.r(s);var r=t("ofXK"),o=t("3Pt+"),n=t("2Did"),i=t("tyNb"),a=t("Znnd"),c=t("IGGr"),d=t("2Vo4"),l=t("LRne"),b=t("JIr8"),u=t("fXoL"),p=t("Olgc"),f=t("qc5V"),g=t("UdTj");function m(e,s){1&e&&(u.Vb(0,"span",11),u.Lc(1,"This field is required."),u.Ub())}function h(e,s){if(1&e&&(u.Vb(0,"span",11),u.Lc(1),u.Ub()),2&e){const e=u.lc(3);u.Cb(1),u.Nc("This field can not be less than ",e.resetPasswordForm.get("password").errors.minlength.requiredLength," characters.")}}function w(e,s){if(1&e&&(u.Vb(0,"span",11),u.Lc(1),u.Ub()),2&e){const e=u.lc(3);u.Cb(1),u.Nc("This field can be at most ",e.resetPasswordForm.get("password").errors.maxlength.requiredLength," characters long.")}}function P(e,s){if(1&e&&(u.Tb(0),u.Jc(1,m,2,0,"span",9),u.Jc(2,h,2,1,"span",9),u.Jc(3,w,2,1,"span",9),u.Sb()),2&e){const e=u.lc(2);u.Cb(1),u.rc("ngIf",e.resetPasswordForm.get("password").errors.required),u.Cb(1),u.rc("ngIf",e.resetPasswordForm.get("password").errors.minlength),u.Cb(1),u.rc("ngIf",e.resetPasswordForm.get("password").errors.maxlength)}}function k(e,s){1&e&&(u.Vb(0,"span",11),u.Lc(1,"This field is required."),u.Ub())}function C(e,s){if(1&e&&(u.Vb(0,"span",11),u.Lc(1),u.Ub()),2&e){const e=u.lc(3);u.Cb(1),u.Nc("This field can not be less than ",e.resetPasswordForm.get("confirm").errors.minlength.requiredLength," characters.")}}function x(e,s){if(1&e&&(u.Vb(0,"span",11),u.Lc(1),u.Ub()),2&e){const e=u.lc(3);u.Cb(1),u.Nc("This field can be at most ",e.resetPasswordForm.get("confirm").errors.maxlength.requiredLength," characters long.")}}function L(e,s){if(1&e&&(u.Tb(0),u.Jc(1,k,2,0,"span",9),u.Jc(2,C,2,1,"span",9),u.Jc(3,x,2,1,"span",9),u.Sb()),2&e){const e=u.lc(2);u.Cb(1),u.rc("ngIf",e.resetPasswordForm.get("confirm").errors.required),u.Cb(1),u.rc("ngIf",e.resetPasswordForm.get("confirm").errors.minlength),u.Cb(1),u.rc("ngIf",e.resetPasswordForm.get("confirm").errors.maxlength)}}function v(e,s){1&e&&u.Qb(0,"span",12)}function y(e,s){1&e&&u.Lc(0,"Send Request")}function F(e,s){1&e&&(u.Vb(0,"span",11),u.Lc(1,"Password are not the same."),u.Ub())}const I=function(){return["/login"]};function V(e,s){if(1&e){const e=u.Wb();u.Tb(0),u.Vb(1,"duelit-panel"),u.Vb(2,"div",2),u.Vb(3,"h2"),u.Lc(4,"Reset your password"),u.Ub(),u.Vb(5,"p"),u.Lc(6,"Enter your new password below"),u.Ub(),u.Qb(7,"input",3),u.Jc(8,P,4,3,"ng-container",4),u.Qb(9,"input",5),u.Jc(10,L,4,3,"ng-container",4),u.Vb(11,"button",6),u.hc("click",(function(){return u.Cc(e),u.lc().resetPassword()})),u.Jc(12,v,1,0,"span",7),u.Jc(13,y,1,0,"ng-template",null,8,u.Kc),u.Ub(),u.Jc(15,F,2,0,"span",9),u.Vb(16,"span",10),u.Lc(17,"Back to Login"),u.Ub(),u.Ub(),u.Ub(),u.Sb()}if(2&e){const e=u.zc(14),s=u.lc();u.Cb(2),u.rc("formGroup",s.resetPasswordForm),u.Cb(5),u.Hb("invalid",!s.isPasswordSame()&&s.isControlsTouched()),u.Cb(1),u.rc("ngIf",s.resetPasswordForm.get("password").invalid&&s.resetPasswordForm.get("password").touched),u.Cb(1),u.Hb("invalid",!s.isPasswordSame()&&s.isControlsTouched()),u.Cb(1),u.rc("ngIf",s.resetPasswordForm.get("confirm").invalid&&s.resetPasswordForm.get("confirm").touched),u.Cb(1),u.rc("disabled",s.resetPasswordForm.invalid||!s.isPasswordSame()||s.isResettingPassword),u.Cb(1),u.rc("ngIf",s.isResettingPassword)("ngIfElse",e),u.Cb(3),u.rc("ngIf",!s.isPasswordSame()&&s.isControlsTouched()),u.Cb(1),u.rc("routerLink",u.uc(12,I))}}function O(e,s){if(1&e&&(u.Tb(0),u.Vb(1,"h3"),u.Lc(2,"Your password was successfully changed."),u.Ub(),u.Vb(3,"h3"),u.Lc(4),u.mc(5,"async"),u.Ub(),u.Vb(6,"h3",15),u.Lc(7,"Go back to Login."),u.Ub(),u.Sb()),2&e){const e=u.lc(2);u.Cb(4),u.Nc("Redirecting you to Login in ",u.nc(5,2,e.timer$),""),u.Cb(2),u.rc("routerLink",u.uc(4,I))}}const J=function(){return["/forgot-password"]};function U(e,s){if(1&e&&(u.Vb(0,"h3"),u.Lc(1,"Your link seems to be invalid, please request a new forgot password."),u.Ub(),u.Vb(2,"h3"),u.Lc(3),u.mc(4,"async"),u.Ub(),u.Vb(5,"h3",15),u.Lc(6,"Go back to Forgot Password."),u.Ub()),2&e){const e=u.lc(2);u.Cb(3),u.Nc("Redirecting you to Forgot password page in ",u.nc(4,2,e.timer$),""),u.Cb(2),u.rc("routerLink",u.uc(4,J))}}function T(e,s){if(1&e&&(u.Vb(0,"div",13),u.Jc(1,O,8,5,"ng-container",0),u.Jc(2,U,7,5,"ng-template",null,14,u.Kc),u.Ub()),2&e){const e=u.zc(3),s=u.lc();u.Cb(1),u.rc("ngIf",s.resetPasswordFinished)("ngIfElse",e)}}let j=(()=>{class e{constructor(e,s,t,r,o){this.router=e,this.route=s,this.toast=t,this.fb=r,this.api=o,this.countdown=10,this.timer$=new d.a(this.countdown),this.isResettingPassword=!1,this.resetPasswordFinished=!1}ngOnInit(){if(this.valid=this.route.snapshot.data.data.valid,this.email=this.route.snapshot.data.data.email,this.token=this.route.snapshot.params.token,!this.valid)return this.toast.error("Your link to reset your password seems to be invalid. Please make a new request"),void Object(c.a)(this.countdown).subscribe(e=>{this.timer$.next(e),e<=0&&(this.timer$.complete(),this.router.navigate(["/forgot-password"]))});this.resetPasswordForm=this.fb.group({password:new o.d("",[o.s.required,o.s.maxLength(24),o.s.minLength(8)]),confirm:new o.d("",[o.s.required,o.s.maxLength(24),o.s.minLength(8)])})}resetPassword(){this.isResettingPassword=!0,this.isPasswordSame()?this.api.post(a.e.ResetPassword,{opts:{addSecurity:!1},body:{token:this.token,password:this.resetPasswordForm.get("confirm").value,email:this.email}}).pipe(Object(b.a)(e=>200===e.status?Object(l.a)("successful"):Object(l.a)(e))).subscribe(e=>{this.isResettingPassword=!1,"successful"===e?(this.toast.success("Reset password successful"),this.resetPasswordFinished=!0,Object(c.a)(this.countdown).subscribe(e=>{this.timer$.next(e),e<=0&&(this.timer$.complete(),this.router.navigate(["/login"]))})):this.toast.error(e.error.text||JSON.stringify(e.error))}):(this.toast.error("Passwords do not match"),this.isResettingPassword=!1)}isPasswordSame(){const e=this.resetPasswordForm.get("password");return this.resetPasswordForm.get("confirm").value===e.value}isControlsTouched(){const e=this.resetPasswordForm.get("password"),s=this.resetPasswordForm.get("confirm");return e.touched&&s.touched}}return e.\u0275fac=function(s){return new(s||e)(u.Pb(i.b),u.Pb(i.a),u.Pb(p.a),u.Pb(o.c),u.Pb(f.a))},e.\u0275cmp=u.Jb({type:e,selectors:[["duelit-reset-password"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["invalid",""],[1,"form-group",3,"formGroup"],["type","password","placeholder","New password","autocomplete","off","formControlName","password",1,"form-control","custom"],[4,"ngIf"],["type","password","placeholder","Repeat new password","autocomplete","off","formControlName","confirm",1,"form-control","custom"],[1,"btn","custom","primary",3,"disabled","click"],["class","loading",4,"ngIf","ngIfElse"],["reset",""],["class","error",4,"ngIf"],[3,"routerLink"],[1,"error"],[1,"loading"],[1,"invalid-msg"],["invalidLink",""],[1,"link",3,"routerLink"]],template:function(e,s){if(1&e&&(u.Jc(0,V,18,13,"ng-container",0),u.Jc(1,T,4,2,"ng-template",null,1,u.Kc)),2&e){const e=u.zc(2);u.rc("ngIf",s.valid&&!s.resetPasswordFinished)("ngIfElse",e)}},directives:[r.n,g.a,o.m,o.g,o.b,o.l,o.f,i.c],pipes:[r.b],styles:[".link[_ngcontent-%COMP%]{color:#4093f7;cursor:pointer}.invalid-msg[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}",".form-group[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;display:-webkit-box;display:flex;justify-items:center;text-align:center}span[_ngcontent-%COMP%]{color:#4093f7;cursor:pointer;padding-top:15px}span.error[_ngcontent-%COMP%]{color:red;cursor:unset;padding-top:unset;align-self:flex-start;padding-bottom:10px}span.loading[_ngcontent-%COMP%]{padding:0;background-size:15px 15px}[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;width:100%;height:100%}[_nghost-%COMP%]   duelit-panel[_ngcontent-%COMP%]{max-width:720px;-webkit-box-flex:1;flex-grow:1}button[_ngcontent-%COMP%]{font-size:15px}"]}),e})();var q=t("lJxs");const R=[{path:"",component:j,resolve:{data:(()=>{class e{constructor(e){this.api=e}resolve(e,s){const t=this.api.buildPath(a.e.ValidateToken,{token:e.paramMap.get("token")});return this.api.get(t).pipe(Object(b.a)(e=>200===e.status?Object(l.a)(e.error.text):Object(l.a)(null)),Object(q.a)(e=>({valid:!!e,email:e})))}}return e.\u0275fac=function(s){return new(s||e)(u.dc(f.a))},e.\u0275prov=u.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}];let M=(()=>{class e{}return e.\u0275mod=u.Nb({type:e}),e.\u0275inj=u.Mb({factory:function(s){return new(s||e)},imports:[[i.e.forChild(R)],i.e]}),e})();t.d(s,"ResetPasswordModule",(function(){return N}));let N=(()=>{class e{}return e.\u0275mod=u.Nb({type:e}),e.\u0275inj=u.Mb({factory:function(s){return new(s||e)},imports:[[r.c,M,n.a,o.q]]}),e})()}}]);