(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{kXEd:function(e,s,t){"use strict";t.r(s);var r=t("ofXK"),o=t("3Pt+"),n=t("2Did"),i=t("tyNb"),c=t("Znnd"),a=t("PqYM"),d=t("lJxs"),l=t("GJmQ");function b(e){return Object(a.a)(0,1e3).pipe(Object(d.a)(s=>e-s),Object(l.a)(e=>e>=0))}var u=t("2Vo4"),p=t("LRne"),f=t("JIr8"),g=t("fXoL"),m=t("Olgc"),h=t("qc5V"),w=t("UdTj");function P(e,s){1&e&&(g.Vb(0,"span",11),g.Lc(1,"This field is required."),g.Ub())}function C(e,s){if(1&e&&(g.Vb(0,"span",11),g.Lc(1),g.Ub()),2&e){const e=g.lc(3);g.Cb(1),g.Nc("This field can not be less than ",e.resetPasswordForm.get("password").errors.minlength.requiredLength," characters.")}}function k(e,s){if(1&e&&(g.Vb(0,"span",11),g.Lc(1),g.Ub()),2&e){const e=g.lc(3);g.Cb(1),g.Nc("This field can be at most ",e.resetPasswordForm.get("password").errors.maxlength.requiredLength," characters long.")}}function x(e,s){if(1&e&&(g.Tb(0),g.Jc(1,P,2,0,"span",9),g.Jc(2,C,2,1,"span",9),g.Jc(3,k,2,1,"span",9),g.Sb()),2&e){const e=g.lc(2);g.Cb(1),g.rc("ngIf",e.resetPasswordForm.get("password").errors.required),g.Cb(1),g.rc("ngIf",e.resetPasswordForm.get("password").errors.minlength),g.Cb(1),g.rc("ngIf",e.resetPasswordForm.get("password").errors.maxlength)}}function L(e,s){1&e&&(g.Vb(0,"span",11),g.Lc(1,"This field is required."),g.Ub())}function v(e,s){if(1&e&&(g.Vb(0,"span",11),g.Lc(1),g.Ub()),2&e){const e=g.lc(3);g.Cb(1),g.Nc("This field can not be less than ",e.resetPasswordForm.get("confirm").errors.minlength.requiredLength," characters.")}}function y(e,s){if(1&e&&(g.Vb(0,"span",11),g.Lc(1),g.Ub()),2&e){const e=g.lc(3);g.Cb(1),g.Nc("This field can be at most ",e.resetPasswordForm.get("confirm").errors.maxlength.requiredLength," characters long.")}}function F(e,s){if(1&e&&(g.Tb(0),g.Jc(1,L,2,0,"span",9),g.Jc(2,v,2,1,"span",9),g.Jc(3,y,2,1,"span",9),g.Sb()),2&e){const e=g.lc(2);g.Cb(1),g.rc("ngIf",e.resetPasswordForm.get("confirm").errors.required),g.Cb(1),g.rc("ngIf",e.resetPasswordForm.get("confirm").errors.minlength),g.Cb(1),g.rc("ngIf",e.resetPasswordForm.get("confirm").errors.maxlength)}}function I(e,s){1&e&&g.Qb(0,"span",12)}function O(e,s){1&e&&g.Lc(0,"Send Request")}function V(e,s){1&e&&(g.Vb(0,"span",11),g.Lc(1,"Password are not the same."),g.Ub())}const J=function(){return["/login"]};function U(e,s){if(1&e){const e=g.Wb();g.Tb(0),g.Vb(1,"duelit-panel"),g.Vb(2,"div",2),g.Vb(3,"h2"),g.Lc(4,"Reset your password"),g.Ub(),g.Vb(5,"p"),g.Lc(6,"Enter your new password below"),g.Ub(),g.Qb(7,"input",3),g.Jc(8,x,4,3,"ng-container",4),g.Qb(9,"input",5),g.Jc(10,F,4,3,"ng-container",4),g.Vb(11,"button",6),g.hc("click",(function(){return g.Cc(e),g.lc().resetPassword()})),g.Jc(12,I,1,0,"span",7),g.Jc(13,O,1,0,"ng-template",null,8,g.Kc),g.Ub(),g.Jc(15,V,2,0,"span",9),g.Vb(16,"span",10),g.Lc(17,"Back to Login"),g.Ub(),g.Ub(),g.Ub(),g.Sb()}if(2&e){const e=g.zc(14),s=g.lc();g.Cb(2),g.rc("formGroup",s.resetPasswordForm),g.Cb(5),g.Hb("invalid",!s.isPasswordSame()&&s.isControlsTouched()),g.Cb(1),g.rc("ngIf",s.resetPasswordForm.get("password").invalid&&s.resetPasswordForm.get("password").touched),g.Cb(1),g.Hb("invalid",!s.isPasswordSame()&&s.isControlsTouched()),g.Cb(1),g.rc("ngIf",s.resetPasswordForm.get("confirm").invalid&&s.resetPasswordForm.get("confirm").touched),g.Cb(1),g.rc("disabled",s.resetPasswordForm.invalid||!s.isPasswordSame()||s.isResettingPassword),g.Cb(1),g.rc("ngIf",s.isResettingPassword)("ngIfElse",e),g.Cb(3),g.rc("ngIf",!s.isPasswordSame()&&s.isControlsTouched()),g.Cb(1),g.rc("routerLink",g.uc(12,J))}}function j(e,s){if(1&e&&(g.Tb(0),g.Vb(1,"h3"),g.Lc(2,"Your password was successfully changed."),g.Ub(),g.Vb(3,"h3"),g.Lc(4),g.mc(5,"async"),g.Ub(),g.Vb(6,"h3",15),g.Lc(7,"Go back to Login."),g.Ub(),g.Sb()),2&e){const e=g.lc(2);g.Cb(4),g.Nc("Redirecting you to Login in ",g.nc(5,2,e.timer$),""),g.Cb(2),g.rc("routerLink",g.uc(4,J))}}const q=function(){return["/forgot-password"]};function T(e,s){if(1&e&&(g.Vb(0,"h3"),g.Lc(1,"Your link seems to be invalid, please request a new forgot password."),g.Ub(),g.Vb(2,"h3"),g.Lc(3),g.mc(4,"async"),g.Ub(),g.Vb(5,"h3",15),g.Lc(6,"Go back to Forgot Password."),g.Ub()),2&e){const e=g.lc(2);g.Cb(3),g.Nc("Redirecting you to Forgot password page in ",g.nc(4,2,e.timer$),""),g.Cb(2),g.rc("routerLink",g.uc(4,q))}}function M(e,s){if(1&e&&(g.Vb(0,"div",13),g.Jc(1,j,8,5,"ng-container",0),g.Jc(2,T,7,5,"ng-template",null,14,g.Kc),g.Ub()),2&e){const e=g.zc(3),s=g.lc();g.Cb(1),g.rc("ngIf",s.resetPasswordFinished)("ngIfElse",e)}}const R=[{path:"",component:(()=>{class e{constructor(e,s,t,r,o){this.router=e,this.route=s,this.toast=t,this.fb=r,this.api=o,this.countdown=10,this.timer$=new u.a(this.countdown),this.isResettingPassword=!1,this.resetPasswordFinished=!1}ngOnInit(){if(this.valid=this.route.snapshot.data.data.valid,this.email=this.route.snapshot.data.data.email,this.token=this.route.snapshot.params.token,!this.valid)return this.toast.error("Your link to reset your password seems to be invalid. Please make a new request"),void b(this.countdown).subscribe(e=>{this.timer$.next(e),e<=0&&(this.timer$.complete(),this.router.navigate(["/forgot-password"]))});this.resetPasswordForm=this.fb.group({password:new o.d("",[o.s.required,o.s.maxLength(24),o.s.minLength(8)]),confirm:new o.d("",[o.s.required,o.s.maxLength(24),o.s.minLength(8)])})}resetPassword(){this.isResettingPassword=!0,this.isPasswordSame()?this.api.post(c.d.ResetPassword,{opts:{addSecurity:!1},body:{token:this.token,password:this.resetPasswordForm.get("confirm").value,email:this.email}}).pipe(Object(f.a)(e=>200===e.status?Object(p.a)("successful"):Object(p.a)(e))).subscribe(e=>{this.isResettingPassword=!1,"successful"===e?(this.toast.success("Reset password successful"),this.resetPasswordFinished=!0,b(this.countdown).subscribe(e=>{this.timer$.next(e),e<=0&&(this.timer$.complete(),this.router.navigate(["/login"]))})):this.toast.error(e.error.text||JSON.stringify(e.error))}):(this.toast.error("Passwords do not match"),this.isResettingPassword=!1)}isPasswordSame(){const e=this.resetPasswordForm.get("password");return this.resetPasswordForm.get("confirm").value===e.value}isControlsTouched(){const e=this.resetPasswordForm.get("password"),s=this.resetPasswordForm.get("confirm");return e.touched&&s.touched}}return e.\u0275fac=function(s){return new(s||e)(g.Pb(i.b),g.Pb(i.a),g.Pb(m.a),g.Pb(o.c),g.Pb(h.a))},e.\u0275cmp=g.Jb({type:e,selectors:[["duelit-reset-password"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["invalid",""],[1,"form-group",3,"formGroup"],["type","password","placeholder","New password","autocomplete","off","formControlName","password",1,"form-control","custom"],[4,"ngIf"],["type","password","placeholder","Repeat new password","autocomplete","off","formControlName","confirm",1,"form-control","custom"],[1,"btn","custom","primary",3,"disabled","click"],["class","loading",4,"ngIf","ngIfElse"],["reset",""],["class","error",4,"ngIf"],[3,"routerLink"],[1,"error"],[1,"loading"],[1,"invalid-msg"],["invalidLink",""],[1,"link",3,"routerLink"]],template:function(e,s){if(1&e&&(g.Jc(0,U,18,13,"ng-container",0),g.Jc(1,M,4,2,"ng-template",null,1,g.Kc)),2&e){const e=g.zc(2);g.rc("ngIf",s.valid&&!s.resetPasswordFinished)("ngIfElse",e)}},directives:[r.m,w.a,o.m,o.g,o.b,o.l,o.f,i.c],pipes:[r.b],styles:[".link[_ngcontent-%COMP%]{color:#4093f7;cursor:pointer}.invalid-msg[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}",".form-group[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;display:-webkit-box;display:flex;justify-items:center;text-align:center}span[_ngcontent-%COMP%]{color:#4093f7;cursor:pointer;padding-top:15px}span.error[_ngcontent-%COMP%]{color:red;cursor:unset;padding-top:unset;align-self:flex-start;padding-bottom:10px}span.loading[_ngcontent-%COMP%]{padding:0;background-size:15px 15px}[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;width:100%;height:100%}[_nghost-%COMP%]   duelit-panel[_ngcontent-%COMP%]{max-width:720px;-webkit-box-flex:1;flex-grow:1}button[_ngcontent-%COMP%]{font-size:15px}"]}),e})(),resolve:{data:(()=>{class e{constructor(e){this.api=e}resolve(e,s){const t=this.api.buildPath(c.d.ValidateToken,[e.paramMap.get("token")]);return this.api.get(t).pipe(Object(f.a)(e=>200===e.status?Object(p.a)(e.error.text):Object(p.a)(null)),Object(d.a)(e=>({valid:!!e,email:e})))}}return e.\u0275fac=function(s){return new(s||e)(g.dc(h.a))},e.\u0275prov=g.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}];let N=(()=>{class e{}return e.\u0275mod=g.Nb({type:e}),e.\u0275inj=g.Mb({factory:function(s){return new(s||e)},imports:[[i.e.forChild(R)],i.e]}),e})();t.d(s,"ResetPasswordModule",(function(){return S}));let S=(()=>{class e{}return e.\u0275mod=g.Nb({type:e}),e.\u0275inj=g.Mb({factory:function(s){return new(s||e)},imports:[[r.c,N,n.a,o.q]]}),e})()}}]);