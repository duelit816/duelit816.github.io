(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{R5Mc:function(t,e,i){"use strict";i.r(e);var n=i("ofXK"),o=i("3Pt+"),s=i("+0xr"),r=i("6NWb"),c=i("1kSV"),a=i("2Did"),b=i("tyNb"),l=i("twK/"),d=i("Znnd"),u=i("SMdK"),m=i("wd/R"),p=i("5yfJ"),f=i("LRne"),h=i("vkgz"),g=i("JIr8"),C=i("lJxs"),U=i("fXoL"),y=i("qc5V"),v=i("Olgc");function V(t,e){if(1&t&&(U.Vb(0,"option",41),U.Lc(1),U.Ub()),2&t){const t=e.$implicit;U.rc("value",t),U.Cb(1),U.Mc(t)}}function D(t,e){if(1&t&&(U.Vb(0,"select",39),U.Jc(1,V,2,2,"option",40),U.Ub()),2&t){const t=e.$implicit;U.Cb(1),U.rc("ngForOf",t)}}function I(t,e){if(1&t&&(U.Vb(0,"option",41),U.Lc(1),U.Ub()),2&t){const t=e.$implicit;U.rc("value",t),U.Cb(1),U.Mc(t)}}function w(t,e){if(1&t&&(U.Vb(0,"select",43),U.Jc(1,I,2,2,"option",40),U.Ub()),2&t){const t=e.$implicit;U.Cb(1),U.rc("ngForOf",t)}}function L(t,e){if(1&t&&(U.Vb(0,"div",15),U.Vb(1,"label"),U.Lc(2,"State / Province"),U.Ub(),U.Jc(3,w,2,1,"select",42),U.mc(4,"async"),U.Ub()),2&t){U.lc();const t=U.zc(21),e=U.lc();U.Cb(3),U.rc("ngIf",U.nc(4,2,e.states$))("ngIfElse",t)}}function P(t,e){1&t&&U.Qb(0,"input",44)}function O(t,e){1&t&&(U.Vb(0,"div",11),U.Vb(1,"label"),U.Lc(2,"Ban Description"),U.Ub(),U.Qb(3,"input",45),U.Ub())}function N(t,e){if(1&t){const t=U.Wb();U.Vb(0,"div",10),U.Vb(1,"div",11),U.Vb(2,"label"),U.Lc(3,"First Name"),U.Ub(),U.Qb(4,"input",12),U.Ub(),U.Vb(5,"div",11),U.Vb(6,"label"),U.Lc(7,"Last Name"),U.Ub(),U.Qb(8,"input",13),U.Ub(),U.Vb(9,"div",11),U.Vb(10,"label"),U.Lc(11,"Email"),U.Ub(),U.Qb(12,"input",14),U.Ub(),U.Vb(13,"div",0),U.Vb(14,"div",15),U.Vb(15,"label"),U.Lc(16,"Country"),U.Ub(),U.Jc(17,D,2,1,"select",16),U.mc(18,"async"),U.Ub(),U.Jc(19,L,5,4,"div",17),U.Jc(20,P,1,0,"ng-template",null,18,U.Kc),U.Ub(),U.Vb(22,"div",0),U.Vb(23,"div",19),U.Vb(24,"label"),U.Lc(25,"Birthday"),U.Ub(),U.Vb(26,"div",20),U.Qb(27,"input",21,22),U.Vb(29,"div",23),U.Vb(30,"button",24),U.hc("click",(function(){return U.Cc(t),U.zc(28).toggle()})),U.Qb(31,"fa-icon",25),U.Ub(),U.Ub(),U.Ub(),U.Ub(),U.Vb(32,"div",19),U.Vb(33,"label"),U.Lc(34,"Status"),U.Ub(),U.Vb(35,"select",26),U.Vb(36,"option",27),U.Lc(37,"Active"),U.Ub(),U.Vb(38,"option",28),U.Lc(39,"Inactive"),U.Ub(),U.Vb(40,"option",29),U.Lc(41,"Pending"),U.Ub(),U.Vb(42,"option",30),U.Lc(43,"Deactivated"),U.Ub(),U.Vb(44,"option",31),U.Lc(45,"Banned"),U.Ub(),U.Ub(),U.Ub(),U.Ub(),U.Jc(46,O,4,0,"div",32),U.Vb(47,"div",0),U.Vb(48,"div",15),U.Vb(49,"label"),U.Lc(50,"Role"),U.Ub(),U.Vb(51,"select",33),U.Vb(52,"option",34),U.Lc(53,"Admin"),U.Ub(),U.Vb(54,"option",35),U.Lc(55,"Developer"),U.Ub(),U.Vb(56,"option",36),U.Lc(57,"Player"),U.Ub(),U.Ub(),U.Ub(),U.Ub(),U.Vb(58,"button",37),U.hc("click",(function(){return U.Cc(t),U.lc().updateUser()})),U.Lc(59,"Save"),U.Ub(),U.Vb(60,"button",38),U.hc("click",(function(){return U.Cc(t),U.lc().deleteUser()})),U.Lc(61,"Delete"),U.Ub(),U.Ub()}if(2&t){const t=U.zc(21),e=U.lc();U.rc("formGroup",e.userDetailsForm),U.Cb(17),U.rc("ngIf",U.nc(18,8,e.countries$))("ngIfElse",t),U.Cb(2),U.rc("ngIf","United States"===e.userDetailsForm.get("country").value),U.Cb(12),U.rc("icon",e.calendarIcon),U.Cb(15),U.rc("ngIf","banned"===e.userDetailsForm.get("status").value),U.Cb(12),U.rc("disabled",e.userDetailsForm.invalid||e.isSavingUser||e.isDeleting),U.Cb(2),U.rc("disabled",e.isDeleting)}}function S(t,e){if(1&t){const t=U.Wb();U.Vb(0,"div",46),U.Vb(1,"label"),U.Lc(2),U.Ub(),U.Vb(3,"div",47),U.Qb(4,"input",48),U.Vb(5,"button",49),U.hc("click",(function(){return U.Cc(t),U.lc().updateCredits()})),U.Lc(6,"Update"),U.Ub(),U.Ub(),U.Ub()}if(2&t){const t=e.$implicit,i=U.lc();U.Cb(2),U.Nc("Credits - ",t.virtualAmount,""),U.Cb(2),U.rc("formControl",i.userCreditsControl)("disabled",i.isCreditsUpdating),U.Cb(1),U.rc("disabled",i.isCreditsUpdating||i.isDeleting)}}function J(t,e){1&t&&(U.Vb(0,"th",63),U.Lc(1," ID "),U.Ub())}function M(t,e){if(1&t&&(U.Vb(0,"td",64),U.Lc(1),U.Ub()),2&t){const t=e.$implicit;U.Cb(1),U.Nc(" ",t.transactionId||"-"," ")}}function k(t,e){1&t&&(U.Vb(0,"th",63),U.Lc(1," Date "),U.Ub())}function _(t,e){if(1&t&&(U.Vb(0,"td",64),U.Lc(1),U.Ub()),2&t){const t=e.$implicit;U.Cb(1),U.Nc(" ",t.createdAt," ")}}function x(t,e){1&t&&(U.Vb(0,"th",63),U.Lc(1," Type "),U.Ub())}function $(t,e){if(1&t&&(U.Vb(0,"td",64),U.Lc(1),U.Ub()),2&t){const t=e.$implicit;U.Cb(1),U.Nc(" ",t.type," ")}}function j(t,e){1&t&&(U.Vb(0,"th",63),U.Lc(1," Game ID "),U.Ub())}function E(t,e){if(1&t&&(U.Vb(0,"td",64),U.Lc(1),U.Ub()),2&t){const t=e.$implicit;U.Cb(1),U.Nc(" ",t.gameId||"-"," ")}}function T(t,e){1&t&&(U.Vb(0,"th",63),U.Lc(1," Game Name "),U.Ub())}function F(t,e){if(1&t&&(U.Vb(0,"td",64),U.Lc(1),U.Ub()),2&t){const t=e.$implicit;U.Cb(1),U.Nc(" ",t.gameName||"-"," ")}}function H(t,e){1&t&&(U.Vb(0,"th",63),U.Lc(1," Product "),U.Ub())}function Q(t,e){if(1&t&&(U.Vb(0,"td",64),U.Lc(1),U.Ub()),2&t){const t=e.$implicit;U.Cb(1),U.Nc(" ",t.productId," ")}}function R(t,e){1&t&&(U.Vb(0,"th",63),U.Lc(1," Amount "),U.Ub())}function B(t,e){if(1&t&&(U.Vb(0,"td",64),U.Lc(1),U.Ub()),2&t){const t=e.$implicit;U.Cb(1),U.Nc(" ",t.amount," ")}}function Y(t,e){1&t&&U.Qb(0,"tr",65)}function A(t,e){1&t&&U.Qb(0,"tr",66)}const G=function(){return["transactionId","createdAt","type","gameId","gameName","productId","amount"]};function z(t,e){if(1&t&&(U.Vb(0,"div",50),U.Vb(1,"table",51),U.Tb(2,52),U.Jc(3,J,2,0,"th",53),U.Jc(4,M,2,1,"td",54),U.Sb(),U.Tb(5,55),U.Jc(6,k,2,0,"th",53),U.Jc(7,_,2,1,"td",54),U.Sb(),U.Tb(8,56),U.Jc(9,x,2,0,"th",53),U.Jc(10,$,2,1,"td",54),U.Sb(),U.Tb(11,57),U.Jc(12,j,2,0,"th",53),U.Jc(13,E,2,1,"td",54),U.Sb(),U.Tb(14,58),U.Jc(15,T,2,0,"th",53),U.Jc(16,F,2,1,"td",54),U.Sb(),U.Tb(17,59),U.Jc(18,H,2,0,"th",53),U.Jc(19,Q,2,1,"td",54),U.Sb(),U.Tb(20,60),U.Jc(21,R,2,0,"th",53),U.Jc(22,B,2,1,"td",54),U.Sb(),U.Jc(23,Y,1,0,"tr",61),U.Jc(24,A,1,0,"tr",62),U.Ub(),U.Ub()),2&t){const t=e.$implicit;U.Cb(1),U.rc("dataSource",t),U.Cb(22),U.rc("matHeaderRowDef",U.uc(4,G))("matHeaderRowDefSticky",!0),U.Cb(1),U.rc("matRowDefColumns",U.uc(5,G))}}function K(t,e){1&t&&(U.Vb(0,"div",67),U.Qb(1,"span",68),U.Ub())}const q=[{path:"",component:(()=>{class t{constructor(t,e,i,n,o,s){this.route=t,this.api=e,this.fb=i,this.calendar=n,this.toast=o,this.router=s,this.calendarIcon=l.a,this.isSavingUser=!1,this.isCreditsUpdating=!1,this.isDeleting=!1}ngOnInit(){const t=this.route.snapshot.params.userId,e=this.api.buildPath(d.d.GetUserById,[t]);this.user$=this.api.get(e).pipe(Object(h.a)(t=>{const e=m(t.birthDate).toObject(),i=this.calendar.getToday();i.day=e.date,i.month=e.months+1,i.year=e.years,this.userDetailsForm=this.fb.group({firstName:new o.d(t.firstName),lastName:new o.d(t.lastName),email:new o.d(t.email,[u.a,o.s.required]),country:new o.d(t.country),state:new o.d(t.state),birthDate:new o.d(i),status:new o.d(t.status),role:new o.d(t.role),banDescription:new o.d(t.banDescription)})}),Object(g.a)(t=>(this.toast.error(t.error||t.statusText||t.message),this.router.navigate(["/admin/users"]),p.a)));const i=this.api.buildPath(d.b.CreditsByUser,[t]);this.userCredits$=this.api.get(i),this.getUserCreditHistory(),this.countries$=this.api.get(d.e.Countries).pipe(Object(C.a)((t=[])=>t.map(t=>t.name))),this.states$=this.api.get(d.e.States).pipe(Object(C.a)((t=[])=>t.map(t=>t.name))),this.userCreditsControl=new o.d(0)}getUserCreditHistory(){const t=this.api.buildPath(d.b.CreditsHistoryByUser,[this.route.snapshot.params.userId]);this.userCreditsHistory$=this.api.get(t)}updateUser(){const t=this.userDetailsForm.value,e=m().year(t.birthDate.year).month(t.birthDate.month-1).date(t.birthDate.day).format("YYYY-MM-DD"),i={first_name:t.firstName,last_name:t.lastName,email:t.email,country:t.country,state:t.state,role:t.role,status:t.status,banDescription:"banned"===t.status?t.banDescription:"",birth_date:e};this.isSavingUser=!0,this.api.post(d.d.UpdateUser,{body:i,opts:{addSecurity:!1}}).pipe(Object(h.a)(()=>this.isSavingUser=!1),Object(g.a)(t=>(this.isSavingUser=!1,this.toast.error(t.error||t.statusText||t.message),p.a))).subscribe(()=>{this.toast.success("Successfully updated user details.")})}updateCredits(){this.isCreditsUpdating=!0;const t=this.route.snapshot.params.userId,e=this.userCreditsControl.value;this.userCreditsControl.disable();const i=this.api.buildPath(d.b.CreditsByUser,[t]);this.api.post(i,{body:{virtual_amount:e},opts:{addSecurity:!1}}).pipe(Object(h.a)(()=>{this.isCreditsUpdating=!1,this.userCreditsControl.enable(),this.userCreditsControl.setValue(0)}),Object(g.a)(t=>(this.isCreditsUpdating=!1,this.userCreditsControl.enable(),this.toast.error(t.error||t.statusText||t.message),p.a))).subscribe(t=>{this.userCredits$=Object(f.a)(t),this.getUserCreditHistory(),this.toast.success("Successfully updated user credits.")})}openUserStats(){this.router.navigate(["/admin/user",this.route.snapshot.params.userId,"stats"])}deleteUser(){const t=this.route.snapshot.params.userId;this.isDeleting=!0;const e=this.api.buildPath(d.d.GetUserById,[t]);this.api.delete(e).pipe(Object(g.a)(t=>200===t.status?Object(f.a)({}):(this.toast.error(t.error||t.statusText||t.message),this.isDeleting=!1,p.a))).subscribe(()=>{this.toast.success(`Successfully deleted user ${this.userDetailsForm.value.email}`),this.router.navigate(["/admin/users"])})}}return t.\u0275fac=function(e){return new(e||t)(U.Pb(b.a),U.Pb(y.a),U.Pb(o.c),U.Pb(c.a),U.Pb(v.a),U.Pb(b.b))},t.\u0275cmp=U.Jb({type:t,selectors:[["duelit-user-edit"]],decls:23,vars:13,consts:[[1,"row"],[1,"col-md-6"],[1,"card"],[1,"card-header","d-flex"],[1,"btn","btn-primary","custom",3,"disabled","click"],["class","card-body",3,"formGroup",4,"ngIf","ngIfElse"],[1,"card-header"],["class","card-body form-group",4,"ngIf","ngIfElse"],["class","card-body credit-history",4,"ngIf","ngIfElse"],["loading",""],[1,"card-body",3,"formGroup"],[1,"form-group"],["type","text","formControlName","firstName",1,"form-control"],["type","text","formControlName","lastName",1,"form-control"],["type","email","formControlName","email","readonly","","disabled","",1,"form-control"],[1,"col-6","form-group"],["class","form-control","formControlName","country","aria-placeholder","Select Country",4,"ngIf","ngIfElse"],["class","col-6 form-group",4,"ngIf"],["loadingSelect",""],[1,"col","form-group"],[1,"input-group"],["placeholder","YYYY-MM-DD","formControlName","birthDate","ngbDatepicker","",1,"form-control"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","calendar",3,"click"],[3,"icon"],["formControlName","status",1,"form-control"],["value","active"],["value","inactive"],["value","pending"],["value","deactivated"],["value","banned"],["class","form-group",4,"ngIf"],["formControlName","role",1,"form-control"],["value","admin"],["value","developer"],["value","player"],[1,"btn","btn-primary","custom","col",3,"disabled","click"],[1,"btn","btn-danger","custom","col",3,"disabled","click"],["formControlName","country","aria-placeholder","Select Country",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","form-control","formControlName","states","aria-placeholder","Select States / Province",4,"ngIf","ngIfElse"],["formControlName","states","aria-placeholder","Select States / Province",1,"form-control"],["readonly","","disabled","","type","text","placeholder","Loading...",1,"form-control-plaintext"],["type","text","formControlName","banDescription",1,"form-control"],[1,"card-body","form-group"],[1,"credits","d-flex"],["type","number","min","0",1,"form-control","col-6",3,"formControl","disabled"],[1,"btn","btn-primary","custom","col-5",3,"disabled","click"],[1,"card-body","credit-history"],["mat-table","",3,"dataSource"],["matColumnDef","transactionId"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","createdAt"],["matColumnDef","type"],["matColumnDef","gameId"],["matColumnDef","gameName"],["matColumnDef","productId"],["matColumnDef","amount"],["mat-header-row","","class","named-columns",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"named-columns"],["mat-row",""],[1,"loading-container","d-flex"],[1,"loading"]],template:function(t,e){if(1&t&&(U.Vb(0,"div",0),U.Vb(1,"div",1),U.Vb(2,"div",2),U.Vb(3,"div",3),U.Vb(4,"span"),U.Lc(5,"User Details"),U.Ub(),U.Vb(6,"button",4),U.hc("click",(function(){return e.openUserStats()})),U.Lc(7,"View user stats"),U.Ub(),U.Ub(),U.Jc(8,N,62,10,"div",5),U.mc(9,"async"),U.Ub(),U.Ub(),U.Vb(10,"div",1),U.Vb(11,"div",2),U.Vb(12,"div",6),U.Lc(13," Edit Credits "),U.Ub(),U.Jc(14,S,7,4,"div",7),U.mc(15,"async"),U.Ub(),U.Vb(16,"div",2),U.Vb(17,"div",6),U.Lc(18," Credits History "),U.Ub(),U.Jc(19,z,25,6,"div",8),U.mc(20,"async"),U.Ub(),U.Ub(),U.Ub(),U.Jc(21,K,2,0,"ng-template",null,9,U.Kc)),2&t){const t=U.zc(22);U.Cb(6),U.rc("disabled",e.isDeleting),U.Cb(2),U.rc("ngIf",U.nc(9,7,e.user$))("ngIfElse",t),U.Cb(6),U.rc("ngIf",U.nc(15,9,e.userCredits$))("ngIfElse",t),U.Cb(5),U.rc("ngIf",U.nc(20,11,e.userCreditsHistory$))("ngIfElse",t)}},directives:[n.m,o.m,o.g,o.b,o.l,o.f,c.k,r.a,o.r,o.o,o.t,n.l,o.p,o.e,s.j,s.c,s.e,s.b,s.g,s.i,s.d,s.a,s.f,s.h],pipes:[n.b],styles:[".card-header[_ngcontent-%COMP%]{-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}.card-header[_ngcontent-%COMP%]   button.custom[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]     span.loading{height:120px;width:120px;background-size:120px 120px}[_nghost-%COMP%]   .loading-container[_ngcontent-%COMP%]{min-width:120px;-webkit-box-pack:center;justify-content:center}[_nghost-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:2rem}[_nghost-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#fff;font-weight:700}[_nghost-%COMP%]   .credits[_ngcontent-%COMP%]{-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}[_nghost-%COMP%]   .credit-history[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .credit-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-family:Nexa;width:100%}[_nghost-%COMP%]   .credit-history[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding-right:1em}"]}),t})()}];let W=(()=>{class t{}return t.\u0275mod=U.Nb({type:t}),t.\u0275inj=U.Mb({factory:function(e){return new(e||t)},imports:[[b.e.forChild(q)],b.e]}),t})();i.d(e,"UserEditModule",(function(){return X}));let X=(()=>{class t{}return t.\u0275mod=U.Nb({type:t}),t.\u0275inj=U.Mb({factory:function(e){return new(e||t)},imports:[[n.c,W,a.a,o.q,c.e,r.b,s.l]]}),t})()}}]);