function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"86gd":function(e,t,n){"use strict";n.r(t);var r=n("ofXK"),i=n("tyNb"),o=n("SLWe"),c=n("Znnd"),s=n("2Vo4"),a=n("5yfJ"),u=n("PqYM"),l=n("JIr8"),f=n("5+tZ"),d=n("lJxs"),b=n("GJmQ"),p=n("fXoL"),h=n("Olgc"),g=n("qc5V");function m(e,t){1&e&&(p.Tb(0),p.Vb(1,"h3"),p.Lc(2,"Processing"),p.Ub(),p.Vb(3,"div",2),p.Qb(4,"span",3),p.Ub(),p.Sb())}function y(e,t){1&e&&(p.Vb(0,"h3"),p.Lc(1,"Cash out request saved successfully, please check your email."),p.Ub())}function w(e,t){if(1&e&&(p.Jc(0,y,2,0,"h3",4),p.Vb(1,"h3"),p.Lc(2),p.mc(3,"async"),p.Ub()),2&e){var n=p.lc();p.rc("ngIf",n.isSuccessful),p.Cb(2),p.Nc("Redirecting you to redeem page in ",p.nc(3,2,n.timer$),"")}}var C,P,v=[{path:"",component:(C=function(){function e(t,n,r,i){_classCallCheck(this,e),this.route=t,this.router=n,this.toast=r,this.api=i,this.countdown=5,this.timer$=new s.a(this.countdown),this.isProcessing=!0,this.isSuccessful=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.queryParams.subscribe((function(t){if(t.error)return e.redirectToRedeem(),void e.toast.error(t.error_description||t.error||"Error");e.api.get(c.d.GetPaypalUserInfo,{query:t}).pipe(Object(l.a)((function(t){return e.toast.error("Error on getting Paypal information."),e.redirectToRedeem(),a.a})),Object(f.a)((function(t){var n=localStorage.getItem(o.a);return n?e.api.post(c.b.CashoutRequest,{body:{email:t.email,amount:n},opts:{addSecurity:!1}}):(e.toast.error("Couldn't fetch amount requested."),e.redirectToRedeem(),a.a)})),Object(l.a)((function(t){return e.toast.error("".concat(t.data||t.error||JSON.stringify(t))),e.redirectToRedeem(),a.a}))).subscribe((function(){e.isSuccessful=!0,e.toast.show({textOrTpl:"Cash out request saved successfully, please check your email.",class:"success",dismissible:!0,delay:3e4}),localStorage.removeItem(o.a),e.redirectToRedeem()}))}))}},{key:"redirectToRedeem",value:function(){var e=this;this.isProcessing=!1,Object(u.a)(0,1e3).pipe(Object(d.a)((function(t){return e.countdown-t})),Object(b.a)((function(e){return e>=0}))).subscribe((function(t){e.timer$.next(t),t<=0&&(e.timer$.complete(),e.router.navigate(["/redeem"]))}))}}]),e}(),C.\u0275fac=function(e){return new(e||C)(p.Pb(i.a),p.Pb(i.b),p.Pb(h.a),p.Pb(g.a))},C.\u0275cmp=p.Jb({type:C,selectors:[["duelit-paypal"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["timer",""],[1,"spinner-container"],[1,"loading"],[4,"ngIf"]],template:function(e,t){if(1&e&&(p.Jc(0,m,5,0,"ng-container",0),p.Jc(1,w,4,4,"ng-template",null,1,p.Kc)),2&e){var n=p.zc(2);p.rc("ngIf",t.isProcessing)("ngIfElse",n)}},directives:[r.m],pipes:[r.b],styles:["[_nghost-%COMP%]{-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}[_nghost-%COMP%], [_nghost-%COMP%]   div.spinner-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}[_nghost-%COMP%]   div.spinner-container[_ngcontent-%COMP%]{max-width:150px;max-height:150px;width:100%}[_nghost-%COMP%]   div.spinner-container[_ngcontent-%COMP%]   span.loading[_ngcontent-%COMP%]{-webkit-box-flex:1;flex-grow:1;background-size:auto 100%;height:100%}"]}),C)}],O=((P=function e(){_classCallCheck(this,e)}).\u0275mod=p.Nb({type:P}),P.\u0275inj=p.Mb({factory:function(e){return new(e||P)},imports:[[i.e.forChild(v)],i.e]}),P);n.d(t,"PaypalModule",(function(){return _}));var k,_=((k=function e(){_classCallCheck(this,e)}).\u0275mod=p.Nb({type:k}),k.\u0275inj=p.Mb({factory:function(e){return new(e||k)},imports:[[r.c,O]]}),k)}}]);