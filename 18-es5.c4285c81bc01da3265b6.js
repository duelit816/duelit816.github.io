function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{ATrY:function(e,r,t){"use strict";t.r(r);var n=t("ofXK"),i=t("3Pt+"),c=t("6NWb"),o=t("1kSV"),a=t("tyNb"),s=t("twK/"),l=t("wHSu"),b=t("Znnd"),u=t("YGOX"),f=t("IGGr"),d=t("SMdK"),g=t("wd/R"),m=t("2Vo4"),p=t("5yfJ"),h=t("lJxs"),C=t("JIr8"),v=t("fXoL"),U=t("qc5V"),D=t("Olgc");function w(e,r){if(1&e){var t=v.Wb();v.Tb(0),v.Vb(1,"div",4),v.Qb(2,"fa-icon",5),v.Vb(3,"label",6),v.Lc(4,"Failed to create user!"),v.Ub(),v.Vb(5,"label",6),v.Lc(6),v.Ub(),v.Vb(7,"button",7),v.hc("click",(function(){return v.Cc(t),v.lc(2).goBack()})),v.Lc(8,"Go back to user details"),v.Ub(),v.Vb(9,"button",7),v.hc("click",(function(){return v.Cc(t),v.lc(2).createUser()})),v.Lc(10,"Retry"),v.Ub(),v.Ub(),v.Sb()}if(2&e){var n=v.lc(2);v.Cb(2),v.rc("icon",n.failedIcon),v.Cb(4),v.Nc("Error: ",n.createError,"")}}function V(e,r){if(1&e){var t=v.Wb();v.Tb(0),v.Vb(1,"div",4),v.Qb(2,"fa-icon",8),v.Vb(3,"label",9),v.Lc(4,"Successfully Created User!"),v.Ub(),v.Vb(5,"label",9),v.Lc(6),v.mc(7,"async"),v.Ub(),v.Vb(8,"button",7),v.hc("click",(function(){return v.Cc(t),v.lc(2).navigateToUserProfile()})),v.Lc(9,"Redirect now"),v.Ub(),v.Ub(),v.Sb()}if(2&e){var n=v.lc(2);v.Cb(2),v.rc("icon",n.successIcon),v.Cb(4),v.Nc("Redirecting to user profile in ",v.nc(7,2,n.timer$),"")}}function y(e,r){if(1&e&&(v.Tb(0),v.Jc(1,w,11,2,"ng-container",3),v.Jc(2,V,10,4,"ng-container",3),v.Sb()),2&e){var t=v.lc();v.Cb(1),v.rc("ngIf",t.createError),v.Cb(1),v.rc("ngIf",t.isCreatingDone)}}function I(e,r){1&e&&(v.Vb(0,"span",35),v.Lc(1,"This field is required."),v.Ub())}function P(e,r){if(1&e&&(v.Tb(0),v.Jc(1,I,2,0,"span",34),v.Sb()),2&e){var t=v.lc(2);v.Cb(1),v.rc("ngIf",t.userDetailsForm.get("firstName").errors.required)}}function F(e,r){1&e&&(v.Vb(0,"span",35),v.Lc(1,"This field is required."),v.Ub())}function L(e,r){if(1&e&&(v.Tb(0),v.Jc(1,F,2,0,"span",34),v.Sb()),2&e){var t=v.lc(2);v.Cb(1),v.rc("ngIf",t.userDetailsForm.get("lastName").errors.required)}}function J(e,r){1&e&&(v.Vb(0,"span",35),v.Lc(1,"This field is required."),v.Ub())}function M(e,r){1&e&&(v.Vb(0,"span",35),v.Lc(1,"This field must be a valid email address."),v.Ub())}function O(e,r){if(1&e&&(v.Tb(0),v.Jc(1,J,2,0,"span",34),v.Jc(2,M,2,0,"span",34),v.Sb()),2&e){var t=v.lc(2);v.Cb(1),v.rc("ngIf",t.userDetailsForm.get("email").errors.required),v.Cb(1),v.rc("ngIf",t.userDetailsForm.get("email").errors.email)}}function _(e,r){if(1&e&&(v.Vb(0,"option",38),v.Lc(1),v.Ub()),2&e){var t=r.$implicit;v.rc("value",t),v.Cb(1),v.Mc(t)}}function k(e,r){if(1&e&&(v.Vb(0,"select",36),v.Jc(1,_,2,2,"option",37),v.Ub()),2&e){var t=r.$implicit;v.Cb(1),v.rc("ngForOf",t)}}function N(e,r){1&e&&(v.Vb(0,"span",35),v.Lc(1,"This field is required."),v.Ub())}function x(e,r){if(1&e&&(v.Tb(0),v.Jc(1,N,2,0,"span",34),v.Sb()),2&e){var t=v.lc(2);v.Cb(1),v.rc("ngIf",t.userDetailsForm.get("country").errors.required)}}function T(e,r){if(1&e&&(v.Vb(0,"option",38),v.Lc(1),v.Ub()),2&e){var t=r.$implicit;v.rc("value",t),v.Cb(1),v.Mc(t)}}function q(e,r){if(1&e&&(v.Vb(0,"select",40),v.Jc(1,T,2,2,"option",37),v.Ub()),2&e){var t=r.$implicit;v.Cb(1),v.rc("ngForOf",t)}}function S(e,r){if(1&e&&(v.Vb(0,"div",18),v.Vb(1,"label"),v.Lc(2,"State / Province"),v.Ub(),v.Jc(3,q,2,1,"select",39),v.mc(4,"async"),v.Ub()),2&e){v.lc();var t=v.zc(29),n=v.lc();v.Cb(3),v.rc("ngIf",v.nc(4,2,n.states$))("ngIfElse",t)}}function E(e,r){1&e&&v.Qb(0,"input",41)}function $(e,r){1&e&&(v.Vb(0,"span",35),v.Lc(1,"This field is required."),v.Ub())}function Q(e,r){if(1&e&&(v.Tb(0),v.Jc(1,$,2,0,"span",34),v.Sb()),2&e){var t=v.lc(2);v.Cb(1),v.rc("ngIf",t.userDetailsForm.get("birthDate").errors.required)}}function j(e,r){1&e&&(v.Vb(0,"span",35),v.Lc(1,"This field is required."),v.Ub())}function Y(e,r){if(1&e&&(v.Vb(0,"span",35),v.Lc(1),v.Ub()),2&e){var t=v.lc(3);v.Cb(1),v.Nc("This field can not be less than ",t.userDetailsForm.get("password").errors.minlength.requiredLength," characters.")}}function z(e,r){if(1&e&&(v.Vb(0,"span",35),v.Lc(1),v.Ub()),2&e){var t=v.lc(3);v.Cb(1),v.Nc("This field can be at most ",t.userDetailsForm.get("password").errors.maxlength.requiredLength," characters long.")}}function G(e,r){if(1&e&&(v.Tb(0),v.Jc(1,j,2,0,"span",34),v.Jc(2,Y,2,1,"span",34),v.Jc(3,z,2,1,"span",34),v.Sb()),2&e){var t=v.lc(2);v.Cb(1),v.rc("ngIf",t.userDetailsForm.get("password").errors.required),v.Cb(1),v.rc("ngIf",t.userDetailsForm.get("password").errors.minlength),v.Cb(1),v.rc("ngIf",t.userDetailsForm.get("password").errors.maxlength)}}function K(e,r){1&e&&(v.Vb(0,"span",35),v.Lc(1,"This field is required."),v.Ub())}function B(e,r){if(1&e&&(v.Vb(0,"span",35),v.Lc(1),v.Ub()),2&e){var t=v.lc(3);v.Cb(1),v.Nc("This field can not be less than ",t.userDetailsForm.get("confirm").errors.minlength.requiredLength," characters.")}}function R(e,r){if(1&e&&(v.Vb(0,"span",35),v.Lc(1),v.Ub()),2&e){var t=v.lc(3);v.Cb(1),v.Nc("This field can be at most ",t.userDetailsForm.get("confirm").errors.maxlength.requiredLength," characters long.")}}function W(e,r){1&e&&(v.Vb(0,"span",35),v.Lc(1,"Passwords do not match."),v.Ub())}function X(e,r){if(1&e&&(v.Tb(0),v.Jc(1,K,2,0,"span",34),v.Jc(2,B,2,1,"span",34),v.Jc(3,R,2,1,"span",34),v.Jc(4,W,2,0,"span",34),v.Sb()),2&e){var t=v.lc(2);v.Cb(1),v.rc("ngIf",t.userDetailsForm.get("confirm").errors.required),v.Cb(1),v.rc("ngIf",t.userDetailsForm.get("confirm").errors.minlength),v.Cb(1),v.rc("ngIf",t.userDetailsForm.get("confirm").errors.maxlength),v.Cb(1),v.rc("ngIf",t.userDetailsForm.get("confirm").errors.mustMatch)}}function A(e,r){1&e&&v.Qb(0,"span",42)}function H(e,r){1&e&&v.Lc(0,"Create")}function Z(e,r){if(1&e){var t=v.Wb();v.Vb(0,"div",10),v.Vb(1,"span"),v.Lc(2,"Create User"),v.Ub(),v.Ub(),v.Vb(3,"div",11),v.Vb(4,"div",12),v.Vb(5,"div",13),v.Vb(6,"label"),v.Lc(7,"First Name"),v.Ub(),v.Qb(8,"input",14),v.Jc(9,P,2,1,"ng-container",3),v.Ub(),v.Vb(10,"div",13),v.Vb(11,"label"),v.Lc(12,"Last Name"),v.Ub(),v.Qb(13,"input",15),v.Jc(14,L,2,1,"ng-container",3),v.Ub(),v.Ub(),v.Vb(15,"div",16),v.Vb(16,"label"),v.Lc(17,"Email"),v.Ub(),v.Qb(18,"input",17),v.Jc(19,O,3,2,"ng-container",3),v.Ub(),v.Vb(20,"div",12),v.Vb(21,"div",18),v.Vb(22,"label"),v.Lc(23,"Country"),v.Ub(),v.Jc(24,k,2,1,"select",19),v.mc(25,"async"),v.Jc(26,x,2,1,"ng-container",3),v.Ub(),v.Jc(27,S,5,4,"div",20),v.Jc(28,E,1,0,"ng-template",null,21,v.Kc),v.Ub(),v.Vb(30,"div",12),v.Vb(31,"div",22),v.Vb(32,"label"),v.Lc(33,"Birthday"),v.Ub(),v.Vb(34,"div",23),v.Qb(35,"input",24,25),v.Vb(37,"div",26),v.Vb(38,"button",27),v.hc("click",(function(){return v.Cc(t),v.zc(36).toggle()})),v.Qb(39,"fa-icon",28),v.Ub(),v.Ub(),v.Ub(),v.Jc(40,Q,2,1,"ng-container",3),v.Ub(),v.Ub(),v.Vb(41,"div",12),v.Vb(42,"div",22),v.Vb(43,"label"),v.Lc(44,"Password"),v.Ub(),v.Qb(45,"input",29),v.Jc(46,G,4,3,"ng-container",3),v.Ub(),v.Ub(),v.Vb(47,"div",12),v.Vb(48,"div",22),v.Vb(49,"label"),v.Lc(50,"Confirm Password"),v.Ub(),v.Qb(51,"input",30),v.Jc(52,X,5,4,"ng-container",3),v.Ub(),v.Ub(),v.Vb(53,"button",31),v.hc("click",(function(){return v.Cc(t),v.lc().createUser()})),v.Jc(54,A,1,0,"span",32),v.Jc(55,H,1,0,"ng-template",null,33,v.Kc),v.Ub(),v.Ub()}if(2&e){var n=v.zc(29),i=v.zc(56),c=v.lc();v.Cb(3),v.rc("formGroup",c.userDetailsForm),v.Cb(6),v.rc("ngIf",c.userDetailsForm.get("firstName").invalid&&c.userDetailsForm.get("firstName").touched),v.Cb(5),v.rc("ngIf",c.userDetailsForm.get("lastName").invalid&&c.userDetailsForm.get("lastName").touched),v.Cb(5),v.rc("ngIf",c.userDetailsForm.get("email").invalid&&c.userDetailsForm.get("email").touched),v.Cb(5),v.rc("ngIf",v.nc(25,17,c.countries$))("ngIfElse",n),v.Cb(2),v.rc("ngIf",c.userDetailsForm.get("country").invalid&&c.userDetailsForm.get("country").touched),v.Cb(1),v.rc("ngIf","United States"===c.userDetailsForm.get("country").value),v.Cb(8),v.rc("maxDate",c.maxDate)("minDate",c.minDate),v.Cb(4),v.rc("icon",c.calendarIcon),v.Cb(1),v.rc("ngIf",c.userDetailsForm.get("birthDate").invalid&&c.userDetailsForm.get("birthDate").touched),v.Cb(6),v.rc("ngIf",c.userDetailsForm.get("password").invalid&&c.userDetailsForm.get("password").touched),v.Cb(6),v.rc("ngIf",c.userDetailsForm.get("confirm").invalid&&c.userDetailsForm.get("confirm").touched),v.Cb(1),v.rc("disabled",c.userDetailsForm.invalid||c.isCreatingUser),v.Cb(1),v.rc("ngIf",c.isCreatingUser)("ngIfElse",i)}}var ee,re,te=[{path:"",component:(ee=function(){function e(r,t,n,i){_classCallCheck(this,e),this.api=r,this.fb=t,this.toast=n,this.router=i,this.countdown=5,this.calendarIcon=s.a,this.successIcon=l.b,this.failedIcon=l.f,this.isCreatingUser=!1,this.createError=null,this.isCreatingDone=!1,this.minDate=new o.b(1900,1,1),this.timer$=new m.a(this.countdown)}return _createClass(e,[{key:"ngOnInit",value:function(){this.countries$=this.api.get(b.e.Countries).pipe(Object(h.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return e.name}))}))),this.states$=this.api.get(b.e.States).pipe(Object(h.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return e.name}))})));var e=g();this.maxDate=new o.b(e.year(),e.month()+1,e.day()),this.userDetailsForm=this.fb.group({firstName:new i.d("",i.s.required),lastName:new i.d("",i.s.required),email:new i.d("",[d.a,i.s.required]),country:new i.d("",i.s.required),state:new i.d,birthDate:new i.d("",i.s.required),password:new i.d("",[i.s.required,i.s.minLength(8)]),confirm:new i.d("",[i.s.required,i.s.minLength(8)])},{validators:[function(e){var r=e.controls.confirm;r.errors&&!r.errors.mustMatch||r.setErrors(e.controls.password.value!==r.value?{mustMatch:!0}:null)}]})}},{key:"createUser",value:function(){var e=this;this.isCreatingUser=!0,this.createError=null;var r=Object.assign({},this.userDetailsForm.value),t={email:r.email,password:r.password,first_name:r.firstName,last_name:r.lastName,country:r.country,state:r.state,birth_date:Object(u.b)(r.birthDate).format("YYYY-MM-DD")};this.api.post(b.d.CreateUser,{body:t}).pipe(Object(C.a)((function(r){return e.isCreatingUser=!1,e.createError=r.error||r.statusText||r.message||"Something went wrong on creating the user.",e.toast.error(e.createError),p.a}))).subscribe((function(r){e.createdUser=r,Object(f.a)(e.countdown).subscribe((function(r){e.timer$.next(r),r<=0&&(e.timer$.complete(),e.navigateToUserProfile())})),e.isCreatingUser=!1,e.isCreatingDone=!0}))}},{key:"navigateToUserProfile",value:function(){this.router.navigate(["/admin/user",this.createdUser.id])}},{key:"goBack",value:function(){this.createError=null}}]),e}(),ee.\u0275fac=function(e){return new(e||ee)(v.Pb(U.a),v.Pb(i.c),v.Pb(D.a),v.Pb(a.b))},ee.\u0275cmp=v.Jb({type:ee,selectors:[["duelit-user-create"]],decls:4,vars:2,consts:[[1,"card"],[4,"ngIf","ngIfElse"],["createUserTemplate",""],[4,"ngIf"],[1,"card-body","result"],[1,"fa-9x","failed",3,"icon"],[1,"failed"],[1,"btn","btn-primary","custom","col",3,"click"],[1,"fa-9x","success",3,"icon"],[1,"success"],[1,"card-header","d-flex"],[1,"card-body",3,"formGroup"],[1,"row"],[1,"form-group","col-6"],["type","text","formControlName","firstName",1,"form-control"],["type","text","formControlName","lastName",1,"form-control"],[1,"form-group"],["type","email","formControlName","email",1,"form-control"],[1,"col-6","form-group"],["class","form-control","formControlName","country","aria-placeholder","Select Country",4,"ngIf","ngIfElse"],["class","col-6 form-group",4,"ngIf"],["loadingSelect",""],[1,"col","form-group"],[1,"input-group"],["placeholder","YYYY-MM-DD","formControlName","birthDate","ngbDatepicker","",1,"form-control",3,"maxDate","minDate"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","calendar",3,"click"],[3,"icon"],["type","password","formControlName","password",1,"form-control"],["type","password","formControlName","confirm",1,"form-control"],[1,"btn","btn-primary","custom","col",3,"disabled","click"],["class","loading",4,"ngIf","ngIfElse"],["createButton",""],["class","error",4,"ngIf"],[1,"error"],["formControlName","country","aria-placeholder","Select Country",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","form-control","formControlName","states","aria-placeholder","Select States / Province",4,"ngIf","ngIfElse"],["formControlName","states","aria-placeholder","Select States / Province",1,"form-control"],["readonly","","disabled","","type","text","placeholder","Loading...",1,"form-control-plaintext"],[1,"loading"]],template:function(e,r){if(1&e&&(v.Vb(0,"div",0),v.Jc(1,y,3,2,"ng-container",1),v.Jc(2,Z,57,19,"ng-template",null,2,v.Kc),v.Ub()),2&e){var t=v.zc(3);v.Cb(1),v.rc("ngIf",r.createError||r.isCreatingDone)("ngIfElse",t)}},directives:[n.m,c.a,i.m,i.g,i.b,i.l,i.f,o.k,i.r,n.l,i.o,i.t],pipes:[n.b],styles:["[_nghost-%COMP%]{width:100%;align-content:center;-webkit-box-pack:center;justify-content:center}[_nghost-%COMP%], [_nghost-%COMP%]   .result[_ngcontent-%COMP%]{display:-webkit-box;display:flex}[_nghost-%COMP%]   .result[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;padding:50px}[_nghost-%COMP%]   .result[_ngcontent-%COMP%]   fa-icon.success[_ngcontent-%COMP%], [_nghost-%COMP%]   .result[_ngcontent-%COMP%]   label.success[_ngcontent-%COMP%]{color:#28a745}[_nghost-%COMP%]   .result[_ngcontent-%COMP%]   fa-icon.failed[_ngcontent-%COMP%], [_nghost-%COMP%]   .result[_ngcontent-%COMP%]   label.failed[_ngcontent-%COMP%]{color:#dc3545}[_nghost-%COMP%]   .result[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex}[_nghost-%COMP%]   .card[_ngcontent-%COMP%]{max-width:512px}[_nghost-%COMP%]   span.loading[_ngcontent-%COMP%]{padding:0;background-size:15px 15px}"]}),ee)}],ne=((re=function e(){_classCallCheck(this,e)}).\u0275mod=v.Nb({type:re}),re.\u0275inj=v.Mb({factory:function(e){return new(e||re)},imports:[[a.e.forChild(te)],a.e]}),re);t.d(r,"UserCreateModule",(function(){return ce}));var ie,ce=((ie=function e(){_classCallCheck(this,e)}).\u0275mod=v.Nb({type:ie}),ie.\u0275inj=v.Mb({factory:function(e){return new(e||ie)},imports:[[n.c,ne,i.q,c.b,o.e]]}),ie)}}]);