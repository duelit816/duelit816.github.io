(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"0jGk":function(e,t,i){"use strict";i.r(t);var r=i("ofXK"),n=i("S48G"),a=i("tyNb"),c=i("Znnd"),s=i("LRne"),o=i("JIr8"),l=i("fXoL"),b=i("qc5V"),d=i("Olgc"),u=i("Jx61"),g=i("BamM");function p(e,t){if(1&e&&(l.Tb(0),l.Vb(1,"h5",2),l.Lc(2,"< back to users"),l.Ub(),l.Vb(3,"h4"),l.Lc(4,"Game Stat"),l.Ub(),l.Vb(5,"div",3),l.Qb(6,"duelit-metric",4),l.Qb(7,"duelit-metric",4),l.Qb(8,"duelit-metric",4),l.Qb(9,"duelit-metric",4),l.mc(10,"number"),l.Ub(),l.Vb(11,"h4"),l.Lc(12,"Challenge Stats"),l.Ub(),l.Vb(13,"div",3),l.Qb(14,"duelit-keen-api",5),l.Ub(),l.Vb(15,"div",3),l.Qb(16,"duelit-keen-api",5),l.Ub(),l.Vb(17,"h4"),l.Lc(18,"Redeem Stat"),l.Ub(),l.Vb(19,"div",3),l.Qb(20,"duelit-metric",6),l.Qb(21,"duelit-metric",7),l.Qb(22,"duelit-metric",7),l.Ub(),l.Vb(23,"h4"),l.Lc(24,"Purchase Stat"),l.Ub(),l.Vb(25,"div",3),l.Qb(26,"duelit-metric",6),l.Qb(27,"duelit-metric",7),l.Qb(28,"duelit-metric",7),l.Ub(),l.Sb()),2&e){const e=t.$implicit,i=l.lc();l.Cb(6),l.rc("metric",i.getMetric("Wins","Count - Games Won",e.games.wins)),l.Cb(1),l.rc("metric",i.getMetric("Losts","Count - Games Losts",e.games.lost)),l.Cb(1),l.rc("metric",i.getMetric("Played","Count - Games Played",e.games.completed)),l.Cb(1),l.rc("metric",i.getMetric("Win Rate","Win Percentage",l.oc(10,12,100*e.games.win_percentage,".0-2"))),l.Cb(5),l.rc("keenApiInput",i.createdChallengeStats$),l.Cb(2),l.rc("keenApiInput",i.playedChallengeStats$),l.Cb(4),l.rc("metric",i.getMetric("Redeems","Count - Redeems",e.redeemed.count)),l.Cb(1),l.rc("metric",i.getCoinDollarMetric("Total","Total - Redeems",e.redeemed.coins,e.redeemed.dollar)),l.Cb(1),l.rc("metric",i.getCoinDollarMetric("Average","Average - Redeems",e.redeemed.average.coins,e.redeemed.average.dollar,!0)),l.Cb(4),l.rc("metric",i.getMetric("Purchases","Count - Purchases",e.topup.count)),l.Cb(1),l.rc("metric",i.getCoinDollarMetric("Total","Total - Purchases",e.topup.coins,e.topup.dollar)),l.Cb(1),l.rc("metric",i.getCoinDollarMetric("Average","Average - Purchases",e.topup.average.coins,e.topup.average.dollar,!0))}}function m(e,t){1&e&&(l.Vb(0,"div",8),l.Qb(1,"span",9),l.Ub())}const h=[{path:"",component:(()=>{class e{constructor(e,t,i,r){this.api=e,this.route=t,this.toast=i,this.numberPipe=r,this.createdChallengeStats$={title:"Challenge Sent",classSelector:"challenge-sent",viewType:"line",xAxisLabel:"Hour of day (in UTC)",yAxisLabel:"Count"},this.playedChallengeStats$={title:"Challenge Played",classSelector:"challenge-played",viewType:"line",xAxisLabel:"Hour of day (in UTC)",yAxisLabel:"Count"}}ngOnInit(){const e=this.api.buildPath(c.e.UserStats,[this.route.snapshot.params.userId]);this.stats$=this.api.get(e).pipe(Object(o.a)(e=>(this.toast.error(e.error||e.statusText||e.message),Object(s.a)({games:{completed:0,wins:0,lost:0,win_percentage:0},redeemed:{count:0,coins:0,dollar:0,average:{coins:0,dollar:0}}})))),this.getChallengeStats()}getMetric(e,t,i){return{title:e,subTitle:t,data:i}}getCoinDollarMetric(e,t,i,r,n=!1){const a=`$${this.numberPipe.transform(r,n?".3-3":"0.0")}<br>${this.numberPipe.transform(i,".2-2")} coins`;return this.getMetric(e,t,a)}getChallengeStats(){this.stats$.subscribe(e=>{console.log("userStats",e);const t=e.createdChallengeVsHours,i=[];if(t)for(let a=0;a<24;a++)i.push({type:a,count:t[a]||0});this.createdChallengeStats$.data=i;const r=e.playedChallengeVsHours,n=[];if(r)for(let a=0;a<24;a++)n.push({type:a,count:r[a]||0});this.playedChallengeStats$.data=n})}}return e.\u0275fac=function(t){return new(t||e)(l.Pb(b.a),l.Pb(a.a),l.Pb(d.a),l.Pb(r.f))},e.\u0275cmp=l.Jb({type:e,selectors:[["duelit-user-stat"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["onclick","window.history.back()",1,"pointer"],[1,"row","container"],[1,"col-3",3,"metric"],[1,"col-12",3,"keenApiInput"],[1,"col-4",3,"metric"],[1,"col-4","coin-dollar-metric",3,"metric"],[1,"col","col-loading"],[1,"metric","loading"]],template:function(e,t){if(1&e&&(l.Jc(0,p,29,15,"ng-container",0),l.mc(1,"async"),l.Jc(2,m,2,0,"ng-template",null,1,l.Kc)),2&e){const e=l.zc(3);l.rc("ngIf",l.nc(1,2,t.stats$))("ngIfElse",e)}},directives:[r.n,u.a,g.a],pipes:[r.b,r.f],styles:["[_nghost-%COMP%]   span.metric.loading[_ngcontent-%COMP%]{height:120px;width:120px;background-size:120px 120px}[_nghost-%COMP%]   .col-loading[_ngcontent-%COMP%]{-webkit-box-pack:center;justify-content:center;display:-webkit-box;display:flex}[_nghost-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:3em}"]}),e})()}];let C=(()=>{class e{}return e.\u0275mod=l.Nb({type:e}),e.\u0275inj=l.Mb({factory:function(t){return new(t||e)},imports:[[a.e.forChild(h)],a.e]}),e})();var f=i("geAU");i.d(t,"UserStatModule",(function(){return y}));let y=(()=>{class e{}return e.\u0275mod=l.Nb({type:e}),e.\u0275inj=l.Mb({factory:function(t){return new(t||e)},providers:[r.f],imports:[[r.c,C,n.a,f.a]]}),e})()}}]);