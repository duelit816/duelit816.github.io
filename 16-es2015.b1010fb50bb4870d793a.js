(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"3afk":function(t,e,n){"use strict";n.r(e);var o=n("ofXK"),a=n("3Pt+"),c=n("Dh3D"),i=n("+0xr"),r=n("1kSV"),s=n("tyNb"),l=n("Znnd"),d=n("2Vo4"),b=n("itXk"),g=n("LRne"),m=n("5yfJ"),u=n("JX91"),h=n("vkgz"),f=n("/uUt"),p=n("Kj3r"),C=n("eIep"),O=n("JIr8"),P=n("fXoL"),w=n("qc5V"),M=n("Olgc");function _(t,e){1&t&&(P.Vb(0,"th",18),P.Lc(1," Code"),P.Ub())}function y(t,e){if(1&t&&(P.Vb(0,"td",19),P.Lc(1),P.Ub()),2&t){const t=e.$implicit;P.Cb(1),P.Nc(" ",t.code," ")}}function D(t,e){1&t&&(P.Vb(0,"th",18),P.Lc(1," Name "),P.Ub())}function x(t,e){if(1&t&&(P.Vb(0,"td",19),P.Lc(1),P.Ub()),2&t){const t=e.$implicit;P.Cb(1),P.Nc(" ",t.name," ")}}function S(t,e){1&t&&(P.Vb(0,"th",20),P.Lc(1," For Trivia "),P.Ub())}function k(t,e){if(1&t){const t=P.Wb();P.Vb(0,"td",19),P.Vb(1,"label",21),P.Vb(2,"input",22),P.hc("change",(function(n){P.Cc(t);const o=e.$implicit;return P.lc(2).updateCountry("fortrivia",n.target.checked,o,n.target)})),P.Ub(),P.Qb(3,"span",23),P.Ub(),P.Ub()}if(2&t){const t=e.$implicit;P.Cb(2),P.Db("checked",!!t.fortrivia||void 0)}}function v(t,e){1&t&&(P.Vb(0,"th",20),P.Lc(1," Allowed "),P.Ub())}function J(t,e){if(1&t){const t=P.Wb();P.Vb(0,"td",19),P.Vb(1,"label",21),P.Vb(2,"input",22),P.hc("change",(function(n){P.Cc(t);const o=e.$implicit;return P.lc(2).updateCountry("allowed",n.target.checked,o,n.target)})),P.Ub(),P.Qb(3,"span",23),P.Ub(),P.Ub()}if(2&t){const t=e.$implicit;P.Cb(2),P.Db("checked",!!t.allowed||void 0)}}function U(t,e){1&t&&(P.Vb(0,"th",24),P.Qb(1,"input",25),P.Ub())}function V(t,e){1&t&&(P.Vb(0,"th",24),P.Qb(1,"input",26),P.Ub())}function j(t,e){1&t&&(P.Vb(0,"th",24),P.Lc(1,"\xa0"),P.Ub())}function $(t,e){1&t&&(P.Vb(0,"th",24),P.Lc(1,"\xa0"),P.Ub())}function L(t,e){1&t&&P.Qb(0,"tr",27)}function T(t,e){1&t&&P.Qb(0,"tr",28)}function H(t,e){1&t&&P.Qb(0,"tr",29)}const R=function(){return["code-search","name-search","fortrivia-search","allowed-search"]};function z(t,e){if(1&t){const t=P.Wb();P.Tb(0),P.Vb(1,"table",1),P.hc("matSortChange",(function(e){return P.Cc(t),P.lc().sortData(e)})),P.Tb(2,2),P.Jc(3,_,2,0,"th",3),P.Jc(4,y,2,1,"td",4),P.Sb(),P.Tb(5,5),P.Jc(6,D,2,0,"th",3),P.Jc(7,x,2,1,"td",4),P.Sb(),P.Tb(8,6),P.Jc(9,S,2,0,"th",7),P.Jc(10,k,4,1,"td",4),P.Sb(),P.Tb(11,8),P.Jc(12,v,2,0,"th",7),P.Jc(13,J,4,1,"td",4),P.Sb(),P.Tb(14,9),P.Jc(15,U,2,0,"th",10),P.Sb(),P.Tb(16,11),P.Jc(17,V,2,0,"th",10),P.Sb(),P.Tb(18,12),P.Jc(19,j,2,0,"th",10),P.Sb(),P.Tb(20,13),P.Jc(21,$,2,0,"th",10),P.Sb(),P.Jc(22,L,1,0,"tr",14),P.Jc(23,T,1,0,"tr",15),P.Jc(24,H,1,0,"tr",16),P.Ub(),P.Vb(25,"ngb-pagination",17),P.hc("pageChange",(function(e){return P.Cc(t),P.lc().onPageChange(e)})),P.mc(26,"async"),P.Ub(),P.Sb()}if(2&t){const t=e.$implicit,n=P.lc();P.Cb(1),P.Hb("loading",n.isLoading),P.rc("dataSource",t.rows)("formGroup",n.filterFormGroup),P.Cb(21),P.rc("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),P.Cb(1),P.rc("matHeaderRowDef",P.uc(16,R))("matHeaderRowDefSticky",!0),P.Cb(1),P.rc("matRowDefColumns",n.displayedColumns),P.Cb(1),P.rc("collectionSize",10*t.pages)("pageSize",10)("page",P.nc(26,14,n.page$))("maxSize",4)("rotate",!0)}}const N=[{path:"",component:(()=>{class t{constructor(t,e,n){this.api=t,this.fb=e,this.toast=n,this.displayedColumns=["code","name","fortrivia","allowed"],this.sortDirection$=new d.a({active:"name",direction:"asc"}),this.page$=new d.a(1),this.isLoading=!1}ngOnInit(){this.filterFormGroup=this.fb.group({code:new a.d,name:new a.d}),this.countriesPaginated$=Object(b.a)([this.page$,this.sortDirection$,this.filterFormGroup.valueChanges.pipe(Object(u.a)(this.filterFormGroup.value))]).pipe(Object(h.a)(()=>this.isLoading=!0),Object(f.a)(),Object(p.a)(500),Object(C.a)(([t,e,n])=>{const o=this.api.buildPath(l.b.CountriesPaginated,[10*(t-1),10,e.active]);return this.api.get(o,{query:{name:n.name||"",code:n.code||""}}).pipe(Object(h.a)(()=>this.isLoading=!1),Object(O.a)(t=>(this.isLoading=!1,this.toast.error(t.error||t.statusText||t.message),Object(g.a)({pages:0,rows:[]}))))}),Object(u.a)({pages:0,rows:[]}))}sortData(t){console.log(t),this.sortDirection$.next(""===t.direction?{active:"name",direction:"asc"}:t)}onPageChange(t){this.page$.next(t)}updateCountry(t,e,n,o){const a={id:n.id};a[t]=e?1:0,this.api.put(l.b.UpdateCountry,{body:a,opts:{addSecurity:!1}}).pipe(Object(h.a)(()=>this.isLoading=!0),Object(O.a)(t=>(this.isLoading=!1,o.checked=!e,this.toast.error(t.error||t.statusText||t.message),m.a))).subscribe(()=>{this.isLoading=!1,this.toast.success(`Successfully updated ${n.name}. Updated ${"allowed"===t?"Allowed":"For Trivia"} to ${e}`)})}}return t.\u0275fac=function(e){return new(e||t)(P.Pb(w.a),P.Pb(a.c),P.Pb(M.a))},t.\u0275cmp=P.Jb({type:t,selectors:[["duelit-countries"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","formGroup","matSortChange"],["matColumnDef","code"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","fortrivia"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","allowed"],["matColumnDef","code-search"],["mat-header-cell","","class","form-group",4,"matHeaderCellDef"],["matColumnDef","name-search"],["matColumnDef","fortrivia-search"],["matColumnDef","allowed-search"],["mat-header-row","","class","named-columns",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"d-flex","justify-content-center",3,"collectionSize","pageSize","page","maxSize","rotate","pageChange"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"switch"],["type","checkbox",3,"change"],[1,"slider","round"],["mat-header-cell","",1,"form-group"],["type","text","formControlName","code",1,"form-control"],["type","text","formControlName","name",1,"form-control"],["mat-header-row","",1,"named-columns"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(P.Jc(0,z,27,17,"ng-container",0),P.mc(1,"async")),2&t&&P.rc("ngIf",P.nc(1,1,e.countriesPaginated$))},directives:[o.m,i.j,c.a,a.m,a.g,i.c,i.e,i.b,i.g,i.i,r.u,i.d,c.b,i.a,a.b,a.l,a.f,i.f,i.h],pipes:[o.b],styles:["[_nghost-%COMP%]   .results-and-date[_ngcontent-%COMP%]{-webkit-box-pack:justify;justify-content:space-between}[_nghost-%COMP%]   .results-and-date[_ngcontent-%COMP%], [_nghost-%COMP%]   .results-and-date[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}[_nghost-%COMP%]   .results-and-date[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]{-webkit-box-pack:end;justify-content:flex-end}[_nghost-%COMP%]   .results-and-date[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}[_nghost-%COMP%]   .results-and-date[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   duelit-date-picker-range[_ngcontent-%COMP%]{margin:0 15px}[_nghost-%COMP%]   table[_ngcontent-%COMP%]{width:100%;font-family:Nexa}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   .named-columns[_ngcontent-%COMP%]{height:40px;vertical-align:bottom}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   .named-columns[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:none;font-weight:700;font-size:15px}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   .action-column[_ngcontent-%COMP%]{text-align:end}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   .action-column[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{padding-right:15px}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, [_nghost-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{padding:0}[_nghost-%COMP%]   table.loading[_ngcontent-%COMP%]     tbody{background:url(/assets/img/loading.gif) no-repeat fixed 50% rgba(0,0,0,.125)}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}ngb-pagination[_ngcontent-%COMP%]{margin-top:30px}",""]}),t})()}];let Q=(()=>{class t{}return t.\u0275mod=P.Nb({type:t}),t.\u0275inj=P.Mb({factory:function(e){return new(e||t)},imports:[[s.e.forChild(N)],s.e]}),t})();n.d(e,"CountriesModule",(function(){return F}));let F=(()=>{class t{}return t.\u0275mod=P.Nb({type:t}),t.\u0275inj=P.Mb({factory:function(e){return new(e||t)},imports:[[o.c,Q,a.q,i.l,c.c,r.v]]}),t})()}}]);