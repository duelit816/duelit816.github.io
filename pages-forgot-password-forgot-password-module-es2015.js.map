{"version":3,"sources":["./src/app/core/pages/forgot-password/forgot-password-routing.module.ts","./src/app/core/pages/forgot-password/forgot-password.component.ts","./src/app/core/pages/forgot-password/forgot-password.component.html","./src/app/core/pages/forgot-password/forgot-password.module.ts"],"names":[],"mappings":"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","file":"pages-forgot-password-forgot-password-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ForgotPasswordComponent } from './forgot-password.component';\r\n\r\nconst routes: Routes = [{ path: '', component: ForgotPasswordComponent }];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ForgotPasswordRoutingModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormControl, Validators } from '@angular/forms';\r\nimport { ApiService } from '@core/services/api.service';\r\nimport { ToastService } from '@core/services/toast.service';\r\nimport { UsersApi } from '@shared/constants/api';\r\nimport { EmailValidator } from '@shared/validators';\r\nimport { NEVER, of } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'duelit-forgot-password',\r\n  templateUrl: './forgot-password.component.html',\r\n  styleUrls: ['./forgot-password.component.scss', '../login/login.component.scss']\r\n})\r\nexport class ForgotPasswordComponent implements OnInit {\r\n  isSendingEmailDetails = false;\r\n  email: FormControl;\r\n  constructor(\r\n    private api: ApiService,\r\n    private toast: ToastService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.email = new FormControl('', [ EmailValidator, Validators.required ]);\r\n  }\r\n\r\n  sendEmailDetails() {\r\n    this.isSendingEmailDetails = true;\r\n    this.api.put(UsersApi.ResetPasswordRequest, {\r\n      opts: { addSecurity: false },\r\n      body: {\r\n        email: this.email.value,\r\n        viewUrl: `${location.origin}/reset-password`\r\n      }\r\n    }).pipe(\r\n      catchError(err => {\r\n        if (err.status === 200) {\r\n          return of(err);\r\n        }\r\n        this.isSendingEmailDetails = false;\r\n        this.toast.error(err.error || JSON.stringify(err));\r\n        return NEVER;\r\n      })\r\n    ).subscribe((results) => {\r\n      this.isSendingEmailDetails = false;\r\n      this.toast.success('Further instructions will be send to your email');\r\n    });\r\n  }\r\n}\r\n","<duelit-panel head=\"Forgot Password\">\r\n  <div class=\"form-group\" >\r\n    <input type=\"email\" placeholder=\"Email\" autocomplete=\"off\" class=\"form-control custom\" [formControl]=\"email\">\r\n    <ng-container *ngIf=\"email.invalid && email.touched\">\r\n      <span class=\"error\" *ngIf=\"email.errors.required\">This field is required.</span>\r\n      <span class=\"error\" *ngIf=\"email.errors.email\">This field must be a valid email address.</span>\r\n    </ng-container>\r\n\r\n    <button class=\"btn custom primary\" [disabled]=\"email.invalid || isSendingEmailDetails\" (click)=\"sendEmailDetails()\">\r\n      <span *ngIf=\"isSendingEmailDetails; else login\" class=\"loading\"></span>\r\n      <ng-template #login>Send Request</ng-template>\r\n    </button>\r\n    <span [routerLink]=\"['/login']\">Back to Login</span>\r\n  </div>\r\n</duelit-panel>\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { PanelModule } from '@shared/components/panel';\r\n\r\nimport { ForgotPasswordRoutingModule } from './forgot-password-routing.module';\r\nimport { ForgotPasswordComponent } from './forgot-password.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [ForgotPasswordComponent],\r\n  imports: [\r\n    CommonModule,\r\n    ForgotPasswordRoutingModule,\r\n    PanelModule,\r\n    ReactiveFormsModule\r\n  ]\r\n})\r\nexport class ForgotPasswordModule { }\r\n"],"sourceRoot":"webpack:///"}