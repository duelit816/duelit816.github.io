function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=_superPropBase(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{XRCK:function(e,t,n){"use strict";n.r(t);var i,a,r,c,s,o,l=n("ofXK"),u=n("3Pt+"),b=n("1kSV"),d=n("ftNi"),p=n("fXoL"),f=((c=function e(){_classCallCheck(this,e)}).\u0275mod=p.Nb({type:c}),c.\u0275inj=p.Mb({factory:function(e){return new(e||c)},imports:[[l.c]]}),c),g=((r=function e(){_classCallCheck(this,e)}).\u0275mod=p.Nb({type:r}),r.\u0275inj=p.Mb({factory:function(e){return new(e||r)},imports:[[l.c,f]]}),r),m=((a=function e(){_classCallCheck(this,e)}).\u0275mod=p.Nb({type:a}),a.\u0275inj=p.Mb({factory:function(e){return new(e||a)},imports:[[l.c]]}),a),h=((i=function e(){_classCallCheck(this,e)}).\u0275mod=p.Nb({type:i}),i.\u0275inj=p.Mb({factory:function(e){return new(e||i)},imports:[[l.c,m]]}),i),y=n("S48G"),v=n("geAU"),C=n("tyNb"),k=n("Znnd"),O=n("wd/R"),T=n("XNiG"),_=n("2Vo4"),S=n("LRne"),w=n("1G5W"),P=n("JIr8"),I=n("lJxs"),$=n("5+tZ"),U=n("SLWe"),x=n("YGOX"),j=n("qc5V"),A=n("aVeI"),R=n("lbBO"),V=n("BamM"),q=n("J+vq"),E=n("h7dw"),D=((o=function(){function e(t,n,i){_classCallCheck(this,e),this.el=t,this.renderer=n,this.keen=i,this.viewInit=!1,this.loading=!0}return _createClass(e,[{key:"ngOnInit",value:function(){this.renderer.addClass(this.el.nativeElement,"duelit-keen-data")}},{key:"ngOnChanges",value:function(){this.query&&this.viewInit&&(this.el.nativeElement.innerHTML='<span class="duelit-keen-data loading"></span>',this.doQuery())}},{key:"doQuery",value:function(){var e=this;if(this.el.nativeElement.innerHTML='<span class="duelit-keen-data loading"></span>',this.chart=new q.Dataviz({container:".".concat(this.duelitkeenname),title:"metric"===this.viewType&&this.title,type:this.viewType,legend:{pagination:{limit:10}},labelMapping:{Regular:"Challenge",Open:"Tournament","Practice game":"Practice"}}),this.query.eventCollection instanceof Array){var t=[];this.query.eventCollection.forEach((function(n){t.push(e.keen.query(e.queryType,{eventCollection:n,timeframe:e.query.timeframe,timezone:"UTC"}))})),this.keen.run(t).then((function(t){var n=[];n.push({type:"Accepted",result:t[1].result},{type:"Rejected",result:t[0].result-t[1].result}),e.chart.render({query:{timeframe:e.query.timeframe,timezone:"UTC"},result:n})}))}else this.loading=!0,this.keen.query(this.queryType,this.query).then((function(t){setTimeout((function(){e.isCombined&&e.apiResult?(t.result=[t.result.find((function(e){return"Practice game"===e["Game.type"]}))],e.apiResult.subscribe((function(n){n.forEach((function(e){t.result.push({"Game.type":e.type,result:e.count})})),e.chart.render(t)}))):e.chart.render(t)})),e.loading=!1})).catch((function(t){setTimeout((function(){e.chart.message(t.message)})),e.loading=!1}))}},{key:"ngAfterViewInit",value:function(){this.viewInit=!0,this.doQuery()}}]),e}()).\u0275fac=function(e){return new(e||o)(p.Pb(p.l),p.Pb(p.F),p.Pb(E.a))},o.\u0275dir=p.Kb({type:o,selectors:[["","duelitKeenData",""]],inputs:{duelitkeenname:"duelitkeenname",viewType:"viewType",queryType:"queryType",query:"query",title:"title",isCombined:"isCombined",apiResult:"apiResult"},features:[p.Ab()]}),o),L=((s=function(){function e(){_classCallCheck(this,e),this.loading=!0,this.viewInit=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||s)},s.\u0275cmp=p.Jb({type:s,selectors:[["duelit-keen"]],inputs:{title:"title",keenName:"keenName",viewType:"viewType",queryType:"queryType",query:"query",subTitle:"subTitle",isCombined:"isCombined",apiResult:"apiResult"},decls:3,vars:11,consts:[["duelitKeenData","",1,"duelit-keen-data",3,"duelitkeenname","viewType","queryType","query","title","ngClass","isCombined","apiResult"]],template:function(e,t){1&e&&(p.Vb(0,"h6"),p.Lc(1),p.Ub(),p.Qb(2,"div",0)),2&e&&(p.Cb(1),p.Mc(t.title),p.Cb(1),p.Hb("metric","metric"===t.viewType),p.rc("duelitkeenname",t.keenName)("viewType",t.viewType)("queryType",t.queryType)("query",t.query)("title",t.subTitle)("ngClass",t.keenName)("isCombined",t.isCombined)("apiResult",t.apiResult))},directives:[D,l.l],styles:["[_nghost-%COMP%]   .duelit-keen-data[_ngcontent-%COMP%]{height:250px;width:auto;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}[_nghost-%COMP%]   .duelit-keen-data[_ngcontent-%COMP%]     span.loading{height:120px;width:120px;background-size:120px 120px}[_nghost-%COMP%]   .duelit-keen-data.metric[_ngcontent-%COMP%]{height:unset}"]}),s),M=n("Jx61");function J(e,t){1&e&&p.Qb(0,"duelit-keen-api",9),2&e&&p.rc("keenApiInput",t.$implicit)}function F(e,t){if(1&e&&(p.Tb(0),p.Jc(1,J,1,1,"duelit-keen-api",8),p.Sb()),2&e){var n=t.$implicit;p.Cb(1),p.rc("ngForOf",n)}}function Q(e,t){if(1&e&&p.Qb(0,"duelit-keen",10),2&e){var n=t.$implicit,i=p.lc();p.rc("title",n.title)("keenName",n.keenname)("viewType",n.viewType)("queryType",n.queryType)("query",n.query)("isCombined",n.isCombined)("apiResult",i.tournamentCountPerType$)}}function B(e,t){1&e&&p.Qb(0,"duelit-keen-api",12),2&e&&p.rc("keenApiInput",t.$implicit)}function N(e,t){if(1&e&&(p.Tb(0),p.Jc(1,B,1,1,"duelit-keen-api",11),p.Sb()),2&e){var n=t.$implicit;p.Cb(1),p.rc("ngForOf",n)}}function G(e,t){1&e&&p.Qb(0,"duelit-keen-api",12),2&e&&p.rc("keenApiInput",t.$implicit)}function H(e,t){if(1&e&&(p.Tb(0),p.Jc(1,G,1,1,"duelit-keen-api",11),p.Sb()),2&e){var n=t.$implicit;p.Cb(1),p.rc("ngForOf",n)}}function W(e,t){1&e&&p.Qb(0,"duelit-keen-api",12),2&e&&p.rc("keenApiInput",t.$implicit)}function z(e,t){if(1&e&&(p.Tb(0),p.Jc(1,W,1,1,"duelit-keen-api",11),p.Sb()),2&e){var n=t.$implicit;p.Cb(1),p.rc("ngForOf",n)}}function Y(e,t){1&e&&p.Qb(0,"duelit-metric",14),2&e&&p.rc("metric",t.$implicit)}function K(e,t){if(1&e&&(p.Tb(0),p.Jc(1,Y,1,1,"duelit-metric",13),p.Sb()),2&e){var n=t.$implicit;p.Cb(1),p.rc("ngForOf",n)}}function X(e,t){if(1&e&&(p.Tb(0),p.Qb(1,"duelit-keen-api",15),p.Sb()),2&e){var n=p.lc();p.Cb(1),p.rc("keenApiInput",n.challengeRatioStats$)}}function Z(e,t){if(1&e){var n=p.Wb();p.Vb(0,"duelit-metric",17),p.hc("click",(function(){p.Cc(n);var e=t.$implicit;return p.lc(2).openUsersSignup(e)})),p.Ub()}2&e&&p.rc("metric",t.$implicit)}function ee(e,t){if(1&e&&(p.Tb(0),p.Jc(1,Z,1,1,"duelit-metric",16),p.Sb()),2&e){var n=t.$implicit;p.Cb(1),p.rc("ngForOf",n)}}function te(e,t){if(1&e&&(p.Tb(0),p.Qb(1,"duelit-keen-api",9),p.Sb()),2&e){var n=p.lc();p.Cb(1),p.rc("keenApiInput",n.signupRatioStats$)}}function ne(e,t){if(1&e&&p.Qb(0,"duelit-keen",18),2&e){var n=t.$implicit;p.rc("title",n.title)("keenName",n.keenname)("viewType",n.viewType)("queryType",n.queryType)("query",n.query)}}function ie(e,t){if(1&e&&p.Qb(0,"duelit-keen",18),2&e){var n=t.$implicit;p.rc("title",n.title)("keenName",n.keenname)("viewType",n.viewType)("queryType",n.queryType)("query",n.query)}}function ae(e,t){1&e&&p.Qb(0,"duelit-keen-api",9),2&e&&p.rc("keenApiInput",t.$implicit)}function re(e,t){if(1&e&&(p.Tb(0),p.Jc(1,ae,1,1,"duelit-keen-api",8),p.Sb()),2&e){var n=t.$implicit;p.Cb(1),p.rc("ngForOf",n)}}function ce(e,t){if(1&e){var n=p.Wb();p.Vb(0,"duelit-metric",17),p.hc("click",(function(){return p.Cc(n),p.lc(2).openActiveUsers()})),p.Ub()}2&e&&p.rc("metric",t.$implicit)}function se(e,t){if(1&e&&(p.Tb(0),p.Jc(1,ce,1,1,"duelit-metric",16),p.Sb()),2&e){var n=t.$implicit;p.Cb(1),p.rc("ngForOf",n)}}function oe(e,t){if(1&e){var n=p.Wb();p.Vb(0,"duelit-metric",17),p.hc("click",(function(){return p.Cc(n),p.lc(2).openUsersByBanned()})),p.Ub()}2&e&&p.rc("metric",t.$implicit)}function le(e,t){if(1&e&&(p.Tb(0),p.Jc(1,oe,1,1,"duelit-metric",16),p.Sb()),2&e){var n=t.$implicit;p.Cb(1),p.rc("ngForOf",n)}}function ue(e,t){if(1&e){var n=p.Wb();p.Vb(0,"duelit-metric",17),p.hc("click",(function(){p.Cc(n);var e=t.$implicit;return p.lc(2).openConvertedUsers(e.type)})),p.Ub()}2&e&&p.rc("metric",t.$implicit)}function be(e,t){if(1&e&&(p.Tb(0),p.Jc(1,ue,1,1,"duelit-metric",16),p.Sb()),2&e){var n=t.$implicit;p.Cb(1),p.rc("ngForOf",n)}}function de(e,t){if(1&e&&(p.Tb(0),p.Qb(1,"duelit-keen-api",9),p.Sb()),2&e){var n=p.lc();p.Cb(1),p.rc("keenApiInput",n.txnOnInsufficientFundsRatio$)}}function pe(e,t){1&e&&(p.Vb(0,"div",19),p.Qb(1,"span",20),p.Ub())}var fe,ge=O().subtract(6,"days").format(U.c),me=O().format(U.c),he=((fe=function(){function e(t,n,i,a){_classCallCheck(this,e),this.api=t,this.dashboardDate=n,this.router=i,this.numberPipe=a,this.gamesQueries=[{title:"Daily Games",keenname:"daily-games",viewType:"line",queryType:"count",query:{eventCollection:"Game played",groupBy:"Game.name",timeframe:{start:ge,end:me},interval:"daily",filters:[{property_name:"Game.name",operator:"ne",property_value:null}]}},{title:"Games Per Type",keenname:"games-per-type",viewType:"pie",queryType:"count",query:{eventCollection:"Game played",groupBy:"Game.type",timeframe:{start:ge,end:me}},isCombined:!0}],this.engagement1Queries=[{title:"Total Challenges",keenname:"challenges-total",viewType:"metric",queryType:"count",query:{eventCollection:"Challenge created",timeframe:{start:ge,end:me}}},{title:"Accepted Challenges",keenname:"challenges-accepted",viewType:"metric",queryType:"count",query:{eventCollection:"Challenge accepted",timeframe:{start:ge,end:me}}},{title:"Challenge Ratio",keenname:"challenge-ratio",viewType:"pie",queryType:"count",query:{eventCollection:["Challenge created","Challenge accepted"],timeframe:{start:ge,end:me}}}],this.engagement3Queries=[{title:"Total App Launched",keenname:"app-launced-total",viewType:"metric",queryType:"count",query:{eventCollection:"App launched",timeframe:{start:ge,end:me}}}],this.engagement4Queries=[{title:"Games Per OS",keenname:"games-per-os",viewType:"pie",queryType:"count",query:{eventCollection:"Game played",groupBy:"Device.OS",timeframe:{start:ge,end:me},filters:[{property_name:"Device.OS",operator:"exists",property_value:!0}]}}],this.signupRatioStats$={title:"Signup Ratio",classSelector:"signup-ratio",viewType:"pie"},this.challengeRatioStats$={title:"Challenge Ratio",classSelector:"challenge-ratio",viewType:"pie"},this.txnOnInsufficientFundsRatio$={title:"Transaction on Insufficient Funds",classSelector:"txn-on-insufficient-funds-ratio",viewType:"pie"},this.ngUnsubscribe=new T.a,this.FAILED_TO_RETRIEVE="-"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.rangeDate=new u.d(this.dashboardDate.range),this.rangeDate.valueChanges.pipe(Object(w.a)(this.ngUnsubscribe)).subscribe((function(t){e.dashboardDate.range=t})),this.date$=new _.a(this.dashboardDate.range),this.date$.pipe(Object(w.a)(this.ngUnsubscribe)).subscribe((function(t){var n=t.from,i=t.to,a=O().year(n.year).month(n.month-1).date(n.day).format(U.c),r=O().year(i.year).month(i.month-1).date(i.day).format(U.c);e.getRevenueStats(a,r),e.getSignupTypeStats(a,r),e.getSignupCountStats(a,r),e.getSignupRatioStats(),e.getActiveUsersStats(a,r),e.getChallengeStats(a,r),e.getTxnOnInsufficientFunds(a,r),e.getCreatedChallengePerHrStats(a,r),e.getCompletedChallengePerHrStats(a,r),e.getCompletedTournamentPerHrStats(a,r),e.getTournamentCountPerType(a,r),e.getChallengeRatioStats(),e.getTxnOnInsufficientFundsRatio(),e.getUserStats(a,r),e.updateQueries(e.engagement1Queries,a,r),e.updateQueries(e.engagement3Queries,a,r),e.updateQueries(e.engagement4Queries,a,r),e.updateQueries(e.gamesQueries,a,r)}))}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.date$.complete()}},{key:"getRevenueStats",value:function(e,t){this.revenueStats$=this.api.get(k.a.RevenueStats,{query:{start_date:O(e).format(U.c),end_date:O(t).format(U.c)}}).pipe(Object(P.a)((function(e){return Object(S.a)([])})),Object(I.a)((function(e){var t=[],n=[];e.length&&(n=[{type:"Duelit",result:e.reduce((function(e,t){return e+t.duelit_revenue}),0)},{type:"Player",result:e.reduce((function(e,t){return e+t.player_revenue}),0)}]),t.push({title:"Revenue Generated",classSelector:"revenue1",viewType:"bar",data:n}),t.push({title:"Revenue Generated (Percentage)",classSelector:"revenue2",viewType:"pie",data:n});var i={title:"Revenue by Game (Duelit)",classSelector:"revenue3",viewType:"pie",data:e.map((function(e){return{type:e.game,result:e.duelit_revenue}}))};return t.push(i),t})))}},{key:"getSignupTypeStats",value:function(e,t){this.signupTypeStats$=this.api.get(k.e.SignupType,{query:{start_date:O(e).format(U.c),end_date:O(t).format(U.c)}}).pipe(Object(P.a)((function(e){return Object(S.a)([])})),Object(I.a)((function(e){var t=[];return"0"===e.facebook&&"0"===e.apple&&"0"===e.email||Object.keys(e).forEach((function(n){t.push({type:n.charAt(0).toUpperCase()+n.slice(1),result:e[n]})})),[{title:"Signup Type",classSelector:"signup-type",viewType:"pie",data:t}]})))}},{key:"getSignupCountStats",value:function(e,t){var n=this;this.signupCountStats$=this.api.get(k.e.SignupCount,{query:{start_date:O(e).format(U.c),end_date:O(t).format(U.c)}}).pipe(Object(P.a)((function(e){return Object(S.a)([])})),Object(I.a)((function(e){return[{name:U.b.SignupCount,title:"Total Sign Ups",subTitle:"Count - Sign up",data:n.numberPipe.transform(e.signups)},{name:U.b.ActivatedSignupCount,title:"Total Activated Sign Ups",subTitle:"Count - Sign up activated",data:n.numberPipe.transform(e.activated)}]})))}},{key:"getSignupRatioStats",value:function(){var e=this;this.signupCountStats$.subscribe((function(t){var n=0;t[0].data&&t[1].data&&(n=t[0].data.replace(/,/g,"")-t[1].data.replace(/,/g,""));var i=[{type:"Activated",result:t[1].data?t[1].data.replace(/,/g,""):0},{type:"Pending",result:n}];e.signupRatioStats$={title:"Signup Ratio",classSelector:"signup-ratio",viewType:"pie",data:i}}))}},{key:"getActiveUsersStats",value:function(e,t){this.activeUsersStats$=this.api.get(k.e.ActiveUsersStats,{query:{start_date:O(e).format(U.c),end_date:O(t).format(U.c)}}).pipe(Object(P.a)((function(e){return Object(S.a)([])})),Object(I.a)((function(e){return[{title:"Active Users",subTitle:"Count - Active Users",data:e.active_users_count}]})))}},{key:"getChallengeStats",value:function(e,t){var n=this;this.challengeStats$=this.api.get(k.d.ChallengeStats,{query:{start_date:O(e).format(U.c),end_date:O(t).format(U.c)}}).pipe(Object(P.a)((function(e){return Object(S.a)([])})),Object(I.a)((function(e){return[{title:"Cancelled",subTitle:"Cancelled Challenges",data:e.cancelled?n.numberPipe.transform(e.cancelled):0},{title:"Completed",subTitle:"Completed Challenges",data:e.completed?n.numberPipe.transform(e.completed):0},{title:"Sent",subTitle:"Total Sent Challenges",data:n.numberPipe.transform((parseInt(e.cancelled)||0)+(parseInt(e.completed)||0))}]})))}},{key:"getTxnOnInsufficientFunds",value:function(e,t){var n=this,i=this.api.buildPath(k.e.UsersByConverted,["converted"]);this.txnOnInsufficientFunds$=this.api.get(i,{query:{start_date:O(e).format(U.c),end_date:O(t).format(U.c)}}).pipe(Object(P.a)((function(e){return Object(S.a)([])})),Object($.a)((function(i){var a=n.api.buildPath(k.e.UsersByConverted,["churned"]);return n.api.get(a,{query:{start_date:O(e).format(U.c),end_date:O(t).format(U.c)}}).pipe(Object(P.a)((function(e){return Object(S.a)([])})),Object(I.a)((function(e){return[{title:"Users Converted when Coins Ran Out",subTitle:"Count",type:"converted",data:i.totalCount?n.numberPipe.transform(i.totalCount):0},{title:"Users Churned when Coins Ran Out",subTitle:"Count",type:"churned",data:e.totalCount?n.numberPipe.transform(e.totalCount):0}]})))})))}},{key:"getCreatedChallengePerHrStats",value:function(e,t){this.createdChallengePerHrStats$=this.api.get(k.d.TournamentPerHrStats,{query:{start_date:O(e).format(U.c),end_date:O(t).format(U.c)}}).pipe(Object(P.a)((function(e){return Object(S.a)([])})),Object(I.a)((function(e){var t=[];if(e&&Object.keys(e)&&Object.keys(e).length)for(var n=0;n<24;n++)t.push({type:n,count:e[n]||0});return[{title:"Created Challenge",classSelector:"total-challenge-sent",viewType:"line",xAxisLabel:"Hour of day (in UTC)",yAxisLabel:"Count",data:t}]})))}},{key:"getCompletedChallengePerHrStats",value:function(e,t){this.completedChallengePerHrStats$=this.api.get(k.d.TournamentPerHrStats,{query:{status:"Ended",start_date:O(e).format(U.c),end_date:O(t).format(U.c)}}).pipe(Object(P.a)((function(e){return Object(S.a)([])})),Object(I.a)((function(e){var t=[];if(e&&Object.keys(e)&&Object.keys(e).length)for(var n=0;n<24;n++)t.push({type:n,count:e[n]||0});return[{title:"Completed Challenge",classSelector:"total-challenge-Completed",viewType:"line",xAxisLabel:"Hour of day (in UTC)",yAxisLabel:"Count",data:t}]})))}},{key:"getCompletedTournamentPerHrStats",value:function(e,t){this.completedTournamentPerHrStats$=this.api.get(k.d.TournamentPerHrStats,{query:{type:"open",status:"Ended",start_date:O(e).format(U.c),end_date:O(t).format(U.c)}}).pipe(Object(P.a)((function(e){return Object(S.a)([])})),Object(I.a)((function(e){var t=[];if(e&&Object.keys(e)&&Object.keys(e).length)for(var n=0;n<24;n++)t.push({type:n,count:e[n]||0});return[{title:"Completed Tournament",classSelector:"total-tournament-completed",viewType:"line",xAxisLabel:"Hour of day (in UTC)",yAxisLabel:"Count",data:t}]})))}},{key:"getTournamentCountPerType",value:function(e,t){this.tournamentCountPerType$=this.api.get(k.d.TournamentCountPerType,{query:{start_date:O(e).format(U.c),end_date:O(t).format(U.c)}}).pipe(Object(P.a)((function(e){return Object(S.a)([])})))}},{key:"getChallengeRatioStats",value:function(){var e=this;this.challengeStats$.subscribe((function(t){var n=[{type:"Cancelled",result:t[0].data?t[0].data.replace(/,/g,""):0},{type:"Completed",result:t[1].data?t[1].data.replace(/,/g,""):0}];e.challengeRatioStats$={title:"Challenge Ratio",classSelector:"challenge-ratio",viewType:"pie",data:n}}))}},{key:"getTxnOnInsufficientFundsRatio",value:function(){var e=this;this.txnOnInsufficientFunds$.subscribe((function(t){var n=[{type:"Converted",result:t[0].data?t[0].data.replace(/,/g,""):0},{type:"Churned",result:t[1].data?t[1].data.replace(/,/g,""):0}];e.txnOnInsufficientFundsRatio$={title:"Total User that Ran Out of Coins",classSelector:"transaction-ratio",viewType:"pie",data:n}}))}},{key:"getUserStats",value:function(e,t){var n=this,i=this.api.buildPath(k.e.UsersCountByStatus,["banned"]);this.userStats$=this.api.get(i,{query:{start_date:O(e).format(U.c),end_date:O(t).format(U.c)}}).pipe(Object(P.a)((function(e){return Object(S.a)(e.error.text||n.FAILED_TO_RETRIEVE)})),Object(I.a)((function(e){return[{title:"Total Banned Users",subTitle:"Count - Banned Users",data:e}]})))}},{key:"updateQueries",value:function(e,t,n){var i;i={start:t,end:n},e.forEach((function(e){"string"!=typeof e.query.timeframe&&(e.query=Object.assign(Object.assign({},e.query),{timeframe:i}))}))}},{key:"updateDate",value:function(){this.date$.next(Object.assign({},this.dashboardDate.range))}},{key:"isDateRangeValid",value:function(){var e=this.rangeDate.value;return e.from&&e.to}},{key:"openUsersSignup",value:function(e){var t=this.date$.getValue(),n=t.from,i=t.to,a=Object(x.b)(n).format(U.c),r=Object(x.b)(i).format(U.c);this.router.navigate(["/admin/users"],{queryParams:{created_start_date:a,created_end_date:r,not_status:e.name===U.b.ActivatedSignupCount?"pending":""}})}},{key:"openUsersByBanned",value:function(){var e=this.date$.getValue(),t=e.from,n=e.to,i=Object(x.b)(t).format(U.c),a=Object(x.b)(n).format(U.c);this.router.navigate(["/admin/users"],{queryParams:{status:U.f.Banned,start_date:i,end_date:a}})}},{key:"openUsersByTransaction",value:function(e){var t=this.date$.getValue(),n=t.from,i=t.to,a=Object(x.b)(n).format(U.c),r=Object(x.b)(i).format(U.c);this.router.navigate(["/admin/users"],{queryParams:{transaction:U.e.RedeemCoinsRequest,start_date:a,end_date:r}})}},{key:"openActiveUsers",value:function(){var e=this.date$.getValue(),t=e.from,n=e.to,i=Object(x.b)(t).format(U.c),a=Object(x.b)(n).format(U.c);this.router.navigate(["/admin/users"],{queryParams:{last_active_start_date:i,last_active_end_date:a}})}},{key:"openConvertedUsers",value:function(e){var t=this.date$.getValue(),n=t.from,i=t.to,a=Object(x.b)(n).format(U.c),r=Object(x.b)(i).format(U.c);this.router.navigate(["/admin/users"],{queryParams:{convertedType:e,start_date:a,end_date:r}})}}]),e}()).\u0275fac=function(e){return new(e||fe)(p.Pb(j.a),p.Pb(A.a),p.Pb(C.b),p.Pb(l.f))},fe.\u0275cmp=p.Jb({type:fe,selectors:[["duelit-app-data"]],decls:54,vars:57,consts:[[1,"date-filter"],[3,"formControl"],[1,"btn","custom","primary",3,"disabled","click"],[1,"row","container"],[4,"ngIf","ngIfElse"],["class","col-6",3,"title","keenName","viewType","queryType","query","isCombined","apiResult",4,"ngFor","ngForOf"],["class","col-6 metric",3,"title","keenName","viewType","queryType","query",4,"ngFor","ngForOf"],["loading",""],["class","col-4",3,"keenApiInput",4,"ngFor","ngForOf"],[1,"col-4",3,"keenApiInput"],[1,"col-6",3,"title","keenName","viewType","queryType","query","isCombined","apiResult"],["class","col-12",3,"keenApiInput",4,"ngFor","ngForOf"],[1,"col-12",3,"keenApiInput"],["class","col-3 pointer",3,"metric",4,"ngFor","ngForOf"],[1,"col-3","pointer",3,"metric"],[1,"col-3",3,"keenApiInput"],["class","col-4 pointer",3,"metric","click",4,"ngFor","ngForOf"],[1,"col-4","pointer",3,"metric","click"],[1,"col-6","metric",3,"title","keenName","viewType","queryType","query"],[1,"col","col-loading"],[1,"metric","loading"]],template:function(e,t){if(1&e&&(p.Vb(0,"div",0),p.Qb(1,"duelit-date-picker-range",1),p.Vb(2,"button",2),p.hc("click",(function(){return t.updateDate()})),p.Lc(3,"Filter"),p.Ub(),p.Ub(),p.Vb(4,"div"),p.Vb(5,"h4"),p.Lc(6,"Revenue"),p.Ub(),p.Vb(7,"div",3),p.Jc(8,F,2,1,"ng-container",4),p.mc(9,"async"),p.Ub(),p.Vb(10,"h4"),p.Lc(11,"Games"),p.Ub(),p.Vb(12,"div",3),p.Jc(13,Q,1,7,"duelit-keen",5),p.Ub(),p.Vb(14,"h4"),p.Lc(15,"Engagement"),p.Ub(),p.Vb(16,"div",3),p.Jc(17,N,2,1,"ng-container",4),p.mc(18,"async"),p.Ub(),p.Vb(19,"div",3),p.Jc(20,H,2,1,"ng-container",4),p.mc(21,"async"),p.Ub(),p.Vb(22,"div",3),p.Jc(23,z,2,1,"ng-container",4),p.mc(24,"async"),p.Ub(),p.Vb(25,"div",3),p.Jc(26,K,2,1,"ng-container",4),p.mc(27,"async"),p.Jc(28,X,2,1,"ng-container",4),p.mc(29,"async"),p.Ub(),p.Vb(30,"div",3),p.Jc(31,ee,2,1,"ng-container",4),p.mc(32,"async"),p.Jc(33,te,2,1,"ng-container",4),p.mc(34,"async"),p.Ub(),p.Vb(35,"div",3),p.Jc(36,ne,1,5,"duelit-keen",6),p.Jc(37,ie,1,5,"duelit-keen",6),p.Ub(),p.Vb(38,"h4"),p.Lc(39,"User Statistics"),p.Ub(),p.Vb(40,"div",3),p.Jc(41,re,2,1,"ng-container",4),p.mc(42,"async"),p.Jc(43,se,2,1,"ng-container",4),p.mc(44,"async"),p.Jc(45,le,2,1,"ng-container",4),p.mc(46,"async"),p.Ub(),p.Vb(47,"div",3),p.Jc(48,be,2,1,"ng-container",4),p.mc(49,"async"),p.Jc(50,de,2,1,"ng-container",4),p.mc(51,"async"),p.Ub(),p.Ub(),p.Jc(52,pe,2,0,"ng-template",null,7,p.Kc)),2&e){var n=p.zc(53);p.Cb(1),p.rc("formControl",t.rangeDate),p.Cb(1),p.rc("disabled",!t.isDateRangeValid()),p.Cb(6),p.rc("ngIf",p.nc(9,31,t.revenueStats$))("ngIfElse",n),p.Cb(5),p.rc("ngForOf",t.gamesQueries),p.Cb(4),p.rc("ngIf",p.nc(18,33,t.createdChallengePerHrStats$))("ngIfElse",n),p.Cb(3),p.rc("ngIf",p.nc(21,35,t.completedChallengePerHrStats$))("ngIfElse",n),p.Cb(3),p.rc("ngIf",p.nc(24,37,t.completedTournamentPerHrStats$))("ngIfElse",n),p.Cb(3),p.rc("ngIf",p.nc(27,39,t.challengeStats$))("ngIfElse",n),p.Cb(2),p.rc("ngIf",p.nc(29,41,t.challengeStats$))("ngIfElse",n),p.Cb(3),p.rc("ngIf",p.nc(32,43,t.signupCountStats$))("ngIfElse",n),p.Cb(2),p.rc("ngIf",p.nc(34,45,t.signupCountStats$))("ngIfElse",n),p.Cb(3),p.rc("ngForOf",t.engagement3Queries),p.Cb(1),p.rc("ngForOf",t.engagement4Queries),p.Cb(4),p.rc("ngIf",p.nc(42,47,t.signupTypeStats$))("ngIfElse",n),p.Cb(2),p.rc("ngIf",p.nc(44,49,t.activeUsersStats$))("ngIfElse",n),p.Cb(2),p.rc("ngIf",p.nc(46,51,t.userStats$))("ngIfElse",n),p.Cb(3),p.rc("ngIf",p.nc(49,53,t.txnOnInsufficientFunds$))("ngIfElse",n),p.Cb(2),p.rc("ngIf",p.nc(51,55,t.txnOnInsufficientFunds$))("ngIfElse",n)}},directives:[R.a,u.l,u.e,l.n,l.m,V.a,L,M.a],pipes:[l.b],styles:["[_nghost-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:40px}[_nghost-%COMP%]   span.metric.loading[_ngcontent-%COMP%]{height:120px;width:120px;background-size:120px 120px}[_nghost-%COMP%]   .col-loading[_ngcontent-%COMP%]{-webkit-box-pack:center;justify-content:center;display:-webkit-box;display:flex}[_nghost-%COMP%]   .date-filter[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:end;justify-content:flex-end;-webkit-box-align:center;align-items:center}[_nghost-%COMP%]   .date-filter[_ngcontent-%COMP%]   .btn.custom.primary[_ngcontent-%COMP%]{margin-left:15px}[_nghost-%COMP%]  .revenue1 .c3-bar-1{fill:#fe6672!important}"]}),fe),ye=n("Olgc");function ve(e,t){1&e&&p.Qb(0,"duelit-metric",16),2&e&&p.rc("metric",t.$implicit)}function Ce(e,t){if(1&e&&(p.Tb(0),p.Jc(1,ve,1,1,"duelit-metric",15),p.Sb()),2&e){var n=t.$implicit;p.Cb(1),p.rc("ngForOf",n)}}function ke(e,t){if(1&e){var n=p.Wb();p.Vb(0,"duelit-metric",18),p.hc("click",(function(){p.Cc(n);var e=t.$implicit;return p.lc(2).openUsersByTransaction(e)})),p.Ub()}2&e&&p.rc("metric",t.$implicit)}function Oe(e,t){if(1&e&&(p.Tb(0),p.Jc(1,ke,1,1,"duelit-metric",17),p.Sb()),2&e){var n=t.$implicit;p.Cb(1),p.rc("ngForOf",n)}}function Te(e,t){1&e&&(p.Vb(0,"div",19),p.Qb(1,"span",20),p.Ub())}function _e(e,t){if(1&e){var n=p.Wb();p.Vb(0,"duelit-metric",22),p.hc("click",(function(){p.Cc(n);var e=t.$implicit;return p.lc(2).openUsersByTransaction(e)})),p.Ub()}2&e&&p.rc("metric",t.$implicit)}function Se(e,t){if(1&e&&(p.Tb(0),p.Jc(1,_e,1,1,"duelit-metric",21),p.Sb()),2&e){var n=t.$implicit;p.Cb(1),p.rc("ngForOf",n)}}function we(e,t){if(1&e&&(p.Tb(0),p.Qb(1,"duelit-metric",23),p.Sb()),2&e){var n=p.lc();p.Cb(1),p.rc("metric",n.totalProfitStats$)}}function Pe(e,t){if(1&e&&(p.Tb(0),p.Qb(1,"duelit-keen-api",24),p.Sb()),2&e){var n=p.lc();p.Cb(1),p.rc("keenApiInput",n.coinsEarned$)}}function Ie(e,t){if(1&e&&(p.Tb(0),p.Qb(1,"duelit-keen-api",24),p.Sb()),2&e){var n=p.lc();p.Cb(1),p.rc("keenApiInput",n.coinsLost$)}}function $e(e,t){if(1&e&&(p.Tb(0),p.Qb(1,"duelit-metric",25),p.Sb()),2&e){var n=p.lc();p.Cb(1),p.rc("metric",n.coinsBalance$)}}function Ue(e,t){if(1&e){var n=p.Wb();p.Tb(0),p.Vb(1,"button",26),p.hc("click",(function(){p.Cc(n);var e=t.$implicit;return p.lc().updateLevel(e)})),p.Lc(2),p.Ub(),p.Sb()}if(2&e){var i=t.$implicit,a=p.lc();p.Cb(1),p.Hb("selected",i===a.selectedLevel.value),p.Cb(1),p.Nc(" ",i," ")}}function xe(e,t){if(1&e){var n=p.Wb();p.Tb(0),p.Vb(1,"button",26),p.hc("click",(function(){p.Cc(n);var e=t.$implicit;return p.lc().updateGame(e.value)})),p.Lc(2),p.Ub(),p.Sb()}if(2&e){var i=t.$implicit,a=p.lc();p.Cb(1),p.Hb("selected",i.value===a.selectedGame.value),p.Cb(1),p.Nc(" ",i.label," ")}}function je(e,t){if(1&e&&(p.Tb(0),p.Qb(1,"duelit-metric",25),p.Sb()),2&e){var n=p.lc();p.Cb(1),p.rc("metric",n.coinsWonReal$)}}function Ae(e,t){if(1&e&&(p.Tb(0),p.Qb(1,"duelit-metric",25),p.Sb()),2&e){var n=p.lc();p.Cb(1),p.rc("metric",n.coinsWonBot$)}}function Re(e,t){if(1&e&&(p.Tb(0),p.Qb(1,"duelit-keen-api",24),p.Sb()),2&e){var n=p.lc();p.Cb(1),p.rc("keenApiInput",n.coinsWon$)}}var Ve,qe,Ee=((Ve=function(){function e(t,n,i,a,r,c){_classCallCheck(this,e),this.api=t,this.dashboardDate=n,this.toast=i,this.router=a,this.numberPipe=r,this.currencyPipe=c,this.levels=["All levels","beginner","intermediate","expert"],this.games=[{value:-1,label:"All Games"}],this.selectedLevel=new u.d(this.levels[0]),this.selectedGame=new u.d(this.games[0].value),this.coinsEarned$={title:"Coins Earned",classSelector:"coins-earned",viewType:"pie"},this.coinsLost$={title:"Coins Lost",classSelector:"coins-lost",viewType:"pie"},this.coinsWon$={title:"Coins Won",classSelector:"coins-won",viewType:"pie"},this.ngUnsubscribe=new T.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.rangeDate=new u.d(this.dashboardDate.range),this.rangeDate.valueChanges.pipe(Object(w.a)(this.ngUnsubscribe)).subscribe((function(t){e.dashboardDate.range=t})),this.date$=new _.a(this.dashboardDate.range),this.api.get(k.f.Games).subscribe((function(t){console.log("games"),t&&(e.games=e.games.concat(t.map((function(e){return{value:e.id,label:e.title}}))))})),this.totalCredits$=this.api.get(k.c.TotalCredits).pipe(Object(P.a)((function(e){return Object(S.a)({totalCoins:0,giftedCoins:0})})),Object(I.a)((function(t){return[{title:"Total Coins",subTitle:"Count - Total In-game Coins",data:t.totalCoins?e.numberPipe.transform(t.totalCoins):"0"},{title:"Total Gifted Coins",subTitle:"Count - Total Gifted Coins",data:t.giftedCoins?e.numberPipe.transform(t.giftedCoins):"0"}]}))),this.date$.subscribe((function(t){var n=t.from,i=t.to,a=Object(x.b)(n).format(U.c),r=Object(x.b)(i).format(U.c);e.getRedeemedStats(a,r),e.getTotalProfitStats(),e.getCoinsEarnedStats(a,r),e.getCoinsEarnedPositive(),e.getCoinsEarnedNegative(),e.getCoinsBalance(),e.getCoinsWonStats(a,r,e.selectedLevel.value===e.levels[0]?"":e.selectedLevel.value),e.productsSold$=e.api.get(k.c.PurchasedCoins,{query:{start_date:a,end_date:r}}).pipe(Object(P.a)((function(t){return e.toast.error(t.error||t.statusText||t.message),Object(S.a)([{amount:"0.01",count:0},{amount:"4.99",count:0},{amount:"9.99",count:0},{amount:"25.99",count:0},{amount:"49.99",count:0}])})),Object(I.a)((function(e){return e.map((function(e){return{name:U.b.PurchasedCount,title:null,subTitle:"Count - Total ".concat(e.amount&&"0.01"!==e.amount?"Purchased $".concat(e.amount):"Watched Ads ($0.01)"),data:e.count,amount:Number(e.amount)}}))})))}))}},{key:"updateDate",value:function(){this.date$.next(Object.assign({},this.dashboardDate.range))}},{key:"updateLevel",value:function(e){this.selectedLevel.setValue(e),this.getCoinsWonStats("".concat(this.dashboardDate.range.from.year,"-").concat(this.dashboardDate.range.from.month,"-").concat(this.dashboardDate.range.from.day),"".concat(this.dashboardDate.range.to.year,"-").concat(this.dashboardDate.range.to.month,"-").concat(this.dashboardDate.range.to.day),this.selectedLevel.value===this.levels[0]?"":this.selectedLevel.value,this.selectedGame.value===this.games[0].value?"":this.selectedGame.value)}},{key:"updateGame",value:function(e){this.selectedGame.setValue(e),this.getCoinsWonStats("".concat(this.dashboardDate.range.from.year,"-").concat(this.dashboardDate.range.from.month,"-").concat(this.dashboardDate.range.from.day),"".concat(this.dashboardDate.range.to.year,"-").concat(this.dashboardDate.range.to.month,"-").concat(this.dashboardDate.range.to.day),this.selectedLevel.value===this.levels[0]?"":this.selectedLevel.value,this.selectedGame.value===this.games[0].value?"":this.selectedGame.value)}},{key:"getSelectedGameLabel",value:function(){var e=this;return this.games.find((function(t){return t.value===e.selectedGame.value})).label}},{key:"isDateRangeValid",value:function(){var e=this.rangeDate.value;return e.from&&e.to}},{key:"getRedeemedStats",value:function(e,t){var n=this;this.redeemedStats$=this.api.get(k.c.RedeemedCoins,{query:{start_date:e,end_date:t}}).pipe(Object(P.a)((function(e){return Object(S.a)({totalAmount:U.d,playerCount:U.d})})),Object(I.a)((function(e){var t,i;try{t=parseInt(e.totalAmount),i=Math.floor(.00825*t*100)/100}catch(r){console.log("Invalid coin amount",r)}var a="$0<br>0 coins";return i&&t&&(a="".concat(n.currencyPipe.transform(i),"<br>").concat(n.numberPipe.transform(t)," coins")),[{name:U.b.RedeemCount,title:"Total Redeems",subTitle:"Redeem Stats",data:a,class:"coin-dollar-metric",amount:i},{name:U.b.RedeemCount,title:"Redeemed Players Count",subTitle:"Count - Players Count",data:e.playerCount}]})))}},{key:"getTotalProfitStats",value:function(){var e,t=this;this.redeemedStats$.pipe(Object($.a)((function(n){return e=n[0].amount,t.productsSold$}))).subscribe((function(n){var i=n.reduce((function(e,t){return e+t.amount*Number(t.data)}),0)-e,a="$0<br>0 coins";i&&(a="".concat(t.currencyPipe.transform(i),"<br>").concat(t.numberPipe.transform(Math.floor(i/.00825))," coins")),t.totalProfitStats$={title:"Total Profit",subTitle:"Total Profit Stats",data:a,class:"coin-dollar-metric"}}))}},{key:"getCoinsEarnedStats",value:function(e,t){this.coinsEarnedStats$=this.api.get(k.a.CoinsEarnedStats,{query:{start_date:e,end_date:t}}).pipe(Object(P.a)((function(e){return Object(S.a)([])})),Object(I.a)((function(e){return e})))}},{key:"getCoinsEarnedPositive",value:function(){var e=this;this.coinsEarnedStats$.subscribe((function(t){var n,i,a=[{type:"Real Lost",result:(n=t.real_lost_coins,null!=n?n:0)},{type:"Duelit Cut",result:(i=t.total_duelit_cut_prize,null!=i?i:0)}];e.coinsEarned$={title:"Coins Gained",classSelector:"coins-earned",viewType:"pie",data:a}}))}},{key:"getCoinsEarnedNegative",value:function(){var e=this;this.coinsEarnedStats$.subscribe((function(t){var n,i,a=[{type:"Coins Gifted",result:(n=t.coins_gifted,null!=n?n:0)},{type:"Bot Lost",result:(i=t.bot_lost_coins,null!=i?i:0)}];e.coinsLost$={title:"Coins Lost",classSelector:"coins-lost",viewType:"pie",data:a}}))}},{key:"getCoinsBalance",value:function(){var e=this;this.coinsEarnedStats$.subscribe((function(t){var n,i=null!=(n=t.real_lost_coins+t.total_duelit_cut_prize-(t.coins_gifted+t.bot_lost_coins))?n:0;e.coinsBalance$={title:"Total Coins Balance",subTitle:"Coins Balance",data:i,class:"coins-balance"}}))}},{key:"getCoinsWonStats",value:function(e,t,n,i){var a=this,r={start_date:e,end_date:t};i&&(r.game_id=i),n&&(r.level=n),this.coinsWonStats$=this.api.get(k.a.CoinsWon,{query:r}).pipe(Object(P.a)((function(e){return Object(S.a)([])})),Object(I.a)((function(e){var t,n;return a.coinsWonReal$={title:"Coins Won by Real Players",subTitle:"Real Player Coins",data:e.real_player_coins_won,class:"coins-won-real"},a.coinsWonBot$={title:"Coins Won by Bots",subTitle:"Bot Coins",data:e.bot_coins_won,class:"coins-won-bot"},a.coinsWon$={title:"Coins Won",classSelector:"coins-won",viewType:"pie",data:[{type:"Real Players",result:(t=e.real_player_coins_won,null!=t?t:0)},{type:"Bots",result:(n=e.bot_coins_won,null!=n?n:0)}]},e})))}},{key:"openUsersByTransaction",value:function(e){var t=this.date$.getValue(),n=t.from,i=t.to,a=Object(x.b)(n).format(U.c),r=Object(x.b)(i).format(U.c),c={transaction:U.e.RedeemCoinsRequest,start_date:a,end_date:r};e.name===U.b.PurchasedCount&&(c.transaction=U.e.Transaction,c.amount=e.amount),this.router.navigate(["/admin/users"],{queryParams:c})}}]),e}()).\u0275fac=function(e){return new(e||Ve)(p.Pb(j.a),p.Pb(A.a),p.Pb(ye.a),p.Pb(C.b),p.Pb(l.f),p.Pb(l.d))},Ve.\u0275cmp=p.Jb({type:Ve,selectors:[["duelit-finance"]],decls:56,vars:46,consts:[[1,"row","container"],[4,"ngIf","ngIfElse"],[1,"divider"],[1,"date-filter"],[3,"formControl"],[1,"btn","custom","primary",3,"disabled","click"],[1,"row","container","purchased-container"],["loading",""],[1,"coins-won-header"],["ngbDropdown","",1,"d-inline-block"],["id","dropdownLevel","ngbDropdownToggle","",1,"btn","btn-outline-primary"],["ngbDropdownMenu","","aria-labelledby","dropdownLevel"],[4,"ngFor","ngForOf"],["id","dropdownGames","ngbDropdownToggle","",1,"btn","btn-outline-primary"],["ngbDropdownMenu","","aria-labelledby","dropdownGames"],["class","col-6",3,"metric",4,"ngFor","ngForOf"],[1,"col-6",3,"metric"],["class","purchased-metric pointer",3,"metric","click",4,"ngFor","ngForOf"],[1,"purchased-metric","pointer",3,"metric","click"],[1,"col","col-loading"],[1,"metric","loading"],["class","col-6 pointer",3,"metric","click",4,"ngFor","ngForOf"],[1,"col-6","pointer",3,"metric","click"],[1,"col-12",3,"metric"],[1,"col-4",3,"keenApiInput"],[1,"col-4",3,"metric"],["ngbDropdownItem","",3,"click"]],template:function(e,t){if(1&e&&(p.Vb(0,"h4"),p.Lc(1,"Coins"),p.Ub(),p.Vb(2,"div",0),p.Jc(3,Ce,2,1,"ng-container",1),p.mc(4,"async"),p.Ub(),p.Qb(5,"div",2),p.Vb(6,"div",3),p.Qb(7,"duelit-date-picker-range",4),p.Vb(8,"button",5),p.hc("click",(function(){return t.updateDate()})),p.Lc(9,"Filter"),p.Ub(),p.Ub(),p.Vb(10,"h4"),p.Lc(11,"Purchased Product"),p.Ub(),p.Vb(12,"div",6),p.Jc(13,Oe,2,1,"ng-container",1),p.mc(14,"async"),p.Ub(),p.Jc(15,Te,2,0,"ng-template",null,7,p.Kc),p.Vb(17,"h4"),p.Lc(18,"Redeemed Coins"),p.Ub(),p.Vb(19,"div",0),p.Jc(20,Se,2,1,"ng-container",1),p.mc(21,"async"),p.Ub(),p.Vb(22,"h4"),p.Lc(23,"Total Profit"),p.Ub(),p.Vb(24,"div",0),p.Jc(25,we,2,1,"ng-container",1),p.mc(26,"async"),p.Ub(),p.Vb(27,"h4"),p.Lc(28,"Coins Earned/Lost"),p.Ub(),p.Vb(29,"div",0),p.Jc(30,Pe,2,1,"ng-container",1),p.mc(31,"async"),p.Jc(32,Ie,2,1,"ng-container",1),p.mc(33,"async"),p.Jc(34,$e,2,1,"ng-container",1),p.mc(35,"async"),p.Ub(),p.Vb(36,"div",8),p.Vb(37,"h4"),p.Lc(38,"Coins Won"),p.Ub(),p.Vb(39,"div",9),p.Vb(40,"button",10),p.Lc(41),p.Ub(),p.Vb(42,"div",11),p.Jc(43,Ue,3,3,"ng-container",12),p.Ub(),p.Ub(),p.Vb(44,"div",9),p.Vb(45,"button",13),p.Lc(46),p.Ub(),p.Vb(47,"div",14),p.Jc(48,xe,3,3,"ng-container",12),p.Ub(),p.Ub(),p.Ub(),p.Vb(49,"div",0),p.Jc(50,je,2,1,"ng-container",1),p.mc(51,"async"),p.Jc(52,Ae,2,1,"ng-container",1),p.mc(53,"async"),p.Jc(54,Re,2,1,"ng-container",1),p.mc(55,"async"),p.Ub()),2&e){var n=p.zc(16);p.Cb(3),p.rc("ngIf",p.nc(4,26,t.totalCredits$))("ngIfElse",n),p.Cb(4),p.rc("formControl",t.rangeDate),p.Cb(1),p.rc("disabled",!t.isDateRangeValid()),p.Cb(5),p.rc("ngIf",p.nc(14,28,t.productsSold$))("ngIfElse",n),p.Cb(7),p.rc("ngIf",p.nc(21,30,t.redeemedStats$))("ngIfElse",n),p.Cb(5),p.rc("ngIf",p.nc(26,32,t.redeemedStats$))("ngIfElse",n),p.Cb(5),p.rc("ngIf",p.nc(31,34,t.coinsEarnedStats$))("ngIfElse",n),p.Cb(2),p.rc("ngIf",p.nc(33,36,t.coinsEarnedStats$))("ngIfElse",n),p.Cb(2),p.rc("ngIf",p.nc(35,38,t.coinsEarnedStats$))("ngIfElse",n),p.Cb(7),p.Mc(t.selectedLevel.value),p.Cb(2),p.rc("ngForOf",t.levels),p.Cb(3),p.Mc(t.getSelectedGameLabel()),p.Cb(2),p.rc("ngForOf",t.games),p.Cb(2),p.rc("ngIf",p.nc(51,40,t.coinsWonStats$))("ngIfElse",n),p.Cb(2),p.rc("ngIf",p.nc(53,42,t.coinsWonStats$))("ngIfElse",n),p.Cb(2),p.rc("ngIf",p.nc(55,44,t.coinsWonStats$))("ngIfElse",n)}},directives:[l.n,R.a,u.l,u.e,b.g,b.k,b.i,l.m,M.a,V.a,b.h],pipes:[l.b],styles:["[_nghost-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:40px}[_nghost-%COMP%]   span.metric.loading[_ngcontent-%COMP%]{height:120px;width:120px;background-size:120px 120px}[_nghost-%COMP%]   .col-loading[_ngcontent-%COMP%]{-webkit-box-pack:center;justify-content:center;display:-webkit-box;display:flex}[_nghost-%COMP%]   .date-filter[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:end;justify-content:flex-end;-webkit-box-align:center;align-items:center}[_nghost-%COMP%]   .date-filter[_ngcontent-%COMP%]   .btn.custom.primary[_ngcontent-%COMP%]{margin-left:15px}[_nghost-%COMP%]  .revenue1 .c3-bar-1{fill:#fe6672!important}",".divider[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:20px}.coins-won-header[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:10px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-column-gap:20px;-moz-column-gap:20px;column-gap:20px}.coins-won-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0}.purchased-container[_ngcontent-%COMP%]{gap:10px}.purchased-metric[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1}"]}),Ve),De=n("PqYM"),Le=n("l7GE"),Me=n("ZUHj"),Je=function(){function e(t){_classCallCheck(this,e),this.notifier=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Fe(e,this.notifier,t))}}]),e}(),Fe=function(e){function t(e,n,i){var a;return _classCallCheck(this,t),(a=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).notifier=n,a.source=i,a.sourceIsBeingSubscribedTo=!0,a}return _inherits(t,e),_createClass(t,[{key:"notifyNext",value:function(e,t,n,i,a){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)}},{key:"notifyComplete",value:function(e){if(!1===this.sourceIsBeingSubscribedTo)return _get(_getPrototypeOf(t.prototype),"complete",this).call(this)}},{key:"complete",value:function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return _get(_getPrototypeOf(t.prototype),"complete",this).call(this);this._unsubscribeAndRecycle(),this.notifications.next()}}},{key:"_unsubscribe",value:function(){var e=this.notifications,t=this.retriesSubscription;e&&(e.unsubscribe(),this.notifications=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._unsubscribe;return this._unsubscribe=null,_get(_getPrototypeOf(t.prototype),"_unsubscribeAndRecycle",this).call(this),this._unsubscribe=e,this}},{key:"subscribeToRetries",value:function(){var e;this.notifications=new T.a;try{e=(0,this.notifier)(this.notifications)}catch(n){return _get(_getPrototypeOf(t.prototype),"complete",this).call(this)}this.retries=e,this.retriesSubscription=Object(Me.a)(this,e)}}]),t}(Le.a),Qe=n("bOdf"),Be={asc:"desc",desc:"","":"asc"},Ne=((qe=function(){function e(){_classCallCheck(this,e),this.duelitSortable="",this.direction="",this.tableName="",this.sort=new p.o}return _createClass(e,[{key:"rotate",value:function(){this.direction=Be[this.direction],this.sort.emit({column:this.duelitSortable,direction:this.direction})}},{key:"_t",get:function(){return!0}},{key:"isAscending",get:function(){return"asc"===this.direction}},{key:"isDescending",get:function(){return"desc"===this.direction}}]),e}()).\u0275fac=function(e){return new(e||qe)},qe.\u0275dir=p.Kb({type:qe,selectors:[["th","duelitSortable",""]],hostVars:6,hostBindings:function(e,t){1&e&&p.hc("click",(function(e){return t.rotate(e)})),2&e&&p.Hb("pointer",t._t)("asc",t.isAscending)("desc",t.isDescending)},inputs:{duelitSortable:"duelitSortable",direction:"direction",tableName:"tableName"},outputs:{sort:"sort"}}),qe);function Ge(e,t){if(1&e){var n=p.Wb();p.Vb(0,"th",5),p.hc("sort",(function(e){return p.Cc(n),p.lc(2).onSort(e)})),p.Lc(1),p.Ub()}if(2&e){var i=t.$implicit;p.rc("duelitSortable",i),p.Cb(1),p.Mc(i.name)}}function He(e,t){if(1&e&&(p.Vb(0,"th",8),p.Lc(1),p.Ub()),2&e){var n=p.lc().$implicit;p.Cb(1),p.Mc(n)}}function We(e,t){if(1&e&&(p.Vb(0,"td"),p.Lc(1),p.Ub()),2&e){var n=p.lc().$implicit;p.Cb(1),p.Mc(n)}}function ze(e,t){if(1&e&&(p.Tb(0),p.Jc(1,He,2,1,"th",6),p.Jc(2,We,2,1,"ng-template",null,7,p.Kc),p.Sb()),2&e){var n=t.index,i=p.zc(3);p.Cb(1),p.rc("ngIf",0===n)("ngIfElse",i)}}function Ye(e,t){if(1&e&&(p.Vb(0,"tr"),p.Jc(1,ze,4,2,"ng-container",4),p.Ub()),2&e){var n=t.$implicit;p.Cb(1),p.rc("ngForOf",n)}}function Ke(e,t){if(1&e&&(p.Vb(0,"table",2),p.Vb(1,"thead"),p.Vb(2,"tr"),p.Jc(3,Ge,2,2,"th",3),p.Ub(),p.Ub(),p.Vb(4,"tbody"),p.Jc(5,Ye,2,1,"tr",4),p.Ub(),p.Ub()),2&e){var n=p.lc();p.Cb(3),p.rc("ngForOf",n.headerMapping),p.Cb(2),p.rc("ngForOf",n.tableData)}}function Xe(e,t){1&e&&p.Lc(0," No data to show.\n")}var Ze,et=((Ze=function(){function e(){_classCallCheck(this,e),this.headerMapping=[],this.data=[],this.sort=new p.o,this.sortDirection=""}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"getData",value:function(e,t){var n=t;return e.split(".").forEach((function(e){return n=n[e]})),String(n)}},{key:"onSort",value:function(e){var t=e.column,n=e.direction;this.headers.forEach((function(e){e.duelitSortable!==t&&(e.direction="")})),this.sortColumn=t,this.sortDirection=n}},{key:"tableData",get:function(){var e=this;return this.data.map((function(t){return e.headerMapping.map((function(n){return e.getData(n.path,t)}))})).sort((function(t,n){var i=e.headerMapping.indexOf(e.sortColumn);i<0&&(i=0);var a,r,c=(a=t[i])<(r=n[i])?-1:a>r?1:0;return"desc"===e.sortDirection?-1*c:c}))}}]),e}()).\u0275fac=function(e){return new(e||Ze)},Ze.\u0275cmp=p.Jb({type:Ze,selectors:[["duelit-table"]],viewQuery:function(e,t){var n;1&e&&p.Qc(Ne,!0),2&e&&p.yc(n=p.ic())&&(t.headers=n)},inputs:{headerMapping:"headerMapping",data:"data",tableName:"tableName"},outputs:{sort:"sort"},decls:3,vars:2,consts:[["class","table table-striped",4,"ngIf","ngIfElse"],["noData",""],[1,"table","table-striped"],["scope","col",3,"duelitSortable","sort",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["scope","col",3,"duelitSortable","sort"],["scope","row",4,"ngIf","ngIfElse"],["td",""],["scope","row"]],template:function(e,t){if(1&e&&(p.Jc(0,Ke,6,2,"table",0),p.Jc(1,Xe,1,0,"ng-template",null,1,p.Kc)),2&e){var n=p.zc(2);p.rc("ngIf",t.data.length)("ngIfElse",n)}},directives:[l.n,l.m,Ne],styles:['th.asc[_ngcontent-%COMP%]:before, th.desc[_ngcontent-%COMP%]:before{content:"";display:block;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAmxJREFUeAHtmksrRVEUx72fH8CIGQNJkpGUUmakDEiZSJRIZsRQmCkTJRmZmJgQE0kpX0D5DJKJgff7v+ru2u3O3vvc67TOvsdatdrnnP1Y///v7HvvubdbUiIhBISAEBACQkAICAEhIAQ4CXSh2DnyDfmCPEG2Iv9F9MPlM/LHyAecdyMzHYNwR3fdNK/OH9HXl1UCozD24TCvILxizEDWIEzA0FcM8woCgRrJCoS5PIwrANQSMAJX1LEI9bqpQo4JYNFFKRSvIgsxHDVnqZgIkPnNBM0rIGtYk9YOOsqgbgepRCfdbmFtqhFkVEDVPjJp0+Z6e6hRHhqBKgg6ZDCvYBygVmUoEGoh5JTRvIJwhJo1aUOoh4CLPMyvxxi7EWOMgnCGsXXI1GIXlZUYX7ucU+kbR8NW8lh3O7cue0Pk32MKndfUxQFAwxdirk3fHappAnc0oqDPzDfGTBrCfHP04dM4oTV8cxr0SVzH9FF07xD3ib6xCDE+M+aUcVygtWzzbtGX2rPBrEUYfecfQkaFzYi6HjVnGBdtL7epqAlc1+jRdAap74RrnPc4BCijttY2tRcdN0g17w7HqZrXhdJTYAuS3hd8z+vKgK3V1zWPae0mZDMykadBn1hTQBLnZNwVrJpSe/NwEeDsEwCctEOsJTsgxLvCqUl2ACftEGvJDgjxrnBqkh3ASTvEWrIDQrwrnJpkB3DSDrGW7IAQ7wqnJtkBnLRztejXXVu4+mxz/nQ9jR1w5VB86ejLTFcnnDwhzV+F6T+CHZlx6THSjn76eyyBIOPHyDakhBAQAkJACAgBISAEhIAQYCLwC8JxpAmsEGt6AAAAAElFTkSuQmCC") no-repeat;background-size:auto;background-size:22px;width:22px;height:22px;float:left;margin-left:-22px}th.desc[_ngcontent-%COMP%]:before{-webkit-transform:rotate(180deg);transform:rotate(180deg);-ms-transform:rotate(180deg)}']}),Ze);function tt(e,t){1&e&&(p.Vb(0,"div",3),p.Qb(1,"span",4),p.Ub())}function nt(e,t){if(1&e&&(p.Tb(0),p.Qb(1,"duelit-table",5),p.Sb()),2&e){var n=t.$implicit,i=p.lc();p.Cb(1),p.rc("data",n)("headerMapping",i.tableHeadersMapping)}}var it,at=((it=function(){function e(t){_classCallCheck(this,e),this.api=t,this.ngUnsubscribe=new T.a,this.POLL_INTERVAL=1e4,this.timer$=new _.a(this.POLL_INTERVAL/1e3),this._stop=new T.a,this._start=new T.a,this.tableHeadersMapping=[{name:"ID",path:"tournament_id"},{name:"Game Name",path:"game_name"},{name:"Joined Players",path:"total_players"},{name:"Real Players",path:"total_real_players"},{name:"Minimum Players",path:"minimum_players"},{name:"Status",path:"status"},{name:"Total Payout",path:"total_payout"},{name:"Level",path:"level"},{name:"Time Left",path:"time_left"}]}return _createClass(e,[{key:"ngOnInit",value:function(){var e,t=this;Object(De.a)(0,1e3).pipe(Object(I.a)((function(e){return t.POLL_INTERVAL/1e3-e})),Object(w.a)(this._stop),(e=function(){return t._start},function(t){return t.lift(new Je(e))})).subscribe((function(e){t.timer$.next(e)})),this.openTournaments$=Object(De.a)(0,this.POLL_INTERVAL).pipe(Object(Qe.a)((function(){return t.api.get(k.d.GetOccupiedOpenTournaments).pipe(Object(P.a)((function(e){return Object(S.a)({})})))})),Object(I.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null===e&&(e={}),t.restartTimer();var n=t.getTournamentListByStatus(e,"Started");return n=t.mapTimeLeft(n)})),Object(w.a)(this.ngUnsubscribe))}},{key:"getTournamentListByStatus",value:function(e,t){return Object.keys(e).filter((function(n){return e[n].status===t})).map((function(t){return e[t]}))}},{key:"mapTimeLeft",value:function(e){var t=O();return e.filter((function(e){var n=O.utc(e.timer.startAt,"DD/MM/YYYY h:mm:ss");return 0===t.diff(n,"hours")})).map((function(e){var n=O.utc(e.timer.startAt,"DD/MM/YYYY h:mm:ss"),i=O.duration(t.diff(n)),a=10-i.minutes(),r=60-i.seconds();return e.time_left="",a>0&&(e.time_left+="".concat(a," mins ")),e.time_left+="".concat(r," secs"),e}))}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"restartTimer",value:function(){this._stop.next(),this._start.next()}}]),e}()).\u0275fac=function(e){return new(e||it)(p.Pb(j.a))},it.\u0275cmp=p.Jb({type:it,selectors:[["duelit-realtime"]],decls:9,vars:7,consts:[["loading",""],[1,"d-inline","pr-1"],[4,"ngIf","ngIfElse"],[1,"col","col-loading"],[1,"metric","loading"],[3,"data","headerMapping"]],template:function(e,t){if(1&e&&(p.Jc(0,tt,2,0,"ng-template",null,0,p.Kc),p.Vb(2,"h4",1),p.Lc(3,"Active Tournaments"),p.Ub(),p.Vb(4,"span"),p.Lc(5),p.mc(6,"async"),p.Ub(),p.Jc(7,nt,2,2,"ng-container",2),p.mc(8,"async")),2&e){var n=p.zc(1);p.Cb(5),p.Nc("(Refreshing in ",p.nc(6,3,t.timer$)," seconds)"),p.Cb(2),p.rc("ngIf",p.nc(8,5,t.openTournaments$))("ngIfElse",n)}},directives:[l.n,et],pipes:[l.b],styles:[".col-loading[_ngcontent-%COMP%]{-webkit-box-pack:center;justify-content:center;display:-webkit-box;display:flex}[_nghost-%COMP%]     span.loading{height:120px;width:120px;background-size:120px 120px}"]}),it);function rt(e,t){1&e&&p.Qb(0,"duelit-app-data")}function ct(e,t){1&e&&p.Qb(0,"duelit-finance")}function st(e,t){1&e&&p.Qb(0,"duelit-realtime")}var ot,lt,ut=[{path:"",component:(ot=function e(){_classCallCheck(this,e),this.activeTab="Application Data"},ot.\u0275fac=function(e){return new(e||ot)},ot.\u0275cmp=p.Jb({type:ot,selectors:[["duelit-dashboard"]],decls:18,vars:2,consts:[["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],["ngbNavItem","Application Data"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","Finance"],["ngbNavItem","Realtime Data"],[1,"timezone"],[1,"mt-2",3,"ngbNavOutlet"]],template:function(e,t){if(1&e&&(p.Vb(0,"ul",0,1),p.hc("activeIdChange",(function(e){return t.activeTab=e})),p.Vb(2,"li",2),p.Vb(3,"a",3),p.Lc(4,"App"),p.Ub(),p.Jc(5,rt,1,0,"ng-template",4),p.Ub(),p.Vb(6,"li",5),p.Vb(7,"a",3),p.Lc(8,"Finance"),p.Ub(),p.Jc(9,ct,1,0,"ng-template",4),p.Ub(),p.Vb(10,"li",6),p.Vb(11,"a",3),p.Lc(12,"Realtime"),p.Ub(),p.Jc(13,st,1,0,"ng-template",4),p.Ub(),p.Vb(14,"li",7),p.Vb(15,"span"),p.Lc(16,"Timezone: UTC"),p.Ub(),p.Ub(),p.Ub(),p.Qb(17,"div",8)),2&e){var n=p.zc(1);p.rc("activeId",t.activeTab),p.Cb(17),p.rc("ngbNavOutlet",n)}},directives:[b.o,b.q,b.r,b.p,b.t,he,Ee,at],styles:[".timezone[_ngcontent-%COMP%]{display:-webkit-box;display:flex;float:right;-webkit-box-flex:1;flex-grow:1;-webkit-box-pack:right;justify-content:right;-webkit-box-align:center;align-items:center;padding-right:1em}"]}),ot)}],bt=((lt=function e(){_classCallCheck(this,e)}).\u0275mod=p.Nb({type:lt}),lt.\u0275inj=p.Mb({factory:function(e){return new(e||lt)},imports:[[C.e.forChild(ut)],C.e]}),lt);n.d(t,"DashboardModule",(function(){return pt}));var dt,pt=((dt=function e(){_classCallCheck(this,e)}).\u0275mod=p.Nb({type:dt}),dt.\u0275inj=p.Mb({factory:function(e){return new(e||dt)},providers:[l.f,l.d],imports:[[l.c,bt,b.s,b.j,d.a,u.q,m,h,y.a,v.a,g]]}),dt)}}]);