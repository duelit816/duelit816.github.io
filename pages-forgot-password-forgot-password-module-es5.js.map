{"version":3,"sources":["webpack:///src/app/core/pages/forgot-password/forgot-password-routing.module.ts","webpack:///src/app/core/pages/forgot-password/forgot-password.component.ts","webpack:///src/app/core/pages/forgot-password/forgot-password.component.html","webpack:///src/app/core/pages/forgot-password/forgot-password.module.ts"],"names":["routes","path","component","ForgotPasswordRoutingModule","forChild","imports","exports","ForgotPasswordComponent","api","toast","isSendingEmailDetails","email","required","put","ResetPasswordRequest","opts","addSecurity","body","value","viewUrl","location","origin","pipe","err","status","error","JSON","stringify","subscribe","results","success","sendEmailDetails","selector","templateUrl","styleUrls","ForgotPasswordModule","declarations"],"mappings":"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","file":"pages-forgot-password-forgot-password-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ForgotPasswordComponent } from './forgot-password.component';\r\n\r\nconst routes: Routes = [{ path: '', component: ForgotPasswordComponent }];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ForgotPasswordRoutingModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormControl, Validators } from '@angular/forms';\r\nimport { ApiService } from '@core/services/api.service';\r\nimport { ToastService } from '@core/services/toast.service';\r\nimport { UsersApi } from '@shared/constants/api';\r\nimport { EmailValidator } from '@shared/validators';\r\nimport { NEVER, of } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'duelit-forgot-password',\r\n  templateUrl: './forgot-password.component.html',\r\n  styleUrls: ['./forgot-password.component.scss', '../login/login.component.scss']\r\n})\r\nexport class ForgotPasswordComponent implements OnInit {\r\n  isSendingEmailDetails = false;\r\n  email: FormControl;\r\n  constructor(\r\n    private api: ApiService,\r\n    private toast: ToastService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.email = new FormControl('', [ EmailValidator, Validators.required ]);\r\n  }\r\n\r\n  sendEmailDetails() {\r\n    this.isSendingEmailDetails = true;\r\n    this.api.put(UsersApi.ResetPasswordRequest, {\r\n      opts: { addSecurity: false },\r\n      body: {\r\n        email: this.email.value,\r\n        viewUrl: `${location.origin}/reset-password`\r\n      }\r\n    }).pipe(\r\n      catchError(err => {\r\n        if (err.status === 200) {\r\n          return of(err);\r\n        }\r\n        this.isSendingEmailDetails = false;\r\n        this.toast.error(err.error || JSON.stringify(err));\r\n        return NEVER;\r\n      })\r\n    ).subscribe((results) => {\r\n      this.isSendingEmailDetails = false;\r\n      this.toast.success('Further instructions will be send to your email');\r\n    });\r\n  }\r\n}\r\n","<duelit-panel head=\"Forgot Password\">\r\n  <div class=\"form-group\" >\r\n    <input type=\"email\" placeholder=\"Email\" autocomplete=\"off\" class=\"form-control custom\" [formControl]=\"email\">\r\n    <ng-container *ngIf=\"email.invalid && email.touched\">\r\n      <span class=\"error\" *ngIf=\"email.errors.required\">This field is required.</span>\r\n      <span class=\"error\" *ngIf=\"email.errors.email\">This field must be a valid email address.</span>\r\n    </ng-container>\r\n\r\n    <button class=\"btn custom primary\" [disabled]=\"email.invalid || isSendingEmailDetails\" (click)=\"sendEmailDetails()\">\r\n      <span *ngIf=\"isSendingEmailDetails; else login\" class=\"loading\"></span>\r\n      <ng-template #login>Send Request</ng-template>\r\n    </button>\r\n    <span [routerLink]=\"['/login']\">Back to Login</span>\r\n  </div>\r\n</duelit-panel>\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { PanelModule } from '@shared/components/panel';\r\n\r\nimport { ForgotPasswordRoutingModule } from './forgot-password-routing.module';\r\nimport { ForgotPasswordComponent } from './forgot-password.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [ForgotPasswordComponent],\r\n  imports: [\r\n    CommonModule,\r\n    ForgotPasswordRoutingModule,\r\n    PanelModule,\r\n    ReactiveFormsModule\r\n  ]\r\n})\r\nexport class ForgotPasswordModule { }\r\n"]}