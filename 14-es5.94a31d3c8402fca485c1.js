function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{kXEd:function(e,t,r){"use strict";r.r(t);var s=r("ofXK"),n=r("3Pt+"),o=r("2Did"),i=r("tyNb"),a=r("Znnd"),c=r("IGGr"),d=r("2Vo4"),l=r("LRne"),u=r("JIr8"),b=r("fXoL"),f=r("Olgc"),p=r("qc5V"),g=r("UdTj");function m(e,t){1&e&&(b.Vb(0,"span",11),b.Lc(1,"This field is required."),b.Ub())}function h(e,t){if(1&e&&(b.Vb(0,"span",11),b.Lc(1),b.Ub()),2&e){var r=b.lc(3);b.Cb(1),b.Nc("This field can not be less than ",r.resetPasswordForm.get("password").errors.minlength.requiredLength," characters.")}}function w(e,t){if(1&e&&(b.Vb(0,"span",11),b.Lc(1),b.Ub()),2&e){var r=b.lc(3);b.Cb(1),b.Nc("This field can be at most ",r.resetPasswordForm.get("password").errors.maxlength.requiredLength," characters long.")}}function P(e,t){if(1&e&&(b.Tb(0),b.Jc(1,m,2,0,"span",9),b.Jc(2,h,2,1,"span",9),b.Jc(3,w,2,1,"span",9),b.Sb()),2&e){var r=b.lc(2);b.Cb(1),b.rc("ngIf",r.resetPasswordForm.get("password").errors.required),b.Cb(1),b.rc("ngIf",r.resetPasswordForm.get("password").errors.minlength),b.Cb(1),b.rc("ngIf",r.resetPasswordForm.get("password").errors.maxlength)}}function v(e,t){1&e&&(b.Vb(0,"span",11),b.Lc(1,"This field is required."),b.Ub())}function C(e,t){if(1&e&&(b.Vb(0,"span",11),b.Lc(1),b.Ub()),2&e){var r=b.lc(3);b.Cb(1),b.Nc("This field can not be less than ",r.resetPasswordForm.get("confirm").errors.minlength.requiredLength," characters.")}}function k(e,t){if(1&e&&(b.Vb(0,"span",11),b.Lc(1),b.Ub()),2&e){var r=b.lc(3);b.Cb(1),b.Nc("This field can be at most ",r.resetPasswordForm.get("confirm").errors.maxlength.requiredLength," characters long.")}}function y(e,t){if(1&e&&(b.Tb(0),b.Jc(1,v,2,0,"span",9),b.Jc(2,C,2,1,"span",9),b.Jc(3,k,2,1,"span",9),b.Sb()),2&e){var r=b.lc(2);b.Cb(1),b.rc("ngIf",r.resetPasswordForm.get("confirm").errors.required),b.Cb(1),b.rc("ngIf",r.resetPasswordForm.get("confirm").errors.minlength),b.Cb(1),b.rc("ngIf",r.resetPasswordForm.get("confirm").errors.maxlength)}}function x(e,t){1&e&&b.Qb(0,"span",12)}function L(e,t){1&e&&b.Lc(0,"Send Request")}function F(e,t){1&e&&(b.Vb(0,"span",11),b.Lc(1,"Password are not the same."),b.Ub())}var I=function(){return["/login"]};function O(e,t){if(1&e){var r=b.Wb();b.Tb(0),b.Vb(1,"duelit-panel"),b.Vb(2,"div",2),b.Vb(3,"h2"),b.Lc(4,"Reset your password"),b.Ub(),b.Vb(5,"p"),b.Lc(6,"Enter your new password below"),b.Ub(),b.Qb(7,"input",3),b.Jc(8,P,4,3,"ng-container",4),b.Qb(9,"input",5),b.Jc(10,y,4,3,"ng-container",4),b.Vb(11,"button",6),b.hc("click",(function(){return b.Cc(r),b.lc().resetPassword()})),b.Jc(12,x,1,0,"span",7),b.Jc(13,L,1,0,"ng-template",null,8,b.Kc),b.Ub(),b.Jc(15,F,2,0,"span",9),b.Vb(16,"span",10),b.Lc(17,"Back to Login"),b.Ub(),b.Ub(),b.Ub(),b.Sb()}if(2&e){var s=b.zc(14),n=b.lc();b.Cb(2),b.rc("formGroup",n.resetPasswordForm),b.Cb(5),b.Hb("invalid",!n.isPasswordSame()&&n.isControlsTouched()),b.Cb(1),b.rc("ngIf",n.resetPasswordForm.get("password").invalid&&n.resetPasswordForm.get("password").touched),b.Cb(1),b.Hb("invalid",!n.isPasswordSame()&&n.isControlsTouched()),b.Cb(1),b.rc("ngIf",n.resetPasswordForm.get("confirm").invalid&&n.resetPasswordForm.get("confirm").touched),b.Cb(1),b.rc("disabled",n.resetPasswordForm.invalid||!n.isPasswordSame()||n.isResettingPassword),b.Cb(1),b.rc("ngIf",n.isResettingPassword)("ngIfElse",s),b.Cb(3),b.rc("ngIf",!n.isPasswordSame()&&n.isControlsTouched()),b.Cb(1),b.rc("routerLink",b.uc(12,I))}}function V(e,t){if(1&e&&(b.Tb(0),b.Vb(1,"h3"),b.Lc(2,"Your password was successfully changed."),b.Ub(),b.Vb(3,"h3"),b.Lc(4),b.mc(5,"async"),b.Ub(),b.Vb(6,"h3",15),b.Lc(7,"Go back to Login."),b.Ub(),b.Sb()),2&e){var r=b.lc(2);b.Cb(4),b.Nc("Redirecting you to Login in ",b.nc(5,2,r.timer$),""),b.Cb(2),b.rc("routerLink",b.uc(4,I))}}var J=function(){return["/forgot-password"]};function U(e,t){if(1&e&&(b.Vb(0,"h3"),b.Lc(1,"Your link seems to be invalid, please request a new forgot password."),b.Ub(),b.Vb(2,"h3"),b.Lc(3),b.mc(4,"async"),b.Ub(),b.Vb(5,"h3",15),b.Lc(6,"Go back to Forgot Password."),b.Ub()),2&e){var r=b.lc(2);b.Cb(3),b.Nc("Redirecting you to Forgot password page in ",b.nc(4,2,r.timer$),""),b.Cb(2),b.rc("routerLink",b.uc(4,J))}}function _(e,t){if(1&e&&(b.Vb(0,"div",13),b.Jc(1,V,8,5,"ng-container",0),b.Jc(2,U,7,5,"ng-template",null,14,b.Kc),b.Ub()),2&e){var r=b.zc(3),s=b.lc();b.Cb(1),b.rc("ngIf",s.resetPasswordFinished)("ngIfElse",r)}}var T,j,q,R=((T=function(){function e(t,r,s,n,o){_classCallCheck(this,e),this.router=t,this.route=r,this.toast=s,this.fb=n,this.api=o,this.countdown=10,this.timer$=new d.a(this.countdown),this.isResettingPassword=!1,this.resetPasswordFinished=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;if(this.valid=this.route.snapshot.data.data.valid,this.email=this.route.snapshot.data.data.email,this.token=this.route.snapshot.params.token,!this.valid)return this.toast.error("Your link to reset your password seems to be invalid. Please make a new request"),void Object(c.a)(this.countdown).subscribe((function(t){e.timer$.next(t),t<=0&&(e.timer$.complete(),e.router.navigate(["/forgot-password"]))}));this.resetPasswordForm=this.fb.group({password:new n.d("",[n.s.required,n.s.maxLength(24),n.s.minLength(8)]),confirm:new n.d("",[n.s.required,n.s.maxLength(24),n.s.minLength(8)])})}},{key:"resetPassword",value:function(){var e=this;this.isResettingPassword=!0,this.isPasswordSame()?this.api.post(a.e.ResetPassword,{opts:{addSecurity:!1},body:{token:this.token,password:this.resetPasswordForm.get("confirm").value,email:this.email}}).pipe(Object(u.a)((function(e){return 200===e.status?Object(l.a)("successful"):Object(l.a)(e)}))).subscribe((function(t){e.isResettingPassword=!1,"successful"===t?(e.toast.success("Reset password successful"),e.resetPasswordFinished=!0,Object(c.a)(e.countdown).subscribe((function(t){e.timer$.next(t),t<=0&&(e.timer$.complete(),e.router.navigate(["/login"]))}))):e.toast.error(t.error.text||JSON.stringify(t.error))})):(this.toast.error("Passwords do not match"),this.isResettingPassword=!1)}},{key:"isPasswordSame",value:function(){var e=this.resetPasswordForm.get("password");return this.resetPasswordForm.get("confirm").value===e.value}},{key:"isControlsTouched",value:function(){var e=this.resetPasswordForm.get("password"),t=this.resetPasswordForm.get("confirm");return e.touched&&t.touched}}]),e}()).\u0275fac=function(e){return new(e||T)(b.Pb(i.b),b.Pb(i.a),b.Pb(f.a),b.Pb(n.c),b.Pb(p.a))},T.\u0275cmp=b.Jb({type:T,selectors:[["duelit-reset-password"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["invalid",""],[1,"form-group",3,"formGroup"],["type","password","placeholder","New password","autocomplete","off","formControlName","password",1,"form-control","custom"],[4,"ngIf"],["type","password","placeholder","Repeat new password","autocomplete","off","formControlName","confirm",1,"form-control","custom"],[1,"btn","custom","primary",3,"disabled","click"],["class","loading",4,"ngIf","ngIfElse"],["reset",""],["class","error",4,"ngIf"],[3,"routerLink"],[1,"error"],[1,"loading"],[1,"invalid-msg"],["invalidLink",""],[1,"link",3,"routerLink"]],template:function(e,t){if(1&e&&(b.Jc(0,O,18,13,"ng-container",0),b.Jc(1,_,4,2,"ng-template",null,1,b.Kc)),2&e){var r=b.zc(2);b.rc("ngIf",t.valid&&!t.resetPasswordFinished)("ngIfElse",r)}},directives:[s.m,g.a,n.m,n.g,n.b,n.l,n.f,i.c],pipes:[s.b],styles:[".link[_ngcontent-%COMP%]{color:#4093f7;cursor:pointer}.invalid-msg[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}",".form-group[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;display:-webkit-box;display:flex;justify-items:center;text-align:center}span[_ngcontent-%COMP%]{color:#4093f7;cursor:pointer;padding-top:15px}span.error[_ngcontent-%COMP%]{color:red;cursor:unset;padding-top:unset;align-self:flex-start;padding-bottom:10px}span.loading[_ngcontent-%COMP%]{padding:0;background-size:15px 15px}[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;width:100%;height:100%}[_nghost-%COMP%]   duelit-panel[_ngcontent-%COMP%]{max-width:720px;-webkit-box-flex:1;flex-grow:1}button[_ngcontent-%COMP%]{font-size:15px}"]}),T),M=r("lJxs"),N=[{path:"",component:R,resolve:{data:(j=function(){function e(t){_classCallCheck(this,e),this.api=t}return _createClass(e,[{key:"resolve",value:function(e,t){var r=this.api.buildPath(a.e.ValidateToken,{token:e.paramMap.get("token")});return this.api.get(r).pipe(Object(u.a)((function(e){return 200===e.status?Object(l.a)(e.error.text):Object(l.a)(null)})),Object(M.a)((function(e){return{valid:!!e,email:e}})))}}]),e}(),j.\u0275fac=function(e){return new(e||j)(b.dc(p.a))},j.\u0275prov=b.Lb({token:j,factory:j.\u0275fac,providedIn:"root"}),j)}}],S=((q=function e(){_classCallCheck(this,e)}).\u0275mod=b.Nb({type:q}),q.\u0275inj=b.Mb({factory:function(e){return new(e||q)},imports:[[i.e.forChild(N)],i.e]}),q);r.d(t,"ResetPasswordModule",(function(){return $}));var E,$=((E=function e(){_classCallCheck(this,e)}).\u0275mod=b.Nb({type:E}),E.\u0275inj=b.Mb({factory:function(e){return new(e||E)},imports:[[s.c,S,o.a,n.q]]}),E)}}]);