function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{JcD5:function(e,t,n){"use strict";n.r(t);var i,a,r=n("ofXK"),o=n("3Pt+"),c=n("1kSV"),u=n("fXoL"),s=((i=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:i}),i.\u0275inj=u.Mb({factory:function(e){return new(e||i)},imports:[[r.c,c.f,c.x,o.q]]}),i),m=n("2Did"),l=n("tyNb"),b=n("Znnd"),d=n("wd/R"),f=n("5yfJ"),h=n("JIr8"),p=n("qc5V"),y=n("twzC"),C=n("Olgc"),g=n("UdTj"),v=((a=function(){function e(t){_classCallCheck(this,e),this.fb=t,this.meridian=!0,this.onChange=function(){},this.onTouch=function(){}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t=d();this.dateTimeForm=this.fb.group({date:new o.d({year:t.year(),month:t.month()+1,day:t.day()}),time:new o.d({hour:t.hour(),minute:t.minute()})}),this.dateTimeForm.valueChanges.subscribe((function(t){e.onChange({year:t.date.year,month:t.date.month,day:t.date.day,hour:t.date.hour,minute:t.date.minute})}))}},{key:"toggleMeridian",value:function(){this.meridian=!this.meridian}},{key:"writeValue",value:function(e){this.dateTimeForm.setValue({date:{year:e.year,month:e.month,day:e.day},time:{hour:e.hour,minute:e.minute}})}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouch=e}}]),e}()).\u0275fac=function(e){return new(e||a)(u.Pb(o.c))},a.\u0275cmp=u.Jb({type:a,selectors:[["duelit-date-time-picker"]],inputs:{minDate:"minDate"},decls:6,vars:7,consts:[[3,"formGroup"],[3,"click"],["formControlName","time",3,"meridian"],["formControlName","date",3,"minDate"]],template:function(e,t){1&e&&(u.Tb(0,0),u.Vb(1,"div"),u.Vb(2,"button",1),u.hc("click",(function(){return t.toggleMeridian()})),u.Lc(3),u.Ub(),u.Ub(),u.Qb(4,"ngb-timepicker",2),u.Qb(5,"ngb-datepicker",3),u.Sb()),2&e&&(u.rc("formGroup",t.dateTimeForm),u.Cb(2),u.Fb("btn btn-sm btn-outline-",t.meridian?"success":"danger",""),u.Cb(1),u.Nc(" Meridian - ",t.meridian?"ON":"OFF"," "),u.Cb(1),u.rc("meridian",t.meridian),u.Cb(1),u.rc("minDate",t.minDate))},directives:[o.m,o.g,c.w,o.l,o.f,c.e],styles:[""]}),a);function k(e,t){if(1&e&&(u.Vb(0,"option",7),u.Lc(1),u.Ub()),2&e){var n=t.$implicit;u.rc("value",n.id),u.Cb(1),u.Mc(n.title)}}function w(e,t){if(1&e&&(u.Tb(0),u.Jc(1,k,2,2,"option",11),u.Sb()),2&e){var n=t.$implicit;u.Cb(1),u.rc("ngForOf",n)}}var _,M,O=[{path:"",component:(_=function(){function e(t,n,i,a){_classCallCheck(this,e),this.api=t,this.fb=n,this.loginService=i,this.toast=a}return _createClass(e,[{key:"ngOnInit",value:function(){this.games$=this.api.get(b.f.Games);var e=d();this.minDate=new c.c(e.year(),e.month()+1,e.day()),this.tournamentForm=this.fb.group({dateTime:new o.d({year:e.year(),month:e.month()+1,day:e.day(),hour:e.hour(),minute:e.minute()}),game:new o.d("",o.s.required),playerCount:new o.d(2,[o.s.required,o.s.min(2)])})}},{key:"isCreateDisabled",value:function(){return""===this.tournamentForm.value.game}},{key:"createTournament",value:function(){var e=this,t=this.tournamentForm.value,n=t.dateTime,i={tournament_type:"public",interval:3e5,user_id:this.loginService.user.id,game_id:t.game,minimum_players:t.playerCount,started_at:d().year(n.year).month(n.month+1).day(n.day).hour(n.hour).minute(n.minute).utc().format("DD/MM/YYYY HH:mm:ss")};this.api.post(b.d.CreateTournament,{body:i,opts:{addSecurity:!1}}).pipe(Object(h.a)((function(t){return e.toast.error(t.error||t.statusText||t.message),f.a}))).subscribe((function(){e.toast.success("Tournament created successfully.")}))}}]),e}(),_.\u0275fac=function(e){return new(e||_)(u.Pb(p.a),u.Pb(o.c),u.Pb(y.a),u.Pb(C.a))},_.\u0275cmp=u.Jb({type:_,selectors:[["duelit-tournaments"]],decls:23,vars:7,consts:[["head","Create a tournament"],[1,"row",3,"formGroup"],[1,"date-time","col-md"],["formControlName","dateTime",3,"minDate"],[1,"game-details","col-md"],[1,"form-group"],["formControlName","status","formControlName","game",1,"form-control"],[3,"value"],[4,"ngIf"],["type","number","min","2","formControlName","playerCount",1,"form-control"],[1,"btn","custom","primary",3,"disabled","click"],[3,"value",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(u.Vb(0,"duelit-panel",0),u.Vb(1,"div",1),u.Vb(2,"div",2),u.Vb(3,"label"),u.Lc(4,"Date and Time"),u.Ub(),u.Qb(5,"duelit-date-time-picker",3),u.Ub(),u.Vb(6,"div",4),u.Vb(7,"div"),u.Vb(8,"div",5),u.Vb(9,"label"),u.Lc(10,"Game"),u.Ub(),u.Vb(11,"select",6),u.Vb(12,"option",7),u.Lc(13,"Select Game"),u.Ub(),u.Jc(14,w,2,1,"ng-container",8),u.mc(15,"async"),u.Ub(),u.Ub(),u.Vb(16,"div",5),u.Vb(17,"label"),u.Lc(18,"Minimum Players"),u.Ub(),u.Qb(19,"input",9),u.Ub(),u.Ub(),u.Vb(20,"div"),u.Vb(21,"button",10),u.hc("click",(function(){return t.createTournament()})),u.Lc(22,"Create"),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Ub()),2&e&&(u.Cb(1),u.rc("formGroup",t.tournamentForm),u.Cb(4),u.rc("minDate",t.minDate),u.Cb(7),u.rc("value",""),u.Cb(2),u.rc("ngIf",u.nc(15,5,t.games$)),u.Cb(7),u.rc("disabled",t.isCreateDisabled()))},directives:[g.a,o.m,o.g,v,o.l,o.f,o.r,o.o,o.t,r.n,o.p,o.b,r.m],pipes:[r.b],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}[_nghost-%COMP%]   duelit-panel[_ngcontent-%COMP%]{max-width:35em}[_nghost-%COMP%]   duelit-panel[_ngcontent-%COMP%]   .game-details[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:justify;justify-content:space-between}[_nghost-%COMP%]   duelit-panel[_ngcontent-%COMP%]   .game-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}"]}),_)}],P=((M=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:M}),M.\u0275inj=u.Mb({factory:function(e){return new(e||M)},imports:[[l.e.forChild(O)],l.e]}),M);n.d(t,"TournamentsModule",(function(){return V}));var T,V=((T=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:T}),T.\u0275inj=u.Mb({factory:function(e){return new(e||T)},imports:[[r.c,P,m.a,s,o.q]]}),T)}}]);